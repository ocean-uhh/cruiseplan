

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CruisePlan Demo &mdash; CruisePlan v0.2 v0.2.0.post1.dev1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=393fce2e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=104987fd"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CruisePlan v0.2
              <img src="_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLI Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#workflow-paths">Workflow Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#troubleshooting">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebook Demo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo-output.html">CruisePlan Demo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli_reference.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml_reference.html">YAML Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation_types.html">Operation Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculations.html">Calculation Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="units_and_defaults.html">Units and defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_ports.html">Port list</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_formats.html">Output formats</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/CONTRIBUTING.md">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Development Roadmap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CruisePlan v0.2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CruisePlan Demo</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="CruisePlan-Demo">
<h1>CruisePlan Demo<a class="headerlink" href="#CruisePlan-Demo" title="Link to this heading">ÔÉÅ</a></h1>
<p>This notebook demonstrates the complete CruisePlan workflow using Python functions rather than CLI commands. Each section corresponds to a CLI subcommand and shows how to accomplish the same tasks programmatically.</p>
<section id="Workflow-Overview">
<h2>Workflow Overview<a class="headerlink" href="#Workflow-Overview" title="Link to this heading">ÔÉÅ</a></h2>
<ol class="arabic simple">
<li><p><strong>Download</strong>: Get bathymetry data for depth calculations</p></li>
<li><p><strong>Pandoi</strong>: Search PANGAEA database for relevant oceanographic datasets</p></li>
<li><p><strong>Pangaea</strong>: Process DOI list into campaign dataset</p></li>
<li><p><strong>Stations</strong>: Interactive station planning (or programmatic configuration)</p></li>
<li><p><strong>Validate</strong>: Check configuration for errors and warnings</p></li>
<li><p><strong>Enrich</strong>: Add computed data (depths, coordinates, expand sections)</p></li>
<li><p><strong>Map</strong>: Create visualization maps</p></li>
<li><p><strong>Schedule</strong>: Generate cruise timeline and outputs</p></li>
</ol>
<p>All outputs will be saved to <code class="docutils literal notranslate"><span class="pre">tests_output/demo/</span></code> for easy exploration.</p>
</section>
<section id="Setup-and-Imports">
<h2>Setup and Imports<a class="headerlink" href="#Setup-and-Imports" title="Link to this heading">ÔÉÅ</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.scheduler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_cruise_schedule</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">enrich_configuration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.bathymetry</span><span class="w"> </span><span class="kn">import</span> <span class="n">BathymetryManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.pangaea</span><span class="w"> </span><span class="kn">import</span> <span class="n">PangaeaManager</span><span class="p">,</span> <span class="n">save_campaign_data</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.map_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_map_from_yaml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.utils.global_ports</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">add_custom_port</span><span class="p">,</span>
    <span class="n">get_available_ports</span><span class="p">,</span>
    <span class="n">list_ports_in_region</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.utils.yaml_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">save_yaml</span>

<span class="c1"># Set up output directory</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../tests_output/demo&#39;</span><span class="p">)</span>
<span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Demo outputs will be saved to: </span><span class="si">{</span><span class="n">output_dir</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Configure logging to see what&#39;s happening</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">: </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Demo outputs will be saved to: /home/runner/work/cruiseplan/cruiseplan/notebooks/../tests_output/demo
</pre></div></div>
</div>
</section>
<section id="Step-1:-Download-Bathymetry-Data">
<h2>Step 1: Download Bathymetry Data<a class="headerlink" href="#Step-1:-Download-Bathymetry-Data" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">download</span> <span class="pre">--bathymetry-source</span> <span class="pre">etopo2022</span></code></p>
<p>First, we need bathymetry data for depth calculations and visualization.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize bathymetry manager with ETOPO2022 data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üì• Downloading bathymetry data...&quot;</span><span class="p">)</span>
<span class="n">bathymetry</span> <span class="o">=</span> <span class="n">BathymetryManager</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;etopo2022&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/ETOPO_2022_v1_60s_N90W180_bed.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üì• Downloading bathymetry data...
</pre></div></div>
</div>
</section>
<section id="Step-2:-Search-PANGAEA-Database">
<h2>Step 2: Search PANGAEA Database<a class="headerlink" href="#Step-2:-Search-PANGAEA-Database" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">pandoi</span> <span class="pre">&quot;CTD</span> <span class="pre">temperature&quot;</span> <span class="pre">--lat</span> <span class="pre">50</span> <span class="pre">70</span> <span class="pre">--lon</span> <span class="pre">-60</span> <span class="pre">-30</span> <span class="pre">--limit</span> <span class="pre">15</span></code></p>
<p>Search for relevant oceanographic datasets to inform our cruise planning.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üîç Searching PANGAEA database...&quot;</span><span class="p">)</span>

<span class="c1"># Initialize PANGAEA manager</span>
<span class="n">pangaea_mgr</span> <span class="o">=</span> <span class="n">PangaeaManager</span><span class="p">()</span>

<span class="c1"># Define search parameters</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;CTD&quot;</span> <span class="c1"># or &quot;CTD temperature North Atlantic&quot;</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">70</span><span class="p">)</span>  <span class="c1"># (min_lon, min_lat, max_lon, max_lat)</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Query: &#39;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Geographic bounds: 50¬∞N-70¬∞N, 60¬∞W-30¬∞W&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Limit: </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> datasets&quot;</span><span class="p">)</span>

<span class="c1"># Perform search</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">datasets</span> <span class="o">=</span> <span class="n">pangaea_mgr</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="si">}</span><span class="s2"> datasets&quot;</span><span class="p">)</span>

    <span class="c1"># Extract DOIs and save to file</span>
    <span class="n">dois</span> <span class="o">=</span> <span class="p">[</span><span class="n">ds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;doi&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">datasets</span> <span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;doi&#39;</span><span class="p">)]</span>

    <span class="c1"># Save DOI list</span>
    <span class="n">doi_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">doi_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">doi</span> <span class="ow">in</span> <span class="n">dois</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">doi</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   DOI list saved to: </span><span class="si">{</span><span class="n">doi_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   First few DOIs: </span><span class="si">{</span><span class="n">dois</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå Search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Create a minimal DOI list for demo purposes</span>
    <span class="n">doi_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">doi_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;10.1594/PANGAEA.123456</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Created minimal DOI file for demo: </span><span class="si">{</span><span class="n">doi_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Searching Pangaea: &#39;CTD&#39; (Limit: 5)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üîç Searching PANGAEA database...
   Query: &#39;CTD&#39;
   Geographic bounds: 50¬∞N-70¬∞N, 60¬∞W-30¬∞W
   Limit: 5 datasets
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Search found 1823 total matches. Retrieving first 5...
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.755512
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604878
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604842
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604887
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604857
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Found 5 datasets
   DOI list saved to: ../tests_output/demo/demo_dois.txt
   First few DOIs: [&#39;10.1594/PANGAEA.755512&#39;, &#39;10.1594/PANGAEA.604878&#39;, &#39;10.1594/PANGAEA.604842&#39;]
</pre></div></div>
</div>
</section>
<section id="Step-3:-Process-PANGAEA-Campaigns">
<h2>Step 3: Process PANGAEA Campaigns<a class="headerlink" href="#Step-3:-Process-PANGAEA-Campaigns" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">pangaea</span> <span class="pre">demo_dois.txt</span> <span class="pre">-o</span> <span class="pre">tests_output/demo/</span></code></p>
<p>Process the DOI list to extract campaign coordinates and metadata.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the DOI list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">dois</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dois</span><span class="p">)</span><span class="si">}</span><span class="s2"> PANGAEA DOIs...&quot;</span><span class="p">)</span>

<span class="c1"># Create manager and fetch datasets</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">PangaeaManager</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_datasets</span><span class="p">(</span>
    <span class="n">doi_list</span><span class="o">=</span><span class="n">dois</span><span class="p">,</span>
    <span class="n">rate_limit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">merge_campaigns</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>


<span class="k">if</span> <span class="n">datasets</span><span class="p">:</span>
    <span class="c1"># Save using the CLI&#39;s save function</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;ctd_pangaea_data.pkl&quot;</span><span class="p">)</span>
    <span class="n">save_campaign_data</span><span class="p">(</span><span class="n">datasets</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Saved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="si">}</span><span class="s2"> campaign tracks to </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚ö†Ô∏è No datasets retrieved&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìä Processing 5 PANGAEA DOIs...
‚úÖ Saved 2 campaign tracks to ../tests_output/demo/ctd_pangaea_data.pkl
</pre></div></div>
</div>
</section>
<section id="Step-4:-Create-Station-Configuration">
<h2>Step 4: Create Station Configuration<a class="headerlink" href="#Step-4:-Create-Station-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">stations</span> <span class="pre">--pangaea-file</span> <span class="pre">campaigns.pkl</span> <span class="pre">--lat</span> <span class="pre">50</span> <span class="pre">70</span> <span class="pre">--lon</span> <span class="pre">-60</span> <span class="pre">-30</span></code></p>
<p>For this demo, we‚Äôll create a programmatic station configuration rather than using the interactive interface.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üó∫Ô∏è  Creating station configuration...&quot;</span><span class="p">)</span>

<span class="c1"># Create a sample cruise configuration</span>
<span class="n">cruise_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Demo North Atlantic Survey 2025&#39;</span><span class="p">,</span>
    <span class="s1">&#39;default_vessel_speed&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="s1">&#39;turnaround_time&#39;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">,</span>
    <span class="s1">&#39;ctd_descent_rate&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;ctd_ascent_rate&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;calculate_transfer_between_sections&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;calculate_depth_via_bathymetry&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;start_date&#39;</span><span class="p">:</span> <span class="s1">&#39;2025-06-01T00:00:00Z&#39;</span><span class="p">,</span>

    <span class="c1"># Define stations along a transect</span>
    <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_001&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">55.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">50.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Continental shelf station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_002&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">57.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">45.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Slope station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_003&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">59.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">40.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Deep water station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_004&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">61.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">35.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;water_sampling&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;sampling&#39;</span><span class="p">,</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">180.0</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Water sampling station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MOOR_001&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">60.5</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">38.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;mooring&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;deployment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">240.0</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Mooring deployment&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_005&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">63.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">30.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Northern end station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_006&#39;</span><span class="p">,</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">58.0</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">42.0</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Return transect station&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>

    <span class="c1"># Add scientific transit</span>
    <span class="s1">&#39;transits&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Demo_ADCP_Survey&#39;</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;underway&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;ADCP&#39;</span><span class="p">,</span>
            <span class="s1">&#39;vessel_speed&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s1">&#39;route&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">56.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">48.0</span><span class="p">},</span>
                <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">56.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">38.0</span><span class="p">}</span>
            <span class="p">],</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Zonal ADCP survey transect&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>

    <span class="c1"># Define execution order with leg-based port definitions</span>
    <span class="s1">&#39;legs&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Demo_Survey&#39;</span><span class="p">,</span>
            <span class="s1">&#39;departure_port&#39;</span><span class="p">:</span> <span class="s1">&#39;port_st_johns&#39;</span><span class="p">,</span>
            <span class="s1">&#39;arrival_port&#39;</span><span class="p">:</span> <span class="s1">&#39;port_st_johns&#39;</span><span class="p">,</span>
            <span class="s1">&#39;first_waypoint&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_001&#39;</span><span class="p">,</span>
            <span class="s1">&#39;last_waypoint&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_006&#39;</span><span class="p">,</span>
            <span class="s1">&#39;activities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;STN_001&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_002&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_003&#39;</span><span class="p">,</span> <span class="s1">&#39;Demo_ADCP_Survey&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_004&#39;</span><span class="p">,</span> <span class="s1">&#39;MOOR_001&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_005&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_006&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Save configuration</span>
<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">save_yaml</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">,</span> <span class="n">config_file</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Station configuration created&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Configuration saved to: </span><span class="si">{</span><span class="n">config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Stations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;stations&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Transits: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;transits&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Legs: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;legs&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Saved configuration to: ../tests_output/demo/demo_cruise.yaml
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üó∫Ô∏è  Creating station configuration...
‚úÖ Station configuration created
   Configuration saved to: ../tests_output/demo/demo_cruise.yaml
   Stations: 7
   Transits: 1
   Legs: 1
</pre></div></div>
</div>
</section>
<section id="Step-5:-Manually-edit-configuration">
<h2>Step 5: Manually edit configuration<a class="headerlink" href="#Step-5:-Manually-edit-configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p>The cruise configuration in <code class="docutils literal notranslate"><span class="pre">stations.yaml</span></code> will have some default values that need to be manually updated. These include the <code class="docutils literal notranslate"><span class="pre">departure_port</span></code> and <code class="docutils literal notranslate"><span class="pre">arrival_port</span></code> within the cruise leg definition. Default values are called ‚Äúport_update‚Äù, but can be replaced using values from the catalog of ports.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Interactive_Survey</span>
<span class="w">    </span><span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port_update</span>
<span class="w">    </span><span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port_update</span>
<span class="w">    </span><span class="nt">first_waypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STN_001</span>
<span class="w">    </span><span class="nt">last_waypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STN_002</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sequential</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STN_001</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STN_002</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Transit_01</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Area_01</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using cruiseplan.utils.global_ports with get_available_ports() and list_ports_in_region()</span>

<span class="n">ports</span> <span class="o">=</span> <span class="n">get_available_ports</span><span class="p">()</span>

<span class="c1"># Display them nicely</span>
<span class="k">for</span> <span class="n">port_id</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">ports</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">port_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Or get ports in a specific region</span>
<span class="n">north_atlantic_ports</span> <span class="o">=</span> <span class="n">list_ports_in_region</span><span class="p">(</span>
      <span class="n">min_lat</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">max_lat</span><span class="o">=</span><span class="mf">70.0</span><span class="p">,</span>
      <span class="n">min_lon</span><span class="o">=-</span><span class="mf">30.0</span><span class="p">,</span> <span class="n">max_lon</span><span class="o">=</span><span class="mf">20.0</span>
  <span class="p">)</span>

<span class="k">for</span> <span class="n">port_id</span><span class="p">,</span> <span class="n">port_name</span> <span class="ow">in</span> <span class="n">north_atlantic_ports</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">port_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">port_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># If you want to add a custom port for your project</span>
<span class="n">add_custom_port</span><span class="p">(</span><span class="s2">&quot;port_my_station&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My Research Station&quot;</span><span class="p">,</span>
    <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;My Research Station, Location&quot;</span><span class="p">,</span>
    <span class="s2">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">60.0</span><span class="p">,</span>
    <span class="s2">&quot;longitude&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">20.0</span><span class="p">,</span>
    <span class="s2">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;GMT+0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Custom research station for this cruise&quot;</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
port_reykjavik: Iceland capital, subpolar/Nordic Seas
port_nuuk: Greenland capital, Arctic research gateway
port_tromso: Northern Norway, Arctic gateway
port_trondheim: Central Norway, Norwegian Sea operations
port_bergen: Western Norway, Nordic Seas
port_southampton: UK south coast, Atlantic access
port_bremerhaven: Germany, Arctic and Atlantic operations
port_hamburg: Germany, North Sea and Baltic access
port_emden: Germany, North Sea operations
port_rostock: Germany, Baltic Sea operations
port_kiel: Germany, Baltic Sea research hub
port_brest: France, Atlantic operations
port_nice: France, Mediterranean research
port_vigo: Spain northwest, Atlantic margin research
port_cadiz: Spain southwest, Atlantic and Mediterranean
port_malaga: Spain south coast, Mediterranean research
port_heraklion: Crete, Eastern Mediterranean research
port_catania: Sicily, Mediterranean research
port_limassol: Cyprus, Eastern Mediterranean operations
port_las_palmas: Canary Islands, subtropical Atlantic research
port_ponta_delgada: Azores, mid-Atlantic research hub
port_funchal: Madeira, subtropical Atlantic operations
port_mindelo: Cape Verde, tropical Atlantic research
port_walvis_bay: Namibia, Benguela upwelling system
port_durban: South Africa, Indian Ocean operations
port_halifax: Nova Scotia, North Atlantic research hub
port_st_johns: Newfoundland, Labrador Sea operations
port_vancouver: British Columbia, North Pacific research
port_woods_hole: Massachusetts, major oceanographic center
port_san_diego: California, Pacific research operations
port_astoria: Oregon, Pacific Northwest research
port_honolulu: Hawaii, central Pacific research hub
port_ensenada: Baja California, eastern Pacific research
port_balboa: Panama, Pacific-Caribbean operations
port_bridgetown: Barbados, Caribbean research hub
port_rio_de_janeiro: Brazil, South Atlantic research
port_fortaleza: Brazil northeast, equatorial Atlantic
port_belem: Brazil, Amazon outflow studies
port_recife: Brazil, tropical Atlantic research
port_antofagasta: Chile, Humboldt current research
port_port_louis_mauritius: Mauritius, western Indian Ocean research
port_la_reunion: Reunion, southwestern Indian Ocean
port_port_louis_seychelles: Seychelles, equatorial Indian Ocean
port_colombo: Sri Lanka, northern Indian Ocean research
port_singapore: Singapore, Southeast Asian research hub
port_yokohama: Japan, western Pacific research
port_fremantle: Western Australia, Indian Ocean research
port_wellington: New Zealand, Southern Ocean research
port_auckland: New Zealand, Southwest Pacific research
port_papeete: French Polynesia, central Pacific research
port_update: Default port for station picker - update with actual ports
port_reykjavik: Reykjavik
port_tromso: Troms√∏
port_trondheim: Trondheim
port_bergen: Bergen
port_southampton: Southampton
port_bremerhaven: Bremerhaven
port_hamburg: Hamburg
port_emden: Emden
port_rostock: Rostock
port_kiel: Kiel
port_update: Reykjavik (DEFAULT in stations.yaml)
</pre></div></div>
</div>
</section>
<section id="Step-5:-Enrich-Configuration">
<h2>Step 5: Enrich Configuration<a class="headerlink" href="#Step-5:-Enrich-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">enrich</span> <span class="pre">-c</span> <span class="pre">demo_cruise.yaml</span> <span class="pre">--add-depths</span> <span class="pre">--add-coords</span> <span class="pre">--expand-sections</span></code></p>
<p>Add computed data like depths, formatted coordinates, and expand CTD sections.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üîß Enriching configuration...&quot;</span><span class="p">)</span>

<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">enriched_config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise_enriched.yaml&quot;</span>

<span class="c1"># Use the actual enrichment function</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">enrich_configuration</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">config_file</span><span class="p">,</span>
    <span class="n">add_depths</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">add_coords</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">expand_sections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bathymetry_source</span><span class="o">=</span><span class="s2">&quot;etopo2022&quot;</span><span class="p">,</span>
    <span class="n">coord_format</span><span class="o">=</span><span class="s2">&quot;dmm&quot;</span><span class="p">,</span>
    <span class="n">output_path</span><span class="o">=</span><span class="n">enriched_config_file</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Configuration enriched and saved to </span><span class="si">{</span><span class="n">enriched_config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">summary</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sections_expanded&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Expanded </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;sections_expanded&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> CTD sections&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Created </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_from_expansion&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> new stations&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stations_with_depths_added&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Added depths to </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_with_depths_added&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> stations&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stations_with_coords_added&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Added coordinates to </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_with_coords_added&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> stations&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING: ‚ö†Ô∏è Added missing field: default_distance_between_stations = 15.0 km
INFO: ‚ÑπÔ∏è Missing required fields added with defaults. Update these values as needed.
INFO: Saved configuration to: /tmp/tmpkv9gaulp.yaml
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/ETOPO_2022_v1_60s_N90W180_bed.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
INFO: Saved configuration to: ../tests_output/demo/demo_cruise_enriched.yaml
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üîß Enriching configuration...
‚úÖ Configuration enriched and saved to ../tests_output/demo/demo_cruise_enriched.yaml
   - Added depths to 7 stations
   - Added coordinates to 9 stations
</pre></div></div>
</div>
</section>
<section id="Step-6:-Validate-Configuration">
<h2>Step 6: Validate Configuration<a class="headerlink" href="#Step-6:-Validate-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">validate</span> <span class="pre">-c</span> <span class="pre">demo_cruise.yaml</span> <span class="pre">--check-depths</span></code></p>
<p>Check the configuration for errors and potential issues.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Validating configuration...&quot;</span><span class="p">)</span>

<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

<span class="c1"># The Cruise.__init__() automatically performs validation during loading</span>
<span class="c1"># including Pydantic model validation and cruise-specific validation</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Configuration loaded and validated successfully!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span><span class="si">}</span><span class="s2"> station definitions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">[])</span><span class="si">}</span><span class="s2"> leg definitions&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;transits&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transits</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transits</span><span class="p">)</span><span class="si">}</span><span class="s2"> transit definitions&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;schedule&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">schedule</span><span class="p">)</span><span class="si">}</span><span class="s2"> scheduled items&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Validating configuration...
‚úÖ Configuration loaded and validated successfully!
   - Found 7 station definitions
   - Found 1 leg definitions
   - Found 1 transit definitions
</pre></div></div>
</div>
</section>
<section id="Step-7:-Generate-Maps">
<h2>Step 7: Generate Maps<a class="headerlink" href="#Step-7:-Generate-Maps" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">map</span> <span class="pre">-c</span> <span class="pre">demo_cruise_enriched.yaml</span> <span class="pre">--output-file</span> <span class="pre">demo_map.png</span></code></p>
<p>Create visualization maps of the cruise plan.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üó∫Ô∏è Generating cruise track map with bathymetry...&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Load the enriched cruise configuration</span>
    <span class="n">enriched_config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise_enriched.yaml&quot;</span>
    <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">enriched_config_file</span><span class="p">)</span>

    <span class="c1"># Generate the map using the new function</span>
    <span class="n">map_file</span> <span class="o">=</span> <span class="n">generate_map_from_yaml</span><span class="p">(</span>
        <span class="n">cruise</span><span class="p">,</span>
        <span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;demo_cruise_map.png&quot;</span><span class="p">,</span>
        <span class="n">bathymetry_source</span><span class="o">=</span><span class="s2">&quot;gebco2025&quot;</span><span class="p">,</span>
        <span class="n">bathymetry_stride</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">show_plot</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Display inline in notebook</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">map_file</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Map generated and displayed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚ùå Map generation failed&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå Map generation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Display bounds: 42.6¬∞-68.0¬∞N, -57.7¬∞--25.0¬∞E
INFO: Loading bathymetry for region: 39.6¬∞-71.0¬∞N, -60.7¬∞--22.0¬∞E
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/GEBCO_2025.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
INFO: Added bathymetry contours covering full region
INFO: Map displayed with 9 points, 1 lines, 0 areas
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üó∫Ô∏è Generating cruise track map with bathymetry...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/demo-output2_18_2.png" src="_images/demo-output2_18_2.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Map generated and displayed
</pre></div></div>
</div>
</section>
<section id="Step-8:-Generate-Schedule">
<h2>Step 8: Generate Schedule<a class="headerlink" href="#Step-8:-Generate-Schedule" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">schedule</span> <span class="pre">-c</span> <span class="pre">demo_cruise_enriched.yaml</span> <span class="pre">-o</span> <span class="pre">tests_output/demo/</span> <span class="pre">--format</span> <span class="pre">all</span></code></p>
<p>Generate the complete cruise timeline and output files.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üìÖ Generating cruise schedule...&quot;</span><span class="p">)</span>

<span class="c1"># Generate the schedule with multiple output formats</span>
<span class="n">schedule_results</span> <span class="o">=</span> <span class="n">generate_cruise_schedule</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">enriched_config_file</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
    <span class="n">formats</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;html&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span><span class="s2">&quot;netcdf&quot;</span><span class="p">],</span>  <span class="c1"># Available formats: html, csv, latex, netcdf, kml, png</span>
    <span class="n">validate_depths</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">selected_leg</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Schedule generated successfully!&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">schedule_results</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">format_type</span><span class="p">,</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">schedule_results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">format_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Loaded cruise: Demo North Atlantic Survey 2025
INFO: Generating activity timeline...
INFO: Processing leg &#39;Demo_Survey&#39;: Leg &#39;Demo_Survey&#39;: St. John&#39;s (round trip), 0 operations, 1 clusters
INFO: Generated maritime timeline with 17 activities
INFO: - Generated 17 activities
INFO:     Total schedule duration: 391.2 hours
INFO:     Total distance: 3392.2 nm
INFO: - Generating HTML output...
INFO:     HTML schedule: Demo_North_Atlantic_Survey_2025_summary.html
INFO: - Generating CSV output...
INFO:     CSV schedule: Demo_North_Atlantic_Survey_2025_schedule.csv
INFO: - Generating NETCDF output...
INFO:     netCDF output: Demo_North_Atlantic_Survey_2025_schedule.nc
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìÖ Generating cruise schedule...
‚úÖ Schedule generated successfully!
   - SUCCESS: True
   - TOTAL_ACTIVITIES: 17
   - TOTAL_DURATION_HOURS: 391.1833240880191
   - TOTAL_DISTANCE_NM: 3392.2175640265295
   - FORMATS_GENERATED: [&#39;html&#39;, &#39;csv&#39;, &#39;netcdf&#39;]
   - OUTPUT_FILES: [PosixPath(&#39;../tests_output/demo/Demo_North_Atlantic_Survey_2025_schedule.html&#39;), PosixPath(&#39;../tests_output/demo/Demo_North_Atlantic_Survey_2025_schedule.csv&#39;), PosixPath(&#39;../tests_output/demo/Demo_North_Atlantic_Survey_2025_schedule.nc&#39;)]
   - WARNINGS: []
   - CRUISE_NAME: Demo North Atlantic Survey 2025
   - SELECTED_LEG: None
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;Demo_North_Atlantic_Survey_2025_schedule.nc&#39;</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name,
.xr-group-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-group-name::before {
  content: "üìÅ";
  padding-right: 0.3em;
}

.xr-group-name,
.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "‚ñ∫";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "‚ñº";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 20px auto;
  width: 100%;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 20px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 9kB
Dimensions:          (obs: 17)
Coordinates:
    time             (obs) datetime64[ns] 136B ...
    longitude        (obs) float32 68B ...
    latitude         (obs) float32 68B ...
    waterdepth       (obs) float32 68B ...
Dimensions without coordinates: obs
Data variables: (12/13)
    operation_depth  (obs) float32 68B ...
    name             (obs) &lt;U35 2kB ...
    category         (obs) &lt;U15 1kB ...
    type             (obs) &lt;U23 2kB ...
    action           (obs) &lt;U10 680B ...
    comment          (obs) &lt;U26 2kB ...
    ...               ...
    duration         (obs) float32 68B ...
    vessel_speed     (obs) float32 68B ...
    start_latitude   (obs) float32 68B ...
    start_longitude  (obs) float32 68B ...
    end_latitude     (obs) float32 68B ...
    end_longitude    (obs) float32 68B ...
Attributes:
    featureType:          trajectory
    title:                Ship Schedule: Demo North Atlantic Survey 2025
    institution:          Generated by CruisePlan software
    source:               Scheduler computation from YAML configuration
    Conventions:          CF-1.8
    cruise_name:          Demo North Atlantic Survey 2025
    total_duration_days:  9.713403414934874e-10
    creation_date:        2025-12-21T12:56:18
    comment:              Master file containing all cruise data - specialize...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-6ae19910-82b4-43d7-ae17-48b1254f1462' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-6ae19910-82b4-43d7-ae17-48b1254f1462' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>obs</span>: 17</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-02df828d-f6c0-461a-9bd2-f134c7342b2d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-02df828d-f6c0-461a-9bd2-f134c7342b2d' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1f7a0ba7-ea7e-48a4-80f0-98626e80f9df' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1f7a0ba7-ea7e-48a4-80f0-98626e80f9df' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d2e7a416-3515-4f1b-b5c6-13443e0ca0ae' class='xr-var-data-in' type='checkbox'><label for='data-d2e7a416-3515-4f1b-b5c6-13443e0ca0ae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time of ship position</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=datetime64[ns]]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>longitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3b2995ae-e75a-462f-8e73-65d4e318ceb6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3b2995ae-e75a-462f-8e73-65d4e318ceb6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e7fd3e8-7726-400b-8344-0187f0d05da3' class='xr-var-data-in' type='checkbox'><label for='data-8e7fd3e8-7726-400b-8344-0187f0d05da3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>ship longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>latitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-57db13db-9a07-4228-b131-41078ae84ccc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-57db13db-9a07-4228-b131-41078ae84ccc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5f4713b5-0692-48fd-a47a-608ca84bd44e' class='xr-var-data-in' type='checkbox'><label for='data-5f4713b5-0692-48fd-a47a-608ca84bd44e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>ship latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>waterdepth</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-8b6a76f8-585b-4018-8edc-976dd7b24ae5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8b6a76f8-585b-4018-8edc-976dd7b24ae5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-17d385b8-867b-408d-a43a-392ba5b9fa3f' class='xr-var-data-in' type='checkbox'><label for='data-17d385b8-867b-408d-a43a-392ba5b9fa3f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>water depth at operation location</dd><dt><span>standard_name :</span></dt><dd>sea_floor_depth_below_sea_surface</dd><dt><span>vocabulary :</span></dt><dd>http://vocab.nerc.ac.uk/collection/P07/current/CFV13N17/</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>axis :</span></dt><dd>Z</dd><dt><span>comment :</span></dt><dd>Available for point operations only, NaN for transits and line operations</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-96a1bbbf-0c48-4f49-80ee-6f49a7663ed9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-96a1bbbf-0c48-4f49-80ee-6f49a7663ed9' class='xr-section-summary' >Data variables: <span>(13)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>operation_depth</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-5860fa2e-e41a-4576-a3b4-21287e88124f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5860fa2e-e41a-4576-a3b4-21287e88124f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-739e0ffd-2ee6-4f13-be30-e02231ed0817' class='xr-var-data-in' type='checkbox'><label for='data-739e0ffd-2ee6-4f13-be30-e02231ed0817' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>target operation depth</dd><dt><span>standard_name :</span></dt><dd>depth</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>axis :</span></dt><dd>Z</dd><dt><span>comment :</span></dt><dd>Target depth for operation (e.g., CTD cast depth), NaN if not specified</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>name</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U35</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b6f9973e-6e22-4561-b3c4-8557361695fb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b6f9973e-6e22-4561-b3c4-8557361695fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c5f7be54-cf2e-4e3d-b5cf-b1b0880d060c' class='xr-var-data-in' type='checkbox'><label for='data-c5f7be54-cf2e-4e3d-b5cf-b1b0880d060c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>activity identifier</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U35]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>category</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1d5a5644-0064-4ae3-8369-cc9efa29e8a9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1d5a5644-0064-4ae3-8369-cc9efa29e8a9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9825dc75-035a-4f28-afef-4e1977b71383' class='xr-var-data-in' type='checkbox'><label for='data-9825dc75-035a-4f28-afef-4e1977b71383' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>activity category</dd><dt><span>flag_values :</span></dt><dd>point_operation line_operation area_operation transit</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U15]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>type</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U23</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-cb03717f-c6b9-45b4-a895-53a37d0c76d9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cb03717f-c6b9-45b4-a895-53a37d0c76d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-26aab1fa-b589-472f-851f-273de02a70bd' class='xr-var-data-in' type='checkbox'><label for='data-26aab1fa-b589-472f-851f-273de02a70bd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>specific type of activity</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U23]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>action</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U10</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ea501694-5233-43b8-b960-3ccc323b9483' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ea501694-5233-43b8-b960-3ccc323b9483' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dbb0d8cf-8931-4cfa-99f6-5df34bde567c' class='xr-var-data-in' type='checkbox'><label for='data-dbb0d8cf-8931-4cfa-99f6-5df34bde567c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>specific action or method</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U10]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>comment</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U26</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f0cda20b-9a99-4166-821a-b07cad21a5cd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f0cda20b-9a99-4166-821a-b07cad21a5cd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-01d396e1-1e3c-4d9f-b4ae-fb25dc52c384' class='xr-var-data-in' type='checkbox'><label for='data-01d396e1-1e3c-4d9f-b4ae-fb25dc52c384' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>activity comments</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U26]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>leg_assignment</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-65e9ca47-c37a-4b4a-9392-78cd9356a343' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-65e9ca47-c37a-4b4a-9392-78cd9356a343' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-474628b4-21c5-45d0-8dd3-abb8787f7417' class='xr-var-data-in' type='checkbox'><label for='data-474628b4-21c5-45d0-8dd3-abb8787f7417' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>cruise leg identifier</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=&lt;U11]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>duration</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a4dace14-305b-4317-a87a-502e4f695e22' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a4dace14-305b-4317-a87a-502e4f695e22' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-91f166a8-d145-4b11-94a2-9f2512ae8764' class='xr-var-data-in' type='checkbox'><label for='data-91f166a8-d145-4b11-94a2-9f2512ae8764' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>activity duration</dd><dt><span>units :</span></dt><dd>hour</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vessel_speed</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1af04a45-0989-4d0f-b062-55a4521cb90d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1af04a45-0989-4d0f-b062-55a4521cb90d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c43b2813-ac0d-428d-8252-5a82d466492b' class='xr-var-data-in' type='checkbox'><label for='data-c43b2813-ac0d-428d-8252-5a82d466492b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>vessel speed</dd><dt><span>units :</span></dt><dd>knots</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>start_latitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a8ce5b65-0f47-43a8-8153-eff97a2bd24b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a8ce5b65-0f47-43a8-8153-eff97a2bd24b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5ee706f6-e865-4375-8de3-8eeb49b48113' class='xr-var-data-in' type='checkbox'><label for='data-5ee706f6-e865-4375-8de3-8eeb49b48113' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>line operation start latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>start_longitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1638ae80-6d81-4945-8b94-015f652b87db' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1638ae80-6d81-4945-8b94-015f652b87db' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-27f0003f-0dd8-4783-adaa-37b8033baca4' class='xr-var-data-in' type='checkbox'><label for='data-27f0003f-0dd8-4783-adaa-37b8033baca4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>line operation start longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_latitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2d1134c9-ab51-4156-9260-f718e2390ec6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2d1134c9-ab51-4156-9260-f718e2390ec6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1320e775-36a3-4973-b47d-c1296a222e6a' class='xr-var-data-in' type='checkbox'><label for='data-1320e775-36a3-4973-b47d-c1296a222e6a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>line operation end latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_longitude</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-dafd93b7-ef06-40d2-b42b-0f0e0c88e8a6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dafd93b7-ef06-40d2-b42b-0f0e0c88e8a6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8235022-887b-4091-9ebd-9a10faa4a21b' class='xr-var-data-in' type='checkbox'><label for='data-a8235022-887b-4091-9ebd-9a10faa4a21b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>line operation end longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[17 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-56f69390-fdcc-447e-abe2-6da378927bc6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-56f69390-fdcc-447e-abe2-6da378927bc6' class='xr-section-summary' >Attributes: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>featureType :</span></dt><dd>trajectory</dd><dt><span>title :</span></dt><dd>Ship Schedule: Demo North Atlantic Survey 2025</dd><dt><span>institution :</span></dt><dd>Generated by CruisePlan software</dd><dt><span>source :</span></dt><dd>Scheduler computation from YAML configuration</dd><dt><span>Conventions :</span></dt><dd>CF-1.8</dd><dt><span>cruise_name :</span></dt><dd>Demo North Atlantic Survey 2025</dd><dt><span>total_duration_days :</span></dt><dd>9.713403414934874e-10</dd><dt><span>creation_date :</span></dt><dd>2025-12-21T12:56:18</dd><dt><span>comment :</span></dt><dd>Master file containing all cruise data - specialized files derived from this</dd></dl></div></li></ul></div></div></div>
</div>
</section>
<section id="Workflow-Summary">
<h2>Workflow Summary<a class="headerlink" href="#Workflow-Summary" title="Link to this heading">ÔÉÅ</a></h2>
<p>Let‚Äôs review what we‚Äôve accomplished and check our output files.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üìã CruisePlan Demo Workflow Complete!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üóÇÔ∏è  Generated files in tests_output/demo/:&quot;</span><span class="p">)</span>

<span class="c1"># List all files in output directory using pathlib.Path</span>

<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>  <span class="c1"># Ensure output_dir is a Path object</span>
<span class="k">if</span> <span class="n">output_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">output_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">))</span>
    <span class="n">total_size</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
            <span class="n">total_size</span> <span class="o">+=</span> <span class="n">size</span>
            <span class="n">size_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">KB&quot;</span> <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">MB&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   üìÑ </span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">size_str</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üíæ Total output size: </span><span class="si">{</span><span class="n">total_size</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">KB&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìÅ Output directory: </span><span class="si">{</span><span class="n">output_dir</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   No output files found&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">‚ú® Workflow Steps Completed:&quot;</span><span class="p">)</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;1. ‚úÖ Downloaded bathymetry data (ETOPO2022)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2. ‚úÖ Searched PANGAEA database for relevant datasets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;3. ‚úÖ Processed DOI list into campaign data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;4. ‚úÖ Created station configuration programmatically&quot;</span><span class="p">,</span>
    <span class="s2">&quot;5. ‚úÖ Validated configuration and checked depths&quot;</span><span class="p">,</span>
    <span class="s2">&quot;6. ‚úÖ Enriched configuration with computed data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;7. ‚úÖ Generated complete cruise schedule and timeline&quot;</span><span class="p">,</span>
    <span class="s2">&quot;8. ‚úÖ Created interactive cruise track map&quot;</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üéØ Next Steps:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Review demo_cruise_schedule.html for the complete cruise timeline&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Examine demo_cruise_enriched.yaml to see the enriched configuration&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Import demo_cruise_schedule.nc into data analysis tools&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üöÄ This demonstrates the complete CruisePlan workflow using Python functions!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Each step corresponds to a CLI command but uses the underlying Python API.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìã CruisePlan Demo Workflow Complete!

üóÇÔ∏è  Generated files in tests_output/demo/:
   üìÑ Demo_North_Atlantic_Survey_2025_schedule.csv (2.4KB)
   üìÑ Demo_North_Atlantic_Survey_2025_schedule.html (8.1KB)
   üìÑ Demo_North_Atlantic_Survey_2025_schedule.nc (32.5KB)
   üìÑ ctd_pangaea_data.pkl           (0.5KB)
   üìÑ demo_cruise.yaml               (1.8KB)
   üìÑ demo_cruise_enriched.yaml      (2.4KB)
   üìÑ demo_dois.txt                  (0.1KB)

üíæ Total output size: 47.9KB
üìÅ Output directory: /home/runner/work/cruiseplan/cruiseplan/notebooks/../tests_output/demo

‚ú® Workflow Steps Completed:
   1. ‚úÖ Downloaded bathymetry data (ETOPO2022)
   2. ‚úÖ Searched PANGAEA database for relevant datasets
   3. ‚úÖ Processed DOI list into campaign data
   4. ‚úÖ Created station configuration programmatically
   5. ‚úÖ Validated configuration and checked depths
   6. ‚úÖ Enriched configuration with computed data
   7. ‚úÖ Generated complete cruise schedule and timeline
   8. ‚úÖ Created interactive cruise track map

üéØ Next Steps:
   ‚Ä¢ Review demo_cruise_schedule.html for the complete cruise timeline
   ‚Ä¢ Examine demo_cruise_enriched.yaml to see the enriched configuration
   ‚Ä¢ Import demo_cruise_schedule.nc into data analysis tools

üöÄ This demonstrates the complete CruisePlan workflow using Python functions!
   Each step corresponds to a CLI command but uses the underlying Python API.
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>