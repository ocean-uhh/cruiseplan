

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YAML Configuration Reference &mdash; CruisePlan v0.3.5 v0.3.5</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=393fce2e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=ba50482b"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Operation Types Reference" href="operation_types.html" />
    <link rel="prev" title="map" href="cli/map.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CruisePlan v0.3.5
              <img src="_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLI Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#workflow-paths">Workflow Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#troubleshooting">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebook Demo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo-output.html">CruisePlan Demo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Specifications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cruise_architecture.html">Cruise Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_reference.html">CLI Command Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">YAML Configuration Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-structure">Configuration Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formats-and-data-conventions">Formats and data conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simplified-leg-creation">Simplified Leg Creation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cruise-wide-metadata">Cruise-wide metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ports-and-routing-waypoints">Ports and Routing Waypoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#global-catalog-definitions">Global Catalog Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#point-definition">Point Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fields-operations-actions">Fields, Operations &amp; Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#duration-calculation">Duration Calculation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#line-definition">Line Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transit-fields">Fields, Operations &amp; Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ctd-section-special-case">CTD Section Special Case</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Duration Calculation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#area-definition">Area Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#area-entry-and-exit-points">Area Entry and Exit Points</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#schedule-organization">Schedule Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#leg-cluster-definitions">Leg &amp; Cluster Definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#leg-cluster-fields">Leg &amp; Cluster Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#processing-priority">Processing Priority</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routing-anchor-behavior-first-activity-last-activity">Routing Anchor Behavior (first_activity &amp; last_activity)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#activity-types">Activity Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimization-strategy-and-un-ordered">Optimization <strong>Strategy</strong> and (Un-)Ordered</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#validation-notes">Validation Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multiple-definitions">Multiple Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validation-behavior">Validation Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-references">Cross-References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operation_types.html">Operation Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculations.html">Calculation Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="units_and_defaults.html">Units and defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_ports.html">Port list</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_formats.html">Output formats</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/CONTRIBUTING.md">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_testing.html">Manual Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html">Development Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#implementation-notes">Implementation Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#risk-assessment">Risk Assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#contributing">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CruisePlan v0.3.5</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">YAML Configuration Reference</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="yaml-configuration-reference">
<span id="yaml-reference"></span><h1>YAML Configuration Reference<a class="headerlink" href="#yaml-configuration-reference" title="Link to this heading"></a></h1>
<p>This document provides a comprehensive reference for all YAML configuration fields in CruisePlan, including validation rules, special behaviors, and conventions.</p>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id32">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-structure" id="id33">Configuration Structure</a></p></li>
<li><p><a class="reference internal" href="#formats-and-data-conventions" id="id34">Formats and data conventions</a></p></li>
<li><p><a class="reference internal" href="#simplified-leg-creation" id="id35">Simplified Leg Creation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cruise-wide-metadata" id="id36">Cruise-wide metadata</a></p>
<ul>
<li><p><a class="reference internal" href="#ports-and-routing-waypoints" id="id37">Ports and Routing Waypoints</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#global-catalog-definitions" id="id38">Global Catalog Definitions</a></p>
<ul>
<li><p><a class="reference internal" href="#point-definition" id="id39">Point Definition</a></p>
<ul>
<li><p><a class="reference internal" href="#fields-operations-actions" id="id40">Fields, Operations &amp; Actions</a></p></li>
<li><p><a class="reference internal" href="#duration-calculation" id="id41">Duration Calculation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#line-definition" id="id42">Line Definition</a></p>
<ul>
<li><p><a class="reference internal" href="#transit-fields" id="id43">Fields, Operations &amp; Actions</a></p></li>
<li><p><a class="reference internal" href="#ctd-section-special-case" id="id44">CTD Section Special Case</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id45">Duration Calculation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#area-definition" id="id46">Area Definition</a></p>
<ul>
<li><p><a class="reference internal" href="#area-entry-and-exit-points" id="id47">Area Entry and Exit Points</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#schedule-organization" id="id48">Schedule Organization</a></p>
<ul>
<li><p><a class="reference internal" href="#leg-cluster-definitions" id="id49">Leg &amp; Cluster Definitions</a></p>
<ul>
<li><p><a class="reference internal" href="#leg-cluster-fields" id="id50">Leg &amp; Cluster Fields</a></p></li>
<li><p><a class="reference internal" href="#processing-priority" id="id51">Processing Priority</a></p></li>
<li><p><a class="reference internal" href="#routing-anchor-behavior-first-activity-last-activity" id="id52">Routing Anchor Behavior (first_activity &amp; last_activity)</a></p></li>
<li><p><a class="reference internal" href="#activity-types" id="id53">Activity Types</a></p></li>
<li><p><a class="reference internal" href="#optimization-strategy-and-un-ordered" id="id54">Optimization <strong>Strategy</strong> and (Un-)Ordered</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#validation-notes" id="id55">Validation Notes</a></p>
<ul>
<li><p><a class="reference internal" href="#multiple-definitions" id="id56">Multiple Definitions</a></p></li>
<li><p><a class="reference internal" href="#validation-behavior" id="id57">Validation Behavior</a></p></li>
<li><p><a class="reference internal" href="#cross-references" id="id58">Cross-References</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id32" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>CruisePlan uses YAML configuration files to define oceanographic cruises. The configuration consists of three main parts:</p>
<ol class="arabic simple">
<li><p><strong>:ref:`Cruise-wide metadata and settings &lt;cruise-wide-metadata&gt;`</strong>: Cruise-level fields defining defaults and settings</p></li>
<li><p><strong>Global Catalog</strong>: Definitions of activities: points, lines and areas (reusable components)</p></li>
<li><p><strong>Schedule Organization</strong>: Legs and clusters that organize catalog items into execution order (see <a class="reference internal" href="#simplified-leg-creation"><span class="std std-ref">Simplified Leg Creation</span></a> for default leg behavior)</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Comments in yamls:</strong> While CruisePlan supports some comments (at the top of the file), it is recommended to avoid comments within YAML files as they may not be preserved during processing.  Instead, use the <cite>comment</cite> fields for documentation purposes.</p>
</div>
<section id="configuration-structure">
<span id="id1"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink">Configuration Structure</a><a class="headerlink" href="#configuration-structure" title="Link to this heading"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cruise-wide Metadata and Settings</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Example</span><span class="nv"> </span><span class="s">Cruise</span><span class="nv"> </span><span class="s">2025&quot;</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Oceanographic</span><span class="nv"> </span><span class="s">survey</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">North</span><span class="nv"> </span><span class="s">Atlantic&quot;</span>

<span class="c1"># Global Catalog (Reusable Definitions)</span>
<span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">        </span><span class="c1"># Point definitions for station operations</span>
<span class="nt">lines</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">         </span><span class="c1"># Line operation definitions for transects and sections</span>
<span class="nt">areas</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">         </span><span class="c1"># Area operation definitions for survey regions</span>

<span class="c1"># Schedule Organization</span>
<span class="nt">legs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">          </span><span class="c1"># Execution phases with clusters/activities/sequences</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>YAML Duplicate Key Limitation</strong>: You cannot have multiple yaml sections with the same name (e.g., multiple <code class="docutils literal notranslate"><span class="pre">clusters:</span></code> keys) in a single YAML file as they will overwrite each other. Instead, define multiple clusters as individual items within a single <code class="docutils literal notranslate"><span class="pre">clusters:</span></code> list.</p>
</div>
</section>
<section id="formats-and-data-conventions">
<span id="coordinate-conventions"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink">Formats and data conventions</a><a class="headerlink" href="#formats-and-data-conventions" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Depth Convention</strong>: Positive values represent depth below sea surface (meters)</p></li>
<li><p><strong>Bathymetry Precision</strong>: Depths from bathymetry will be rounded to <strong>nearest whole meter</strong> (though 1 decimal place is acceptable)</p></li>
<li><p><strong>Manual Depths</strong>: Can be specified to any precision but will be validated as ≥ 0</p></li>
<li><p><strong>Decimal Degrees</strong>: All coordinates are stored internally as decimal degrees with <strong>5 decimal places precision</strong> (approximately 1.1 meter resolution).</p></li>
<li><p><strong>Longitude Range Consistency</strong>: The entire cruise configuration must use <strong>either</strong> [-180°, 180°] <strong>or</strong> [0°, 360°] consistently. Mixing ranges will trigger validation errors.</p></li>
</ul>
<p><strong>Input Formats Supported</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47.5678</span>
<span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-52.1234</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="units_and_defaults.html"><span class="doc">Units and Defaults</span></a> for detailed conventions on units and default values used throughout CruisePlan.</p>
</section>
<section id="simplified-leg-creation">
<span id="id2"></span><h3><a class="toc-backref" href="#id35" role="doc-backlink">Simplified Leg Creation</a><a class="headerlink" href="#simplified-leg-creation" title="Link to this heading"></a></h3>
<p>For simple single-leg cruises, you can omit the <code class="docutils literal notranslate"><span class="pre">legs</span></code> section entirely.  In this case, <strong>departure_port</strong> and <strong>arrival_port</strong> are required at a cruise level.  During the enrichment process, a default leg will be created and the ports will be moved to the leg section.</p>
<p><strong>Automatic Default Leg Creation</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple configuration - no legs required!</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Simple</span><span class="nv"> </span><span class="s">Survey</span><span class="nv"> </span><span class="s">2025&quot;</span>
<span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_reykjavik&quot;</span><span class="w">    </span><span class="c1"># Allowed when no explicit legs</span>
<span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_reykjavik&quot;</span><span class="w">      </span><span class="c1"># Allowed when no explicit legs</span>
<span class="nt">default_vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.0</span>

<span class="nt">points</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">64.0</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-22.0</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CTD&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;profile&quot;</span>

<span class="c1"># CruisePlan automatically creates:</span>
<span class="c1"># legs:</span>
<span class="c1">#   - name: &quot;Main_Leg&quot;</span>
<span class="c1">#     description: &quot;Main cruise leg&quot;</span>
<span class="c1">#     departure_port: &quot;port_reykjavik&quot;</span>
<span class="c1">#     arrival_port: &quot;port_reykjavik&quot;</span>
<span class="c1">#     activities: [&quot;STN_001&quot;]</span>
</pre></div>
</div>
<p><strong>Port Restrictions</strong>:</p>
<ul class="simple">
<li><p><strong>Cruise-level ports ALLOWED</strong>: When no <code class="docutils literal notranslate"><span class="pre">legs</span></code> section is defined (enables automatic default leg creation)</p></li>
<li><p><strong>Cruise-level ports FORBIDDEN</strong>: When explicit <code class="docutils literal notranslate"><span class="pre">legs</span></code> are defined (prevents configuration conflicts)</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ VALID: Ports allowed for automatic leg creation</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Auto</span><span class="nv"> </span><span class="s">Leg</span><span class="nv"> </span><span class="s">Example&quot;</span>
<span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_halifax&quot;</span><span class="w">      </span><span class="c1"># OK - no explicit legs</span>
<span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_st_johns&quot;</span><span class="w">       </span><span class="c1"># OK - no explicit legs</span>
<span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="c1"># ❌ INVALID: Ports forbidden with explicit legs</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Manual</span><span class="nv"> </span><span class="s">Leg</span><span class="nv"> </span><span class="s">Example&quot;</span>
<span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_halifax&quot;</span><span class="w">      </span><span class="c1"># ERROR - explicit legs defined</span>
<span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_st_johns&quot;</span><span class="w">       </span><span class="c1"># ERROR - explicit legs defined</span>
<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Custom_Leg&quot;</span>
<span class="w">    </span><span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_halifax&quot;</span><span class="w">  </span><span class="c1"># Use ports here instead</span>
<span class="w">    </span><span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port_st_johns&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="cruise-wide-metadata">
<span id="id3"></span><h2><a class="toc-backref" href="#id36" role="doc-backlink">Cruise-wide metadata</a><a class="headerlink" href="#cruise-wide-metadata" title="Link to this heading"></a></h2>
<span id="cruise-metadata"></span><table class="docutils align-default" id="id18">
<caption><span class="caption-text">Basic Cruise Information</span><a class="headerlink" href="#id18" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cruise_name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Name of the cruise</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Human-readable description of the cruise</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_date</span></code></p></td>
<td><p>str</p></td>
<td><p>“1970-01-01T00:00:00+00:00”</p></td>
<td><p>Cruise start date (ISO format “YYYY-MM-DD” or full ISO datetime “YYYY-MM-DDTHH:MM:SS”)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_time</span></code></p></td>
<td><p>Optional[str]</p></td>
<td><p>“08:00”</p></td>
<td><p>Cruise start time (HH:MM format). Only used if start_date is date-only format</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id19">
<caption><span class="caption-text">Vessel and Operations</span><a class="headerlink" href="#id19" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default_vessel_speed</span></code></p></td>
<td><p>float</p></td>
<td><p><em>required</em></p></td>
<td><p>Default vessel speed in knots (&gt;0, &lt;20; warns if &lt;1)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">default_distance_between_stations</span></code></p></td>
<td><p>float</p></td>
<td><p>20.0</p></td>
<td><p>Default station spacing in km (&gt;0, &lt;150; warns if &lt;4 or &gt;50)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">turnaround_time</span></code></p></td>
<td><p>float</p></td>
<td><p>10.0</p></td>
<td><p>Station turnaround time in minutes (≥0; warns if &gt;60)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ctd_descent_rate</span></code></p></td>
<td><p>float</p></td>
<td><p>1.0</p></td>
<td><p>CTD descent rate in m/s (0.5-2.0)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ctd_ascent_rate</span></code></p></td>
<td><p>float</p></td>
<td><p>1.0</p></td>
<td><p>CTD ascent rate in m/s (0.5-2.0)</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id20">
<caption><span class="caption-text">Operational choices</span><a class="headerlink" href="#id20" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">day_start_hour</span></code></p></td>
<td><p>int</p></td>
<td><p>8</p></td>
<td><p>Start hour for daytime operations (0-23)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">day_end_hour</span></code></p></td>
<td><p>int</p></td>
<td><p>20</p></td>
<td><p>End hour for daytime operations (0-23, must be &gt; day_start_hour)</p></td>
</tr>
</tbody>
</table>
<section id="ports-and-routing-waypoints">
<span id="ports-transfers"></span><h3><a class="toc-backref" href="#id37" role="doc-backlink">Ports and Routing Waypoints</a><a class="headerlink" href="#ports-and-routing-waypoints" title="Link to this heading"></a></h3>
<p><strong>Port Definition</strong>: Ports are defined within legs and reference either global port definitions (see <a class="reference internal" href="global_ports.html#global-ports-reference"><span class="std std-ref">Global Ports Reference</span></a>) or inline port specifications.</p>
<table class="docutils align-default" id="id21">
<caption><span class="caption-text">Port Fields</span><a class="headerlink" href="#id21" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Name of the port</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">latitude</span></code></p></td>
<td><p>float</p></td>
<td><p><em>required</em></p></td>
<td><p>Latitude in decimal degrees (see <a class="reference internal" href="#coordinate-conventions"><span class="std std-ref">Formats and data conventions</span></a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">longitude</span></code></p></td>
<td><p>float</p></td>
<td><p><em>required</em></p></td>
<td><p>Longitude in decimal degrees (see <a class="reference internal" href="#coordinate-conventions"><span class="std std-ref">Formats and data conventions</span></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timezone</span></code></p></td>
<td><p>str</p></td>
<td><p>“UTC”</p></td>
<td><p>Timezone identifier (e.g., “America/St_Johns”)</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: Port definitions within legs:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Atlantic_Survey&quot;</span>
<span class="w">    </span><span class="nt">departure_port</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;St.</span><span class="nv"> </span><span class="s">Johns&quot;</span>
<span class="w">      </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">47.5678</span>
<span class="w">      </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-52.1234</span>
<span class="w">      </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;America/St_Johns&quot;</span><span class="w">  </span><span class="c1"># Optional, defaults to UTC</span>
<span class="w">    </span><span class="nt">arrival_port</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Reykjavik&quot;</span>
<span class="w">      </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">64.1355</span>
<span class="w">      </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-21.8954</span>
<span class="w">      </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Atlantic/Reykjavik&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="global-catalog-definitions">
<span id="global-catalog"></span><h2><a class="toc-backref" href="#id38" role="doc-backlink">Global Catalog Definitions</a><a class="headerlink" href="#global-catalog-definitions" title="Link to this heading"></a></h2>
<p>The global catalog contains reusable definitions that can be referenced by legs and clusters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Configuration Architecture</strong></p>
<p>CruisePlan uses a unified architecture centered on the <cite>CruiseInstance</cite> class:</p>
<ol class="arabic simple">
<li><p><strong>YAML Configuration</strong>: Validated and parsed using Pydantic models (<cite>PointDefinition</cite>, <cite>LineDefinition</cite>, <cite>AreaDefinition</cite>)</p></li>
<li><p><strong>CruiseInstance</strong>: Single source of truth containing the complete cruise configuration</p></li>
<li><p><strong>Direct Processing</strong>: Timeline generation and output creation work directly with the configuration objects</p></li>
</ol>
<p>This streamlined approach eliminates the need for conversion layers and maintains consistency between configuration and execution.</p>
</div>
<section id="point-definition">
<span id="id4"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">Point Definition</a><a class="headerlink" href="#point-definition" title="Link to this heading"></a></h3>
<p>Point definitions specify point operations at fixed locations. They handle CTD casts, water sampling, mooring operations, and calibration activities with built-in duration calculations.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">points</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CTD&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;profile&quot;</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40</span>
<span class="w">    </span><span class="nt">operation_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500.0</span><span class="w">  </span><span class="c1"># CTD cast depth in meters</span>
<span class="w">    </span><span class="nt">water_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3000.0</span><span class="w">     </span><span class="c1"># Seafloor depth in meters (optional: will be enriched from bathymetry)</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120.0</span><span class="w">         </span><span class="c1"># Optional: manual override in minutes</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">water</span><span class="nv"> </span><span class="s">station&quot;</span>
</pre></div>
</div>
<section id="fields-operations-actions">
<span id="point-fields"></span><h4><a class="toc-backref" href="#id40" role="doc-backlink">Fields, Operations &amp; Actions</a><a class="headerlink" href="#fields-operations-actions" title="Link to this heading"></a></h4>
<p><strong>Depth Field Semantics:</strong></p>
<p>The distinction between <code class="docutils literal notranslate"><span class="pre">operation_depth</span></code> and <code class="docutils literal notranslate"><span class="pre">water_depth</span></code> meaningfully impacts duration calculations in the scheduler:</p>
<ul class="simple">
<li><p><strong>``operation_depth``</strong>: How deep the operation goes (e.g., CTD cast depth)</p>
<ul>
<li><p>Used for duration calculations (deeper operations take longer)</p></li>
<li><p>Can be less than, equal to, or greater than water_depth</p></li>
<li><p>Examples: 500m CTD cast in 3000m water</p></li>
</ul>
</li>
<li><p><strong>``water_depth``</strong>: Actual seafloor depth at the location</p>
<ul>
<li><p>Used for bathymetric validation and route planning</p></li>
<li><p>Automatically enriched from bathymetry data if missing</p></li>
<li><p>Should represent true seafloor depth for the coordinates</p></li>
</ul>
</li>
</ul>
<p><strong>Note:</strong> that the <cite>operation_depth</cite> only affects timing for the CTD profile calculation.  Mooring timing must be specified manually via the <cite>duration</cite> field.</p>
<section id="operation-types">
<span id="id5"></span><h5>Operation Types<a class="headerlink" href="#operation-types" title="Link to this heading"></a></h5>
<table class="docutils align-default" id="id22">
<caption><span class="caption-text">Valid Operation Types</span><a class="headerlink" href="#id22" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CTD</span></code></p></td>
<td><p>Conductivity-Temperature-Depth profiling</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">water_sampling</span></code></p></td>
<td><p>Water sample collection (bottles, etc.)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mooring</span></code></p></td>
<td><p>Mooring deployment or recovery operations</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">calibration</span></code></p></td>
<td><p>Equipment calibration or validation</p></td>
</tr>
</tbody>
</table>
</section>
<section id="action-types">
<span id="id6"></span><h5>Action Types<a class="headerlink" href="#action-types" title="Link to this heading"></a></h5>
<table class="docutils align-default" id="id23">
<caption><span class="caption-text">Valid Actions by Operation Type</span><a class="headerlink" href="#id23" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 25.0%" />
<col style="width: 55.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation Type</p></th>
<th class="head"><p>Valid Actions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CTD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">profile</span></code></p></td>
<td><p>Standard CTD cast operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">water_sampling</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sampling</span></code></p></td>
<td><p>Water sample collection</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mooring</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">deployment</span></code>, <code class="docutils literal notranslate"><span class="pre">recovery</span></code></p></td>
<td><p>Deploy new mooring or recover existing</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">calibration</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">calibration</span></code></p></td>
<td><p>Equipment calibration procedure</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="duration-calculation">
<span id="id7"></span><h4><a class="toc-backref" href="#id41" role="doc-backlink">Duration Calculation</a><a class="headerlink" href="#duration-calculation" title="Link to this heading"></a></h4>
<p>The duration calculation depends on operation type and manual overrides:</p>
<ol class="arabic simple">
<li><p><strong>Manual Duration</strong>: If <code class="docutils literal notranslate"><span class="pre">duration</span></code> field is specified, this value is used directly</p></li>
<li><p><strong>CTD Operations</strong>: Duration calculated based on depth, descent/ascent rates, and turnaround time</p></li>
<li><p><strong>Mooring Operations</strong>: Uses manual duration or falls back to default mooring duration (60 minutes)</p></li>
<li><p><strong>Port/Waypoint Operations</strong>: Returns 0.0 minutes (no operation time)</p></li>
<li><p><strong>Other Operations</strong>: Returns 0.0 minutes if no manual duration specified</p></li>
</ol>
<p><strong>CTD Duration Formula</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># CTD duration calculation</span>
<span class="n">descent_time</span> <span class="o">=</span> <span class="n">depth</span> <span class="o">/</span> <span class="n">ctd_descent_rate</span>  <span class="c1"># seconds</span>
<span class="n">ascent_time</span> <span class="o">=</span> <span class="n">depth</span> <span class="o">/</span> <span class="n">ctd_ascent_rate</span>    <span class="c1"># seconds</span>
<span class="n">total_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">descent_time</span> <span class="o">+</span> <span class="n">ascent_time</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">turnaround_time</span>  <span class="c1"># minutes</span>
</pre></div>
</div>
<section id="buffer-time-configuration">
<span id="enhanced-timing"></span><h5>Buffer Time Configuration<a class="headerlink" href="#buffer-time-configuration" title="Link to this heading"></a></h5>
<p>The buffer time system provides multiple levels of buffer time control for realistic operational scenarios:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">points</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mooring_Deploy&quot;</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mooring&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deployment&quot;</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53.0</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">240.0</span><span class="w">         </span><span class="c1"># 4 hours deployment time</span>
<span class="w">    </span><span class="nt">delay_start</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120.0</span><span class="w">      </span><span class="c1"># Wait 2h for daylight</span>
<span class="w">    </span><span class="nt">delay_end</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span><span class="w">         </span><span class="c1"># Wait 1h for anchor settling</span>

<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep_Water_Survey&quot;</span>
<span class="w">    </span><span class="nt">buffer_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">480.0</span><span class="w">      </span><span class="c1"># 8h weather contingency for entire leg</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Mooring_Deploy&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Buffer Time Types</strong>:</p>
<ul class="simple">
<li><p><strong>delay_start</strong>: Time to wait before operation begins (e.g., daylight requirements, weather windows)</p></li>
<li><p><strong>delay_end</strong>: Time to wait after operation ends (e.g., equipment settling, safety checks)</p></li>
<li><p><strong>buffer_time</strong>: Leg-level contingency time applied at leg completion (e.g., weather delays)</p></li>
</ul>
</section>
</section>
</section>
<section id="line-definition">
<span id="id8"></span><h3><a class="toc-backref" href="#id42" role="doc-backlink">Line Definition</a><a class="headerlink" href="#line-definition" title="Link to this heading"></a></h3>
<p>Line definitions specify movement routes with waypoints, handling distance and timing calculations directly. When <cite>operation_type</cite> and <cite>action</cite> are specified, they become scientific line operations (ADCP, bathymetry, etc.). Without these fields, lines remain user-defined operations with timing calculated purely from route distance and vessel speed.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">lines</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADCP_Line_A&quot;</span>
<span class="w">    </span><span class="nt">route</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">52.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;underway&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADCP&quot;</span>
<span class="w">    </span><span class="nt">vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.0</span><span class="w">           </span><span class="c1"># Optional: override default speed</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">water</span><span class="nv"> </span><span class="s">ADCP</span><span class="nv"> </span><span class="s">transect&quot;</span>
</pre></div>
</div>
<section id="transit-fields">
<span id="id9"></span><h4><a class="toc-backref" href="#id43" role="doc-backlink">Fields, Operations &amp; Actions</a><a class="headerlink" href="#transit-fields" title="Link to this heading"></a></h4>
<table class="docutils align-default" id="id24">
<caption><span class="caption-text">Transect Definition Fields</span><a class="headerlink" href="#id24" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Unique identifier for the transect</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">route</span></code></p></td>
<td><p>List[GeoPoint]</p></td>
<td><p><em>required</em></p></td>
<td><p>Waypoints defining the transect route</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">operation_type</span></code></p></td>
<td><p>Optional[LineOperationTypeEnum]</p></td>
<td><p>None</p></td>
<td><p>Type of line operation (<code class="docutils literal notranslate"><span class="pre">underway</span></code>, <code class="docutils literal notranslate"><span class="pre">towing</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td><p>Optional[ActionEnum]</p></td>
<td><p>None</p></td>
<td><p>Specific scientific action (required if operation_type set)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vessel_speed</span></code></p></td>
<td><p>Optional[float]</p></td>
<td><p>None</p></td>
<td><p>Speed override for this transect in knots</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Optional[str]</p></td>
<td><p>None</p></td>
<td><p>Human-readable description</p></td>
</tr>
</tbody>
</table>
<section id="line-operation-types">
<span id="id10"></span><h5>Line Operation Types<a class="headerlink" href="#line-operation-types" title="Link to this heading"></a></h5>
<table class="docutils align-default" id="id25">
<caption><span class="caption-text">Valid Line Operations</span><a class="headerlink" href="#id25" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 25.0%" />
<col style="width: 55.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation Type</p></th>
<th class="head"><p>Valid Actions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">underway</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ADCP</span></code>, <code class="docutils literal notranslate"><span class="pre">bathymetry</span></code>, <code class="docutils literal notranslate"><span class="pre">thermosalinograph</span></code></p></td>
<td><p>Underway data collection</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">towing</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tow_yo</span></code>, <code class="docutils literal notranslate"><span class="pre">seismic</span></code>, <code class="docutils literal notranslate"><span class="pre">microstructure</span></code></p></td>
<td><p>Towed instrument operations</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="ctd-section-special-case">
<span id="section-definition"></span><span id="ctd-sections"></span><h4><a class="toc-backref" href="#id44" role="doc-backlink">CTD Section Special Case</a><a class="headerlink" href="#ctd-section-special-case" title="Link to this heading"></a></h4>
<p>CTD sections are a special type of transect (line operation) that can be expanded into individual stations (point operations):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">lines</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;53N_Section&quot;</span>
<span class="w">    </span><span class="nt">distance_between_stations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span><span class="w">  </span><span class="c1"># km</span>
<span class="w">    </span><span class="nt">reversible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w">  </span><span class="c1"># Populated during expansion</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CTD&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;section&quot;</span>
<span class="w">    </span><span class="nt">route</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-30.0</span>
</pre></div>
</div>
<table class="docutils align-default" id="id26">
<caption><span class="caption-text">Section Definition Fields</span><a class="headerlink" href="#id26" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Unique identifier for the section</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation_type</span></code></p></td>
<td><p>OperationTypeEnum</p></td>
<td><p><em>required</em></p></td>
<td><p>Must be <code class="docutils literal notranslate"><span class="pre">CTD</span></code> for sections</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td><p>ActionEnum</p></td>
<td><p><em>required</em></p></td>
<td><p>Must be <code class="docutils literal notranslate"><span class="pre">section</span></code> for sections</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">route</span></code></p></td>
<td><p>List[GeoPoint]</p></td>
<td><p><em>required</em></p></td>
<td><p>Waypoints defining the section route</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">distance_between_stations</span></code></p></td>
<td><p>Optional[float]</p></td>
<td><p>None</p></td>
<td><p>Spacing between stations in km</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reversible</span></code></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Whether section can be traversed in reverse (<strong>not yet implemented</strong>)</p></td>
</tr>
</tbody>
</table>
<p><strong>Expansion Behavior</strong>:</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">enrich</span> <span class="pre">--expand-sections</span></code> to convert CTD sections into individual station sequences</p></li>
<li><p>Each station gets coordinates interpolated along the route</p></li>
<li><p>Depths are calculated from bathymetry data</p></li>
<li><p>Station spacing uses <code class="docutils literal notranslate"><span class="pre">default_distance_between_stations</span></code> or section-specific spacing</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Validation Warning</strong>: The validate command will warn about unexpanded CTD sections and recommend using the enrich command with <code class="docutils literal notranslate"><span class="pre">--expand-sections</span></code>.</p>
</div>
</section>
<section id="id11">
<h4><a class="toc-backref" href="#id45" role="doc-backlink">Duration Calculation</a><a class="headerlink" href="#id11" title="Link to this heading"></a></h4>
<p>Transit operations (scientific transits and vessel movements) calculate duration based on route distance and vessel speed using the <cite>LineOperation.calculate_duration()</cite> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Transit duration calculation (in LineOperation.calculate_duration())</span>
<span class="n">total_route_distance_km</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
   <span class="n">haversine_distance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="k">for</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>
<span class="n">route_distance_nm</span> <span class="o">=</span> <span class="n">total_route_distance_km</span> <span class="o">*</span> <span class="mf">0.539957</span>  <span class="c1"># km -&gt; nautical miles</span>
<span class="n">vessel_speed</span> <span class="o">=</span> <span class="n">transect</span><span class="o">.</span><span class="n">vessel_speed</span> <span class="ow">or</span> <span class="n">config</span><span class="o">.</span><span class="n">default_vessel_speed</span>  <span class="c1"># knots</span>
<span class="n">duration_hours</span> <span class="o">=</span> <span class="n">route_distance_nm</span> <span class="o">/</span> <span class="n">vessel_speed</span>
<span class="n">duration_minutes</span> <span class="o">=</span> <span class="n">duration_hours</span> <span class="o">*</span> <span class="mi">60</span>
</pre></div>
</div>
<p><strong>Key Points:</strong></p>
<ul class="simple">
<li><p><strong>Route Distance</strong>: Sum of haversine distances between all consecutive waypoints in the route</p></li>
<li><p><strong>Vessel Speed</strong>: Uses transect-specific <cite>vessel_speed</cite> if specified, otherwise falls back to cruise-level <cite>default_vessel_speed</cite></p></li>
<li><p><strong>Operation Classification</strong>: Transects with <cite>operation_type</cite> and <cite>action</cite> become scientific operations (ADCP surveys, bathymetry mapping, etc.), while those without these fields remain simple route definitions</p></li>
<li><p><strong>Duration Calculation</strong>: All transects calculate duration using the same route distance and vessel speed formula, regardless of whether they have scientific operation types</p></li>
</ul>
<p><strong>CTD Section Expansion</strong>: When CTD sections are expanded using <cite>cruiseplan enrich –expand-sections</cite>, the resulting stations are treated as regular CTD stations with standard CTD duration calculations based on depth, descent/ascent rates, and turnaround time.</p>
<p><strong>Note</strong>: The scheduler also automatically generates NavigationalTransit objects (not visible in YAML) to handle vessel movement between non-adjacent operations (&gt; 0.1 nautical miles apart).</p>
</section>
</section>
<section id="area-definition">
<span id="id12"></span><h3><a class="toc-backref" href="#id46" role="doc-backlink">Area Definition</a><a class="headerlink" href="#area-definition" title="Link to this heading"></a></h3>
<p>Areas represent operations covering defined geographic regions. Areas can also serve as routing anchors in legs using <code class="docutils literal notranslate"><span class="pre">first_activity</span></code> and <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> fields, where the area entry point is used for <code class="docutils literal notranslate"><span class="pre">first_activity</span></code> routing and the exit point for <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> routing.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">areas</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Grid_A&quot;</span>
<span class="w">    </span><span class="nt">corners</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;survey&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bathymetry&quot;</span><span class="w">       </span><span class="c1"># Optional</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">480.0</span><span class="w">           </span><span class="c1"># 8 hours</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Multibeam</span><span class="nv"> </span><span class="s">survey</span><span class="nv"> </span><span class="s">grid&quot;</span>
</pre></div>
</div>
<table class="docutils align-default" id="id27">
<caption><span class="caption-text">Area Definition Fields</span><a class="headerlink" href="#id27" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Unique identifier for the area</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">corners</span></code></p></td>
<td><p>List[GeoPoint]</p></td>
<td><p><em>required</em></p></td>
<td><p>Corner points defining the area boundary (minimum 3 points for valid polygon)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">operation_type</span></code></p></td>
<td><p>Optional[AreaOperationTypeEnum]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">survey</span></code></p></td>
<td><p>Type of area operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td><p>Optional[ActionEnum]</p></td>
<td><p>None</p></td>
<td><p>Specific action for the area</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">duration</span></code></p></td>
<td><p>Optional[float]</p></td>
<td><p>None</p></td>
<td><p>Duration in minutes (≥0, typically specified by user)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Optional[str]</p></td>
<td><p>None</p></td>
<td><p>Human-readable description</p></td>
</tr>
</tbody>
</table>
<section id="area-entry-and-exit-points">
<span id="area-routing-anchors"></span><h4><a class="toc-backref" href="#id47" role="doc-backlink">Area Entry and Exit Points</a><a class="headerlink" href="#area-entry-and-exit-points" title="Link to this heading"></a></h4>
<p>When areas are used as routing anchors (<code class="docutils literal notranslate"><span class="pre">first_activity</span></code> or <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> in legs), CruisePlan uses entry and exit points for navigation:</p>
<ul class="simple">
<li><p><strong>Entry Point</strong>: First corner coordinate (used for <code class="docutils literal notranslate"><span class="pre">first_activity</span></code> routing)</p></li>
<li><p><strong>Exit Point</strong>: Last corner coordinate (used for <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> routing)</p></li>
<li><p><strong>Routing Distance</strong>: Calculated from ship position to/from the appropriate entry or exit point</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Area entry/exit point determination</span>
<span class="n">entry_point</span> <span class="o">=</span> <span class="n">corners</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># First corner as entry point</span>
<span class="n">exit_point</span> <span class="o">=</span> <span class="n">corners</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># Last corner as exit point</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example: Using areas as routing waypoints</span>
<span class="nt">areas</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Grid_Alpha&quot;</span>
<span class="w">    </span><span class="nt">corners</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">51.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;survey&quot;</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bathymetry&quot;</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">480.0</span>

<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Operations&quot;</span>
<span class="w">    </span><span class="nt">first_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="w">        </span><span class="c1"># Start at station</span>
<span class="w">    </span><span class="nt">last_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Grid_Alpha&quot;</span><span class="w">  </span><span class="c1"># End at area exit point (50.0, -39.0)</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Survey_Grid_Alpha&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Routing Benefits</strong>:</p>
<ul class="simple">
<li><p><strong>Simplified navigation</strong>: No need to manually calculate area center points</p></li>
<li><p><strong>Flexible area operations</strong>: Areas work seamlessly with other operation types in leg planning</p></li>
<li><p><strong>Automatic distance calculations</strong>: Transit times computed using standard distance formulas to/from center point</p></li>
</ul>
</section>
</section>
</section>
<section id="schedule-organization">
<span id="id13"></span><h2><a class="toc-backref" href="#id48" role="doc-backlink">Schedule Organization</a><a class="headerlink" href="#schedule-organization" title="Link to this heading"></a></h2>
<p>The schedule organization defines how catalog items are executed through legs and clusters using a unified <strong>activities-based architecture</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Scheduling Architecture</strong></p>
<p>CruisePlan uses a streamlined architecture for legs and clusters:</p>
<ol class="arabic simple">
<li><p><strong>Configuration</strong>: Pydantic validation models (<cite>LegDefinition</cite>, <cite>ClusterDefinition</cite>) validate and parse YAML configuration</p></li>
<li><p><strong>Execution</strong>: The scheduler works directly with configuration objects, applying parameter inheritance and strategy-specific logic</p></li>
</ol>
<p>This unified approach allows flexible YAML configuration while enabling runtime parameter inheritance and complex scheduling strategies without additional conversion layers.</p>
</div>
<section id="leg-cluster-definitions">
<span id="leg-definition"></span><h3><a class="toc-backref" href="#id49" role="doc-backlink">Leg &amp; Cluster Definitions</a><a class="headerlink" href="#leg-cluster-definitions" title="Link to this heading"></a></h3>
<p>We have two organisational structures within a cruise.  The “Leg” is the highest level structure, representing a phase of the cruise with distinct operational or geographic characteristics.  Each leg contains a list of <strong>activities</strong> (references to items in the global catalog) that can be executed either in order or as an unordered set.  It can be useful, for instance, if a cruise is separated by two port calls.</p>
<p>A cluster is a sub-division within a leg that groups related operations with specific scheduling strategies.  Like legs, clusters use an <strong>activities list</strong> to reference catalog items.  Clusters are useful for grouping operations that share common characteristics or sub-regions of the cruise area.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Western_Survey&quot;</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">water</span><span class="nv"> </span><span class="s">activities</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">western</span><span class="nv"> </span><span class="s">region&quot;</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sequential&quot;</span>
<span class="w">    </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;MOOR_A&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep_Water_Cluster&quot;</span>
<span class="w">        </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;spatial_interleaved&quot;</span>
<span class="w">        </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">        </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_004&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;ADCP_Line_A&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep_Water_Cluster&quot;</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;spatial_interleaved&quot;</span>
<span class="w">    </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">  </span><span class="c1"># Unordered set - optimizer chooses order</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_004&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_005&quot;</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mooring_Sequence&quot;</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sequential&quot;</span>
<span class="w">    </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># Ordered sequence - maintain exact order</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;MOOR_Deploy&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Trilateration_Survey&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;MOOR_Release&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Duplicate Activity Support</strong></p>
<p>Clusters support intentional duplication of activities for repeated operations:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Calibration_Sequence&quot;</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;CALIB_STN&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Repeat STN_001 for validation</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep_Sampling&quot;</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_DEEP&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_DEEP&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_DEEP&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Triple sampling for statistics</span>
</pre></div>
</div>
<p>⚠️ <strong>Duplicate Activity Warning</strong>: When duplicate activities are detected, CruisePlan issues a warning but proceeds with execution:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>⚠️ Duplicate activity names in cluster: STN_001. These activities will be executed multiple times as specified.
</pre></div>
</div>
<p><strong>Waypoint vs Activity Execution</strong></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>Navigation waypoints do NOT execute operations</strong>. Waypoints (<code class="docutils literal notranslate"><span class="pre">first_activity</span></code>, <code class="docutils literal notranslate"><span class="pre">last_activity</span></code>) are used only for routing calculations. To execute an operation at a waypoint location, you must explicitly include it in the <code class="docutils literal notranslate"><span class="pre">activities</span></code> list.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Leg&quot;</span>
<span class="w">    </span><span class="nt">first_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="w">    </span><span class="c1"># Navigation only - NO execution</span>
<span class="w">    </span><span class="nt">last_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_005&quot;</span><span class="w">     </span><span class="c1"># Navigation only - NO execution</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_004&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Only these execute</span>

<span class="c1"># To execute operations at waypoint locations:</span>
<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Leg_With_Execution&quot;</span>
<span class="w">    </span><span class="nt">first_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="w">    </span><span class="c1"># Navigation waypoint</span>
<span class="w">    </span><span class="nt">last_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_005&quot;</span><span class="w">     </span><span class="c1"># Navigation waypoint</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;STN_001&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_004&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_005&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Explicit execution</span>
</pre></div>
</div>
<section id="leg-cluster-fields">
<span id="leg-fields"></span><h4><a class="toc-backref" href="#id50" role="doc-backlink">Leg &amp; Cluster Fields</a><a class="headerlink" href="#leg-cluster-fields" title="Link to this heading"></a></h4>
<table class="docutils align-default" id="id28">
<caption><span class="caption-text">Leg Definition Fields</span><a class="headerlink" href="#id28" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 14.7%" />
<col style="width: 14.7%" />
<col style="width: 11.8%" />
<col style="width: 14.7%" />
<col style="width: 44.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Leg/Cluster</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Both</p></td>
<td><p>Unique identifier for the leg or cluster</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Both</p></td>
<td><p>Human-readable description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">departure_port</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Leg only</p></td>
<td><p>Starting port for the leg</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">arrival_port</span></code></p></td>
<td><p>str</p></td>
<td><p><em>required</em></p></td>
<td><p>Leg only</p></td>
<td><p>Ending port for the leg</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">first_activity</span></code></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>First navigation waypoint (routing only)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">last_activity</span></code></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>Last navigation waypoint (routing only)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strategy</span></code></p></td>
<td><p>StrategyEnum</p></td>
<td><p>None (Leg), SEQUENTIAL (Cluster)</p></td>
<td><p>Both</p></td>
<td><p>Default scheduling strategy for the leg or cluster</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ordered</span></code></p></td>
<td><p>bool</p></td>
<td><p>None (Leg), True (Cluster)</p></td>
<td><p>Both</p></td>
<td><p>Whether activities list should maintain order</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">activities</span></code></p></td>
<td><p>List[str]</p></td>
<td><p>[]</p></td>
<td><p>Both</p></td>
<td><p>List of activity names from the global catalog</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">buffer_time</span></code></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>Contingency time for entire leg in minutes (≥0)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vessel_speed</span></code></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>Leg-specific vessel speed override (knots, &gt;0)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">distance_between_stations</span></code></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>Leg-specific station spacing override (km, &gt;0)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">turnaround_time</span></code></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Leg only</p></td>
<td><p>Leg-specific turnaround time override (minutes, ≥0)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">clusters</span></code></p></td>
<td><p>List[ClusterDefinition]</p></td>
<td><p>[]</p></td>
<td><p>Leg only</p></td>
<td><p>List of operation clusters</p></td>
</tr>
</tbody>
</table>
</section>
<section id="processing-priority">
<span id="id14"></span><h4><a class="toc-backref" href="#id51" role="doc-backlink">Processing Priority</a><a class="headerlink" href="#processing-priority" title="Link to this heading"></a></h4>
<p>The scheduler processes leg components in this simplified order:</p>
<ol class="arabic simple">
<li><p><strong>activities</strong>: If defined and non-empty, process these activities (respecting <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag)</p></li>
<li><p><strong>clusters</strong>: Process all clusters according to their strategies and ordering</p></li>
</ol>
<p><strong>Note</strong>: Legs must specify either <code class="docutils literal notranslate"><span class="pre">activities</span></code> or <code class="docutils literal notranslate"><span class="pre">clusters</span></code> (or both). Empty legs are not permitted.</p>
</section>
<section id="routing-anchor-behavior-first-activity-last-activity">
<span id="routing-anchor-behavior"></span><h4><a class="toc-backref" href="#id52" role="doc-backlink">Routing Anchor Behavior (first_activity &amp; last_activity)</a><a class="headerlink" href="#routing-anchor-behavior-first-activity-last-activity" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">first_activity</span></code> and <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> fields serve as <strong>routing anchors only</strong>. These fields can reference any catalog item (points, areas, or line endpoints) but are used exclusively for geographic positioning and route calculations.</p>
<p><strong>Navigation Only - No Execution</strong>:</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">first_activity</span></code> and <code class="docutils literal notranslate"><span class="pre">last_activity</span></code> do <strong>not execute operations</strong>. They provide entry and exit points for routing calculations within the leg. To execute an operation at a waypoint location, you must explicitly include it in the <code class="docutils literal notranslate"><span class="pre">activities</span></code> list.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">points</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ENTRY_CTD&quot;</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CTD</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">44.5</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-63.5</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXIT_POINT&quot;</span>
<span class="w">    </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mooring</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">44.7</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-63.3</span>

<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Leg&quot;</span>
<span class="w">    </span><span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;halifax&quot;</span>
<span class="w">    </span><span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sydney&quot;</span>
<span class="w">    </span><span class="nt">first_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ENTRY_CTD&quot;</span><span class="w">      </span><span class="c1"># Navigation only - provides entry coordinates</span>
<span class="w">    </span><span class="nt">last_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXIT_POINT&quot;</span><span class="w">      </span><span class="c1"># Navigation only - provides exit coordinates</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;ENTRY_CTD&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;EXIT_POINT&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Explicit execution</span>
</pre></div>
</div>
<p><strong>To Execute Operations at Waypoints</strong>:</p>
<p>To actually perform operations at waypoint locations, explicitly include them in the <code class="docutils literal notranslate"><span class="pre">activities</span></code> list:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Survey_Leg&quot;</span>
<span class="w">    </span><span class="nt">departure_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;halifax&quot;</span>
<span class="w">    </span><span class="nt">arrival_port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sydney&quot;</span>
<span class="w">    </span><span class="nt">first_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ENTRY_CTD&quot;</span><span class="w">      </span><span class="c1"># Navigation waypoint</span>
<span class="w">    </span><span class="nt">last_activity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXIT_POINT&quot;</span><span class="w">      </span><span class="c1"># Navigation waypoint</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
<span class="w">      </span><span class="s">&quot;ENTRY_CTD&quot;</span><span class="p p-Indicator">,</span><span class="w">    </span><span class="c1"># Actually executes CTD operation</span>
<span class="w">      </span><span class="s">&quot;STN_002&quot;</span><span class="p p-Indicator">,</span>
<span class="w">      </span><span class="s">&quot;STN_003&quot;</span><span class="p p-Indicator">,</span>
<span class="w">      </span><span class="s">&quot;EXIT_POINT&quot;</span><span class="w">    </span><span class="c1"># Actually executes mooring deployment</span>
<span class="w">    </span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Benefits of Explicit Activity Control</strong>:</p>
<ul class="simple">
<li><p><strong>Clear separation</strong>: Navigation routing vs operational execution are explicitly controlled</p></li>
<li><p><strong>Flexible workflows</strong>: Waypoints can serve purely navigational roles or be explicitly executed</p></li>
<li><p><strong>Predictable behavior</strong>: Operations only occur when explicitly listed in activities</p></li>
</ul>
</section>
<section id="activity-types">
<span id="id15"></span><h4><a class="toc-backref" href="#id53" role="doc-backlink">Activity Types</a><a class="headerlink" href="#activity-types" title="Link to this heading"></a></h4>
<p>Activities in <code class="docutils literal notranslate"><span class="pre">legs</span></code> and <code class="docutils literal notranslate"><span class="pre">clusters</span></code> reference items from the global catalog by name. Any catalog item can be referenced as an activity:</p>
<table class="docutils align-default" id="id29">
<caption><span class="caption-text">Supported Activity Types</span><a class="headerlink" href="#id29" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Activity Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Station Operations</strong></p></td>
<td><p>CTD casts, water sampling, instrument deployments (<code class="docutils literal notranslate"><span class="pre">points</span></code> catalog with various <code class="docutils literal notranslate"><span class="pre">operation_type</span></code> including <code class="docutils literal notranslate"><span class="pre">CTD</span></code>, <code class="docutils literal notranslate"><span class="pre">water_sampling</span></code>, <code class="docutils literal notranslate"><span class="pre">calibration</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Mooring Operations</strong></p></td>
<td><p>Mooring deployments, releases, surveys (<code class="docutils literal notranslate"><span class="pre">points</span></code> catalog with <code class="docutils literal notranslate"><span class="pre">operation_type:</span> <span class="pre">mooring</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Area Surveys</strong></p></td>
<td><p>Gridded sampling, multibeam mapping (<code class="docutils literal notranslate"><span class="pre">areas</span></code> catalog)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Line Transects</strong></p></td>
<td><p>ADCP transects, towed instrument lines (<code class="docutils literal notranslate"><span class="pre">lines</span></code> catalog with <code class="docutils literal notranslate"><span class="pre">operation_type</span></code>)</p></td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mixed activity types in a single leg</span>
<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Multi_Operation_Leg&quot;</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
<span class="w">      </span><span class="s">&quot;CTD_Station_001&quot;</span><span class="p p-Indicator">,</span><span class="w">      </span><span class="c1"># Station operation</span>
<span class="w">      </span><span class="s">&quot;MOOR_A_Deploy&quot;</span><span class="p p-Indicator">,</span><span class="w">        </span><span class="c1"># Mooring deployment</span>
<span class="w">      </span><span class="s">&quot;Multibeam_Area_1&quot;</span><span class="p p-Indicator">,</span><span class="w">     </span><span class="c1"># Area survey</span>
<span class="w">      </span><span class="s">&quot;ADCP_Transect_Line_A&quot;</span><span class="w">  </span><span class="c1"># Line operation</span>
<span class="w">    </span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="optimization-strategy-and-un-ordered">
<span id="strategy-types"></span><h4><a class="toc-backref" href="#id54" role="doc-backlink">Optimization <strong>Strategy</strong> and (Un-)Ordered</a><a class="headerlink" href="#optimization-strategy-and-un-ordered" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag specifies whether a list of activities should be treated as an exact sequence (<code class="docutils literal notranslate"><span class="pre">ordered:</span> <span class="pre">true</span></code>) or an unordered set (<code class="docutils literal notranslate"><span class="pre">ordered:</span> <span class="pre">false</span></code>).  Generally, if the flag is set to True, the scheduler will respect the specified order, whereas if set to False, the scheduler may optimize the execution order based on the selected <code class="docutils literal notranslate"><span class="pre">strategy</span></code>.</p>
<table class="docutils align-default" id="id30">
<caption><span class="caption-text">Available Scheduling Strategies</span><a class="headerlink" href="#id30" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Strategy</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sequential</span></code></p></td>
<td><p>Execute activities in defined order (respects <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">spatial_interleaved</span></code></p></td>
<td><p>Optimize order based on spatial proximity (ignores <code class="docutils literal notranslate"><span class="pre">ordered</span></code> flag)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">day_night_split</span></code></p></td>
<td><p>Separate day and night operations based on activity characteristics</p></td>
</tr>
</tbody>
</table>
<p id="ordering-behavior">The interaction between <code class="docutils literal notranslate"><span class="pre">strategy</span></code> and <code class="docutils literal notranslate"><span class="pre">ordered</span></code> determines execution order:</p>
<table class="docutils align-default" id="id31">
<caption><span class="caption-text">Strategy vs Ordering Behavior</span><a class="headerlink" href="#id31" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Strategy</p></th>
<th class="head"><p>Ordered</p></th>
<th class="head"><p>Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sequential</span></code></p></td>
<td><p>True</p></td>
<td><p>Execute activities in exact list order</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sequential</span></code></p></td>
<td><p>False</p></td>
<td><p>Execute activities sequentially but allow strategy to reorder</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spatial_interleaved</span></code></p></td>
<td><p>True/False</p></td>
<td><p>Always optimize based on spatial proximity (ignores ordered flag)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">day_night_split</span></code></p></td>
<td><p>True</p></td>
<td><p>Maintain order within day/night groups</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">day_night_split</span></code></p></td>
<td><p>False</p></td>
<td><p>Allow reordering within day/night groups</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="validation-notes">
<span id="yaml-structure-notes"></span><h2><a class="toc-backref" href="#id55" role="doc-backlink">Validation Notes</a><a class="headerlink" href="#validation-notes" title="Link to this heading"></a></h2>
<section id="multiple-definitions">
<h3><a class="toc-backref" href="#id56" role="doc-backlink">Multiple Definitions</a><a class="headerlink" href="#multiple-definitions" title="Link to this heading"></a></h3>
<p><strong>Correct</strong>: Single list with multiple items</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Cluster_A&quot;</span>
<span class="w">    </span><span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Cluster_B&quot;</span>
<span class="w">    </span><span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Incorrect</strong>: Multiple sections (overwrites)</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Cluster_A&quot;</span>
<span class="w">    </span><span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="nt">clusters</span><span class="p">:</span><span class="w">  </span><span class="c1"># This overwrites the previous clusters section!</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Cluster_B&quot;</span>
<span class="w">    </span><span class="nt">points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="validation-behavior">
<span id="id16"></span><h3><a class="toc-backref" href="#id57" role="doc-backlink">Validation Behavior</a><a class="headerlink" href="#validation-behavior" title="Link to this heading"></a></h3>
<p>The validation system provides three levels of feedback:</p>
<dl class="simple">
<dt><strong>Errors</strong>: Configuration issues that prevent processing</dt><dd><ul class="simple">
<li><p>Missing required fields</p></li>
<li><p>Invalid enumeration values</p></li>
<li><p>Coordinate range consistency violations</p></li>
</ul>
</dd>
<dt><strong>Warnings</strong>: Potential issues that should be reviewed</dt><dd><ul class="simple">
<li><p>Unusual vessel speeds (&lt;1 kt or &gt;20 kt)</p></li>
<li><p>Large station spacing (&gt;50 km)</p></li>
<li><p>Unexpanded CTD sections</p></li>
<li><p>Placeholder duration values (0.0 or 9999.0)</p></li>
</ul>
</dd>
<dt><strong>Info</strong>: Helpful guidance</dt><dd><ul class="simple">
<li><p>Suggestions for using enrichment commands</p></li>
<li><p>Cross-references to relevant documentation</p></li>
</ul>
</dd>
</dl>
</section>
<section id="cross-references">
<span id="id17"></span><h3><a class="toc-backref" href="#id58" role="doc-backlink">Cross-References</a><a class="headerlink" href="#cross-references" title="Link to this heading"></a></h3>
<p>For workflow information, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="workflow/path1.html#user-workflow-path-1"><span class="std std-ref">Basic Planning Workflow</span></a> in <a class="reference internal" href="user_workflows.html"><span class="doc">Overview</span></a></p></li>
<li><p><a class="reference internal" href="workflow/path2.html#user-workflow-path-2"><span class="std std-ref">PANGAEA-Enhanced Workflow</span></a> in <a class="reference internal" href="user_workflows.html"><span class="doc">Overview</span></a></p></li>
<li><p><a class="reference internal" href="workflow/path3.html#user-workflow-path-3"><span class="std std-ref">Configuration-Only Workflow</span></a> in <a class="reference internal" href="user_workflows.html"><span class="doc">Overview</span></a></p></li>
</ul>
<p>For command-line usage, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cli_reference.html"><span class="doc">CLI Command Reference</span></a> for complete command documentation</p></li>
<li><p><a class="reference internal" href="cli/enrich.html#subcommand-enrich"><span class="std std-ref">Enrich subcommand</span></a> in <a class="reference internal" href="cli/enrich.html"><span class="doc">enrich</span></a></p></li>
<li><p><a class="reference internal" href="cli/validate.html#subcommand-validate"><span class="std std-ref">Validate subcommand</span></a> in <a class="reference internal" href="cli/validate.html"><span class="doc">validate</span></a></p></li>
</ul>
<p>For development and API details, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="api/cruiseplan.core.html"><span class="doc">Core Classes</span></a> for validation models</p></li>
<li><p><a class="reference internal" href="api/cruiseplan.calculators.html"><span class="doc">Calculators &amp; Scheduling</span></a> for duration and distance calculations</p></li>
<li><p><a class="reference internal" href="api/cruiseplan.output.html"><span class="doc">Output formats</span></a> for output generation</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cli/map.html" class="btn btn-neutral float-left" title="map" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="operation_types.html" class="btn btn-neutral float-right" title="Operation Types Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>