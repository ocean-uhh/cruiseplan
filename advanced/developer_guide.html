

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CruisePlan Developer Guide &mdash; CruisePlan v0.3.5 v0.3.5.post1.dev4</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=393fce2e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=04be4b04"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Manual Testing and Verification" href="manual_testing.html" />
    <link rel="prev" title="CruisePlan Demo" href="../demo-output.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CruisePlan v0.3.5
              <img src="../_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/yaml-basics.html">YAML Basics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/cli-commands.html">CLI Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/yaml-full.html">YAML Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/output-formats.html">Output Formats</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api-examples.html">API Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo-output.html">CruisePlan Demo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CruisePlan Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-architecture-overview">Introduction &amp; Architecture Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#design-principles">Design Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#technology-stack">Technology Stack</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#two-layer-architecture-system">Two-Layer Architecture System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yaml-layer-validation-models">YAML Layer (Validation Models)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operations-layer-runtime-classes">Operations Layer (Runtime Classes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-code-references">Source Code References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conversion-process">Conversion Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#organizational-hierarchy">Organizational Hierarchy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cruise-level-top-container">Cruise Level (Top Container)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leg-level-operational-phases">Leg Level (Operational Phases)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cluster-level-operation-grouping">Cluster Level (Operation Grouping)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operation-type-abstractions">Operation Type Abstractions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#baseoperation-abstract-interface">BaseOperation (Abstract Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#point-operations-pointoperation">Point Operations (PointOperation)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#line-operations-lineoperation">Line Operations (LineOperation)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#area-operations-areaoperation">Area Operations (AreaOperation)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#entry-exit-point-abstraction-system">Entry/Exit Point Abstraction System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem-solved">Problem Solved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-architecture">Implementation Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flexiblelocationmodel-system">FlexibleLocationModel System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-input-formats">Supported Input Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-architecture">Internal Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#distance-duration-calculation-architecture">Distance &amp; Duration Calculation Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#distance-calculations">Distance Calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#duration-calculations">Duration Calculations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#validation-architecture">Validation Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-layer-validation">Multi-Layer Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling-strategy">Error Handling Strategy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-patterns-best-practices">Development Patterns &amp; Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-new-operation-types">Adding New Operation Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-strategy">Testing Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-considerations">Performance Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling-patterns">Error Handling Patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#code-organization">Code Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-structure">Module Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manual_testing.html">Manual Testing and Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_testing.html#development-workflow-integration">Development Workflow Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CruisePlan v0.3.5</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CruisePlan Developer Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cruiseplan-developer-guide">
<h1>CruisePlan Developer Guide<a class="headerlink" href="#cruiseplan-developer-guide" title="Link to this heading"></a></h1>
<section id="introduction-architecture-overview">
<h2>Introduction &amp; Architecture Overview<a class="headerlink" href="#introduction-architecture-overview" title="Link to this heading"></a></h2>
<p>CruisePlan is a oceanographic cruise planning system.  This guide provides developers with an architectural overview to enable effective contribution to the codebase.</p>
<section id="design-principles">
<h3>Design Principles<a class="headerlink" href="#design-principles" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Separation of Concerns</strong>: Clear boundaries between validation, calculation, and output generation</p></li>
<li><p><strong>Type Safety</strong>: Pydantic models with comprehensive validation at the YAML layer</p></li>
<li><p><strong>Abstraction</strong>: Common interfaces for different operation types and organizational levels</p></li>
<li><p><strong>Extensibility</strong>: Clean modular design that facilitates adding new operation types and output formats</p></li>
</ul>
</section>
<section id="technology-stack">
<h3>Technology Stack<a class="headerlink" href="#technology-stack" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core</strong>: Python 3.9+ with Pydantic for data validation</p></li>
<li><p><strong>Geospatial</strong>: Built-in coordinate utilities, ETOPO/GEBCO bathymetry integration</p></li>
<li><p><strong>Scientific</strong>: NumPy, xarray for data processing</p></li>
<li><p><strong>Visualization</strong>: Matplotlib&gt;=3.7 for static maps, Folium for interactive web maps</p></li>
<li><p><strong>Data</strong>: NetCDF4, Pandas for scientific data formats</p></li>
<li><p><strong>Web</strong>: HTML/CSS generation, KML for Google Earth</p></li>
</ul>
</section>
</section>
<section id="two-layer-architecture-system">
<h2>Two-Layer Architecture System<a class="headerlink" href="#two-layer-architecture-system" title="Link to this heading"></a></h2>
<p>CruisePlan implements a dual-layer architecture that separates YAML configuration validation from runtime operational calculations.</p>
<section id="yaml-layer-validation-models">
<h3>YAML Layer (Validation Models)<a class="headerlink" href="#yaml-layer-validation-models" title="Link to this heading"></a></h3>
<p>The YAML layer uses Pydantic models for configuration parsing and validation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configuration container</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CruiseConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="c1"># Many more fields!</span>
    <span class="n">cruise_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">default_vessel_speed</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">turnaround_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_TURNAROUND_TIME_MIN</span>
    <span class="c1"># ... 20+ more fields</span>
    <span class="n">departure_port</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PortDefinition</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional!</span>
    <span class="n">points</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">StationDefinition</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional!</span>
    <span class="n">legs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">LegDefinition</span><span class="p">]</span>
    
<span class="c1"># Organizational definitions  </span>
<span class="k">class</span><span class="w"> </span><span class="nc">LegDefinition</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="c1"># Much more complex!</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">departure_port</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PortDefinition</span><span class="p">]</span>  <span class="c1"># Required</span>
    <span class="n">arrival_port</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PortDefinition</span><span class="p">]</span>   <span class="c1"># Required  </span>
    <span class="n">activities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span>  <span class="c1"># Not just stations!</span>
    <span class="c1"># ... many more fields</span>
    
<span class="c1"># Operation definitions</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StationDefinition</span><span class="p">(</span><span class="n">FlexibleLocationModel</span><span class="p">):</span>  <span class="c1"># Inherits coordinates!</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">operation_type</span><span class="p">:</span> <span class="n">OperationTypeEnum</span>  <span class="c1"># Not OperationType</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">ActionEnum</span>
    <span class="n">operation_depth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">water_depth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># ... many more fields</span>
</pre></div>
</div>
</section>
<section id="operations-layer-runtime-classes">
<h3>Operations Layer (Runtime Classes)<a class="headerlink" href="#operations-layer-runtime-classes" title="Link to this heading"></a></h3>
<p>The operations layer provides runtime objects optimized for scheduling calculations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="c1"># Runtime organizational classes  </span>
  <span class="k">class</span><span class="w"> </span><span class="nc">Cruise</span><span class="p">:</span>
      <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]):</span>
          <span class="c1"># Complex initialization with registries and resolution</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">runtime_legs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Leg</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>

  <span class="k">class</span><span class="w"> </span><span class="nc">Leg</span><span class="p">:</span>
      <span class="nd">@classmethod</span>
      <span class="k">def</span><span class="w"> </span><span class="nf">from_definition</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">leg_def</span><span class="p">:</span> <span class="n">LegDefinition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Leg&quot;</span><span class="p">:</span>
          <span class="c1"># Converts LegDefinition to runtime Leg</span>

      <span class="k">def</span><span class="w"> </span><span class="nf">get_effective_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_speed</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
          <span class="c1"># Parameter inheritance with defaults</span>

  <span class="c1"># Runtime operation classes</span>
  <span class="k">class</span><span class="w"> </span><span class="nc">PointOperation</span><span class="p">(</span><span class="n">BaseOperation</span><span class="p">):</span>
      <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># (lat, lon) tuple</span>

      <span class="k">def</span><span class="w"> </span><span class="nf">calculate_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
          <span class="c1"># Duration calculation with rules parameter</span>
</pre></div>
</div>
</section>
<section id="source-code-references">
<h3>Source Code References<a class="headerlink" href="#source-code-references" title="Link to this heading"></a></h3>
<p><strong>Configuration Models (Pydantic)</strong>:
Look for <code class="docutils literal notranslate"><span class="pre">CruiseConfig</span></code>, <code class="docutils literal notranslate"><span class="pre">LegDefinition</span></code> and <code class="docutils literal notranslate"><span class="pre">StationDefinition</span></code> in:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/validation.py">Core validation models: cruiseplan/core/validation.py</a></p></li>
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/tree/main/cruiseplan/core">All Pydantic models documentation: cruiseplan/core/</a></p></li>
</ul>
<p><strong>Runtime Classes</strong>: Look for</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Cruise</span></code> in <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/cruise.py">cruiseplan/core/cruise.py</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Leg</span></code> in <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/leg.py">cruiseplan/core/leg.py</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseOperation</span></code> and <code class="docutils literal notranslate"><span class="pre">PointOperation</span></code> in <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/operations.py">cruiseplan/core/operations.py</a></p></li>
</ul>
</section>
<section id="conversion-process">
<h3>Conversion Process<a class="headerlink" href="#conversion-process" title="Link to this heading"></a></h3>
<p>The system converts validation models to operational objects via factory methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definition → Operation conversion</span>
<span class="n">point_op</span> <span class="o">=</span> <span class="n">PointOperation</span><span class="o">.</span><span class="n">from_pydantic</span><span class="p">(</span><span class="n">station_definition</span><span class="p">)</span>
<span class="n">line_op</span> <span class="o">=</span> <span class="n">LineOperation</span><span class="o">.</span><span class="n">from_pydantic</span><span class="p">(</span><span class="n">transit_definition</span><span class="p">,</span> <span class="n">default_speed</span><span class="p">)</span>
<span class="n">area_op</span> <span class="o">=</span> <span class="n">AreaOperation</span><span class="o">.</span><span class="n">from_pydantic</span><span class="p">(</span><span class="n">area_definition</span><span class="p">)</span>

<span class="c1"># Definition → Organizational conversion  </span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>  <span class="c1"># Takes file path, not config object</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">Leg</span><span class="o">.</span><span class="n">from_definition</span><span class="p">(</span><span class="n">leg_definition</span><span class="p">)</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="o">.</span><span class="n">from_definition</span><span class="p">(</span><span class="n">cluster_definition</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Benefits</strong>: This separation allows comprehensive validation at parse time while providing optimized objects for calculation-intensive scheduling operations.</p>
</section>
</section>
<section id="organizational-hierarchy">
<h2>Organizational Hierarchy<a class="headerlink" href="#organizational-hierarchy" title="Link to this heading"></a></h2>
<section id="cruise-level-top-container">
<h3>Cruise Level (Top Container)<a class="headerlink" href="#cruise-level-top-container" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Global settings and expedition-wide configuration</p></li>
<li><p><strong>Key Features</strong>: Port management, global defaults, multi-leg coordination</p></li>
<li><p><strong>Runtime Class</strong>: <code class="docutils literal notranslate"><span class="pre">Cruise</span></code> with leg collection and global state</p></li>
</ul>
</section>
<section id="leg-level-operational-phases">
<h3>Leg Level (Operational Phases)<a class="headerlink" href="#leg-level-operational-phases" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Discrete cruise phases with parameter inheritance</p></li>
<li><p><strong>Runtime Features</strong>:</p>
<ul>
<li><p>Parameter inheritance: <code class="docutils literal notranslate"><span class="pre">get_effective_speed()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_effective_spacing()</span></code></p></li>
<li><p>Boundary management: departure/arrival ports as entry/exit points</p></li>
<li><p>Operation sequencing and cluster coordination</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Leg</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_effective_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_speed</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Inherit from cruise config, override with leg-specific</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vessel_speed</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vessel_speed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">default_speed</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_effective_spacing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_spacing</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Inherit from cruise config, override with leg-specific  </span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_between_stations</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_between_stations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">default_spacing</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="c1"># Departure port coordinates</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">departure_port</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">departure_port</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="c1"># Arrival port coordinates  </span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arrival_port</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_port</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cluster-level-operation-grouping">
<h3>Cluster Level (Operation Grouping)<a class="headerlink" href="#cluster-level-operation-grouping" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Operation grouping with scheduling strategies</p></li>
<li><p><strong>Strategies</strong>: <code class="docutils literal notranslate"><span class="pre">sequential</span></code> (implemented), not implemented: <code class="docutils literal notranslate"><span class="pre">spatial_interleaved</span></code>, <code class="docutils literal notranslate"><span class="pre">day_night_split</span></code></p></li>
<li><p><strong>Boundary Management</strong>: Entry/exit points for routing and sequencing</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="k">class</span><span class="w"> </span><span class="nc">Cluster</span><span class="p">:</span>
      <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
          <span class="c1"># First operation position in cluster</span>
          <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
              <span class="k">return</span> <span class="kc">None</span>
          <span class="n">first_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
          <span class="k">return</span> <span class="p">(</span><span class="n">first_op</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">first_op</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>

      <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
          <span class="c1"># Last operation position in cluster</span>
          <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
              <span class="k">return</span> <span class="kc">None</span>
          <span class="n">last_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
          <span class="k">return</span> <span class="p">(</span><span class="n">last_op</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">last_op</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note:</strong> Activity generation is handled by scheduler, not cluster directly.</p>
</section>
</section>
<section id="operation-type-abstractions">
<h2>Operation Type Abstractions<a class="headerlink" href="#operation-type-abstractions" title="Link to this heading"></a></h2>
<section id="baseoperation-abstract-interface">
<h3>BaseOperation (Abstract Interface)<a class="headerlink" href="#baseoperation-abstract-interface" title="Link to this heading"></a></h3>
<p>All operation types inherit from a common abstract base:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">BaseOperation</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Geographic entry point for routing (latitude, longitude)&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>  
    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Geographic exit point for routing (latitude, longitude)&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">          </span><span class="sd">&quot;&quot;&quot;Duration in minutes based on DurationCalculator rules</span>
<span class="sd">          </span>
<span class="sd">          Parameters:</span>
<span class="sd">          rules: DurationCalculator object containing cruise config and calculation methods</span>
<span class="sd">          &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="point-operations-pointoperation">
<h3>Point Operations (PointOperation)<a class="headerlink" href="#point-operations-pointoperation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Types</strong>: CTD stations, moorings</p></li>
<li><p><strong>Duration</strong>: Depth-based for CTD, manual for moorings</p></li>
<li><p><strong>Entry/Exit</strong>: Same location for both points</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PointOperation</span><span class="p">(</span><span class="n">BaseOperation</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># (latitude, longitude) tuple</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># Same as entry for point operations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Uses manual duration if specified, otherwise calculates based on operation type</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">manual_duration</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">manual_duration</span>

        <span class="c1"># Uses DurationCalculator for CTD depth-based calculations</span>
        <span class="n">duration_calc</span> <span class="o">=</span> <span class="n">DurationCalculator</span><span class="p">(</span><span class="n">rules</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">duration_calc</span><span class="o">.</span><span class="n">calculate_ctd_time</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">op_type</span><span class="p">)</span>
</pre></div>
</div>
<p>CTD duration calculations use configurable descent/ascent rates plus turnaround time.</p>
</section>
<section id="line-operations-lineoperation">
<h3>Line Operations (LineOperation)<a class="headerlink" href="#line-operations-lineoperation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Types</strong>: Scientific transects, navigation routes</p></li>
<li><p><strong>Duration</strong>: Route distance ÷ vessel speed</p></li>
<li><p><strong>Entry/Exit</strong>: First/last waypoints of route</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LineOperation</span><span class="p">(</span><span class="n">BaseOperation</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># First waypoint</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Last waypoint</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Calculate total route distance using haversine_distance</span>
        <span class="n">total_route_distance_km</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">segment_distance</span> <span class="o">=</span> <span class="n">haversine_distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">total_route_distance_km</span> <span class="o">+=</span> <span class="n">segment_distance</span>

        <span class="c1"># Convert to nautical miles (vessel speed is in knots)</span>
        <span class="n">route_distance_nm</span> <span class="o">=</span> <span class="n">total_route_distance_km</span> <span class="o">*</span> <span class="mf">0.539957</span>

        <span class="c1"># Use operation speed or fallback to config default</span>
        <span class="n">vessel_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="ow">or</span> <span class="n">rules</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_vessel_speed</span>
        <span class="n">duration_hours</span> <span class="o">=</span> <span class="n">route_distance_nm</span> <span class="o">/</span> <span class="n">vessel_speed</span>
        <span class="k">return</span> <span class="n">duration_hours</span> <span class="o">*</span> <span class="mf">60.0</span>  <span class="c1"># Convert to minutes</span>
</pre></div>
</div>
<p>Distance calculations use the haversine formula for great circle distances.</p>
</section>
<section id="area-operations-areaoperation">
<h3>Area Operations (AreaOperation)<a class="headerlink" href="#area-operations-areaoperation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Types</strong>: Survey grids, mapping areas, but can also be used for any generic operation type</p></li>
<li><p><strong>Duration</strong>: Manual specification required</p></li>
<li><p><strong>Entry/Exit</strong>: Calculated center point for routing (note, fine for bulk estimates in planning, but will introduce error–especially if the region is large)</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AreaOperation</span><span class="p">(</span><span class="n">BaseOperation</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_point</span>  <span class="c1"># First corner of polygon</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_point</span>    <span class="c1"># Last corner of polygon</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Area operations require manual duration specification</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Area operation &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; requires user-specified duration&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span>

    <span class="c1"># Entry/exit points set during creation from first/last polygon corners:</span>
    <span class="c1"># start_point = boundary_tuples[0]   # First corner</span>
    <span class="c1"># end_point = boundary_tuples[-1]    # Last corner</span>
</pre></div>
</div>
</section>
</section>
<section id="entry-exit-point-abstraction-system">
<h2>Entry/Exit Point Abstraction System<a class="headerlink" href="#entry-exit-point-abstraction-system" title="Link to this heading"></a></h2>
<p>The entry/exit point system provides a unified interface for routing calculations across all operation types and organizational levels.</p>
<section id="problem-solved">
<h3>Problem Solved<a class="headerlink" href="#problem-solved" title="Link to this heading"></a></h3>
<p>Type-agnostic routing that works consistently whether calculating distances between:</p>
<ul class="simple">
<li><p>Point → Point operations</p></li>
<li><p>Point → Line operations</p></li>
<li><p>Line → Area operations</p></li>
<li><p>Leg → Leg boundaries</p></li>
<li><p>Any combination of the above</p></li>
</ul>
</section>
<section id="implementation-architecture">
<h3>Implementation Architecture<a class="headerlink" href="#implementation-architecture" title="Link to this heading"></a></h3>
<p><strong>Abstract Interface</strong>: Both operations and organizational levels implement <code class="docutils literal notranslate"><span class="pre">get_entry_point()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_exit_point()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Operation level implementation</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PointOperation</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># (latitude, longitude) tuple</span>

<span class="k">class</span><span class="w"> </span><span class="nc">LineOperation</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># First waypoint</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AreaOperation</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_point</span>  <span class="c1"># First corner of polygon</span>

<span class="c1"># Organizational level implementation        </span>
<span class="k">class</span><span class="w"> </span><span class="nc">Cluster</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">first_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">first_op</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">first_op</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Leg</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">departure_port</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">departure_port</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Usage in Routing</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">calculate_transit_distance</span><span class="p">(</span><span class="n">from_entity</span><span class="p">,</span> <span class="n">to_entity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Works for any combination of operations, clusters, or legs&quot;&quot;&quot;</span>
    <span class="n">start_point</span> <span class="o">=</span> <span class="n">from_entity</span><span class="o">.</span><span class="n">get_exit_point</span><span class="p">()</span>
    <span class="n">end_point</span> <span class="o">=</span> <span class="n">to_entity</span><span class="o">.</span><span class="n">get_entry_point</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">haversine_distance</span><span class="p">(</span><span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Benefits</strong>:</p>
<ul class="simple">
<li><p><strong>Future-proof</strong>: New operation types automatically work with existing routing</p></li>
<li><p><strong>Cleaner code</strong>: No type checking or isinstance() calls in routing logic</p></li>
<li><p><strong>Consistent interface</strong>: Same method calls work across all entity types</p></li>
</ul>
</section>
</section>
<section id="flexiblelocationmodel-system">
<h2>FlexibleLocationModel System<a class="headerlink" href="#flexiblelocationmodel-system" title="Link to this heading"></a></h2>
<p>Handles multiple coordinate input formats with consistent internal representation.</p>
<p><strong>⚠️ Note: This system is under review for simplification in a future release.</strong></p>
<section id="supported-input-formats">
<h3>Supported Input Formats<a class="headerlink" href="#supported-input-formats" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Explicit fields (recommended)</span>
<span class="n">station1</span> <span class="o">=</span> <span class="n">StationDefinition</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=-</span><span class="mf">30.0</span><span class="p">)</span>

<span class="c1"># String format (legacy support)</span>
<span class="n">station2</span> <span class="o">=</span> <span class="n">StationDefinition</span><span class="p">(</span><span class="n">coordinates</span><span class="o">=</span><span class="s2">&quot;60.0, -30.0&quot;</span><span class="p">)</span>

<span class="c1"># Both formats are normalized to internal GeoPoint storage</span>
<span class="c1"># Access: station.latitude, station.longitude</span>
</pre></div>
</div>
<p>The current FlexibleLocationModel system adds complexity:</p>
<ul class="simple">
<li><p>Direct access via <code class="docutils literal notranslate"><span class="pre">station.latitude</span></code> and <code class="docutils literal notranslate"><span class="pre">station.longitude</span></code></p></li>
<li><p>Intermediate GeoPoint objects for simple coordinate storage</p></li>
<li><p>String parsing for coordinates that are rarely used in practice</p></li>
</ul>
<p><strong>Future Direction:</strong> This system is a candidate for simplification to direct latitude/longitude fields in a future version, which would provide cleaner API access and reduced complexity while maintaining the same YAML configuration format.</p>
<p>For complete source code details, see https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/validation.py.</p>
</section>
<section id="internal-architecture">
<h3>Internal Architecture<a class="headerlink" href="#internal-architecture" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">FlexibleLocationModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
      <span class="n">position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GeoPoint</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Internal storage</span>

      <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>  
      <span class="nd">@classmethod</span>
      <span class="k">def</span><span class="w"> </span><span class="nf">unify_coordinates</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
          <span class="c1"># Converts latitude/longitude fields or coordinate strings</span>
          <span class="c1"># into position: GeoPoint object</span>

      <span class="c1"># Access pattern:</span>
      <span class="c1"># station.latitude  </span>
      <span class="c1"># station.longitude</span>

      <span class="c1"># Note: Convenience @property methods do not exist yet</span>
</pre></div>
</div>
</section>
</section>
<section id="distance-duration-calculation-architecture">
<h2>Distance &amp; Duration Calculation Architecture<a class="headerlink" href="#distance-duration-calculation-architecture" title="Link to this heading"></a></h2>
<section id="distance-calculations">
<h3>Distance Calculations<a class="headerlink" href="#distance-calculations" title="Link to this heading"></a></h3>
<p>CruisePlan uses great circle distance calculations for accurate routing at oceanographic scales.</p>
<p><strong>Architecture</strong>:</p>
<ul class="simple">
<li><p><strong>Haversine formula</strong>: Implemented in <code class="docutils literal notranslate"><span class="pre">cruiseplan/calculators/distance.py</span></code></p></li>
<li><p><strong>Type-agnostic interface</strong>: Works with any objects having <code class="docutils literal notranslate"><span class="pre">get_entry_point()</span></code>/<code class="docutils literal notranslate"><span class="pre">get_exit_point()</span></code> methods</p></li>
<li><p><strong>Automatic transit insertion</strong>: Distance calculations between operations trigger transit generation</p></li>
</ul>
<p><strong>Calculation formulas use standard oceanographic parameters with configurable rates.</strong></p>
</section>
<section id="duration-calculations">
<h3>Duration Calculations<a class="headerlink" href="#duration-calculations" title="Link to this heading"></a></h3>
<p><strong>DurationCalculator</strong>: Centralized duration logic with operation-type-specific methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DurationCalculator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_ctd_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depth_m</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">operation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Depth-based CTD timing with configurable descent/ascent rates&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_transit_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance_km</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">speed_knots</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Route-based transit timing with unit conversions&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_mooring_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Manual duration required for mooring operations&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Architecture: Operations call calculate_duration(rules) which dispatches to appropriate calculator methods based on operation type.</p>
<p><strong>Formulas use operation-specific rates and configurable vessel parameters.</strong></p>
</section>
</section>
<section id="validation-architecture">
<h2>Validation Architecture<a class="headerlink" href="#validation-architecture" title="Link to this heading"></a></h2>
<section id="multi-layer-validation">
<h3>Multi-Layer Validation<a class="headerlink" href="#multi-layer-validation" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Syntax Validation</strong>: Pydantic v2 model validation at YAML parse</p></li>
<li><p><strong>Field Validation</strong>: Range checking, type validation, business rules</p></li>
<li><p><strong>Cross-Reference Validation</strong>: Reference resolution, port lookups</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">StationDefinition</span><span class="p">(</span><span class="n">FlexibleLocationModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">operation_type</span><span class="p">:</span> <span class="n">OperationTypeEnum</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">ActionEnum</span>
    <span class="c1"># Coordinates handled by FlexibleLocationModel parent class</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;duration&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_duration_positive</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate duration is positive, warn about placeholder values&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Duration must be positive&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;operation_type&quot;</span><span class="p">)</span>  
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_operation_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate operation_type against enum values&quot;&quot;&quot;</span>
        <span class="c1"># Enum validation happens automatically</span>
        <span class="k">return</span> <span class="n">v</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CruiseConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;default_vessel_speed&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_speed</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate vessel speed is within realistic bounds (1-30 knots)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mf">30.0</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Vessel speed must be between 1-30 knots&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
</pre></div>
</div>
</section>
<section id="error-handling-strategy">
<h3>Error Handling Strategy<a class="headerlink" href="#error-handling-strategy" title="Link to this heading"></a></h3>
<p><strong>User-Friendly Messages</strong>: Transform technical validation errors into actionable guidance through custom exception types and Pydantic error handling.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CruiseConfigurationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Exception raised when cruise configuration is invalid or cannot be processed.</span>
<span class="sd">    </span>
<span class="sd">    This exception is raised during configuration validation when the YAML</span>
<span class="sd">    file contains invalid data, missing required fields, or logical inconsistencies</span>
<span class="sd">    that prevent the cruise plan from being properly loaded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Error handling in practice:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Pydantic validation errors are automatically user-friendly</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration validation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">CruiseConfigurationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Custom cruise-specific validation errors</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cruise configuration error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Error Sources:</p>
<ul class="simple">
<li><p><strong>Pydantic ValidationError:</strong> Automatic field validation with clear error messages</p></li>
<li><p><strong>CruiseConfigurationError:</strong> Custom exceptions for cruise-specific validation logic</p></li>
<li><p><strong>File I/O errors:</strong> YAML parsing and file access issues</p></li>
</ul>
<p>For complete error handling patterns, see the https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/cruise.py.</p>
</section>
</section>
<section id="development-patterns-best-practices">
<h2>Development Patterns &amp; Best Practices<a class="headerlink" href="#development-patterns-best-practices" title="Link to this heading"></a></h2>
<section id="adding-new-operation-types">
<h3>Adding New Operation Types<a class="headerlink" href="#adding-new-operation-types" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Create Pydantic Definition</strong>: New <code class="docutils literal notranslate"><span class="pre">*Definition</span></code> class inheriting from <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code></p></li>
<li><p><strong>Implement Runtime Class</strong>: New operation class inheriting from <code class="docutils literal notranslate"><span class="pre">BaseOperation</span></code></p></li>
<li><p><strong>Add Conversion Method</strong>: <code class="docutils literal notranslate"><span class="pre">from_pydantic()</span></code> class method</p></li>
<li><p><strong>Implement Abstract Methods</strong>: <code class="docutils literal notranslate"><span class="pre">get_entry_point()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_exit_point()</span></code>, <code class="docutils literal notranslate"><span class="pre">calculate_duration()</span></code></p></li>
<li><p><strong>Add Duration Calculator</strong>: Type-specific duration logic</p></li>
<li><p><strong>Update Validation</strong>: Add to operation type enums and validators</p></li>
</ol>
</section>
<section id="testing-strategy">
<h3>Testing Strategy<a class="headerlink" href="#testing-strategy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Unit Tests</strong>: Individual component testing with mocks</p></li>
<li><p><strong>Integration Tests</strong>: End-to-end workflow testing</p></li>
<li><p><strong>Fixtures</strong>: Realistic cruise configurations for consistent testing</p></li>
<li><p><strong>Property-Based Testing</strong>: Coordinate validation, calculation accuracy</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example test pattern</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_point_operation_entry_exit_consistency</span><span class="p">():</span>
    <span class="n">station</span> <span class="o">=</span> <span class="n">PointOperation</span><span class="o">.</span><span class="n">from_pydantic</span><span class="p">(</span><span class="n">station_definition</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">station</span><span class="o">.</span><span class="n">get_entry_point</span><span class="p">()</span> <span class="o">==</span> <span class="n">station</span><span class="o">.</span><span class="n">get_exit_point</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="performance-considerations">
<h3>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Lazy Loading</strong>:</p>
<ul>
<li><p>Bathymetry datasets loaded on-demand via <code class="docutils literal notranslate"><span class="pre">BathymetryManager._dataset</span></code> property (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/data/bathymetry.py"><code class="docutils literal notranslate"><span class="pre">bathymetry.py</span></code></a>)</p></li>
<li><p>NetCDF files only opened when first depth lookup is needed, avoiding memory overhead</p></li>
</ul>
</li>
<li><p><strong>Caching</strong>:</p>
<ul>
<li><p>PANGAEA dataset metadata cached via <code class="docutils literal notranslate"><span class="pre">CacheManager</span></code> (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/data/pangaea.py"><code class="docutils literal notranslate"><span class="pre">pangaea.py</span></code></a>),</p></li>
<li><p>Pickle-based file cache in <code class="docutils literal notranslate"><span class="pre">.cache/</span></code> directory,   (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/data/cache.py"><code class="docutils literal notranslate"><span class="pre">cache.py</span></code></a>)</p></li>
<li><p>Bathymetry data kept in memory after first load to avoid repeated NetCDF reads</p></li>
</ul>
</li>
<li><p><strong>Bulk Operations</strong>:</p>
<ul>
<li><p>Bathymetry grid subsets with configurable stride downsampling (<code class="docutils literal notranslate"><span class="pre">get_grid_subset()</span></code>) reduces data points for plotting efficiency</p></li>
<li><p>PANGAEA API calls batch-processed with configurable rate limiting (default 1.0 req/sec)</p></li>
<li><p>Haversine distance calculations (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/calculators/distance.py"><code class="docutils literal notranslate"><span class="pre">distance.py</span></code></a>) for route segment optimization</p></li>
</ul>
</li>
</ul>
</section>
<section id="error-handling-patterns">
<h3>Error Handling Patterns<a class="headerlink" href="#error-handling-patterns" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Custom exception hierarchy</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CLIError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Command-line interface errors&quot;&quot;&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">YAMLIOError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;YAML file I/O operation errors&quot;&quot;&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReferenceError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration reference resolution failures&quot;&quot;&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CruiseConfigurationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cruise configuration validation errors&quot;&quot;&quot;</span>

<span class="c1"># Uses Pydantic&#39;s ValidationError for data validation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">ValidationError</span>
</pre></div>
</div>
<p>See files such as:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/cli/utils.py">cli/utils.py</a> - CLIError for command-line issues</p></li>
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/utils/yaml_io.py">utils/yaml_io.py</a> - YAMLIOError for YAML I/O problems</p></li>
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/cruise.py">core/cruise.py</a> - ReferenceError for unresolved references</p></li>
<li><p><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/cruiseplan/core/validation.py">core/validation.py</a> - CruiseConfigurationError for configuration issues</p></li>
<li><p>Multiple files import Pydantic’s <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code> for data validation</p></li>
</ul>
</section>
</section>
<section id="code-organization">
<h2>Code Organization<a class="headerlink" href="#code-organization" title="Link to this heading"></a></h2>
<section id="module-structure">
<h3>Module Structure<a class="headerlink" href="#module-structure" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/core/</span></code>: Configuration management, validation models</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/calculators/</span></code>: Distance, duration, routing algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/data/</span></code>: PANGAEA integration, bathymetry handling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/output/</span></code>: Multi-format output generation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/interactive/</span></code>: Station picker and GUI components</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan/utils/</span></code>: Coordinate conversion, common utilities</p></li>
</ul>
<p>The codebase follows a modular structure with clear separation of concerns</p>
</section>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core Dependencies</strong>: Required for basic functionality (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/requirements.txt"><code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code></a>)</p></li>
<li><p><strong>Optional Dependencies</strong>: Enhanced features for specialized outputs (defined in <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>)</p></li>
<li><p><strong>Development Dependencies</strong>: Testing, linting, documentation tools (see <a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/requirements-dev.txt"><code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></a>)</p></li>
</ul>
<p>This architecture provides a solid foundation for extending CruisePlan while maintaining code quality, type safety, and user experience standards.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../demo-output.html" class="btn btn-neutral float-left" title="CruisePlan Demo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="manual_testing.html" class="btn btn-neutral float-right" title="Manual Testing and Verification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>