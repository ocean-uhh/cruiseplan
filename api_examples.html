

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Usage Examples &mdash; CruisePlan v0.3.1 v0.3.1.post1.dev5</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=393fce2e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=0710a764"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CruisePlan v0.3.1
              <img src="_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLI Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#workflow-paths">Workflow Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#troubleshooting">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebook Demo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo-output.html">CruisePlan Demo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cruise_architecture.html">Cruise Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_reference.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml_reference.html">YAML Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation_types.html">Operation Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculations.html">Calculation Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="units_and_defaults.html">Units and defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_ports.html">Port list</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_formats.html">Output formats</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/CONTRIBUTING.md">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_testing.html">Manual Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html">Development Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#implementation-notes">Implementation Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#risk-assessment">Risk Assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap/index.html#contributing">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CruisePlan v0.3.1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">API Usage Examples</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api-usage-examples">
<h1>API Usage Examples<a class="headerlink" href="#api-usage-examples" title="Link to this heading"></a></h1>
<p>This guide provides comprehensive examples for using CruisePlan programmatically through its Python API. These examples demonstrate how to integrate CruisePlan functionality into custom scripts, workflows, and applications.</p>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#basic-usage" id="id2">Basic Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#loading-and-accessing-cruise-configurations" id="id3">Loading and Accessing Cruise Configurations</a></p></li>
<li><p><a class="reference internal" href="#working-with-station-data" id="id4">Working with Station Data</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-configuration-manipulation" id="id5">Advanced Configuration Manipulation</a></p>
<ul>
<li><p><a class="reference internal" href="#programmatic-station-creation" id="id6">Programmatic Station Creation</a></p></li>
<li><p><a class="reference internal" href="#batch-processing-multiple-configurations" id="id7">Batch Processing Multiple Configurations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#calculations-and-analysis" id="id8">Calculations and Analysis</a></p>
<ul>
<li><p><a class="reference internal" href="#distance-and-duration-calculations" id="id9">Distance and Duration Calculations</a></p></li>
<li><p><a class="reference internal" href="#bathymetric-analysis" id="id10">Bathymetric Analysis</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#custom-output-generation" id="id11">Custom Output Generation</a></p>
<ul>
<li><p><a class="reference internal" href="#generating-custom-reports" id="id12">Generating Custom Reports</a></p></li>
<li><p><a class="reference internal" href="#custom-map-generation" id="id13">Custom Map Generation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-integration-examples" id="id14">Data Integration Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#pangaea-data-integration" id="id15">PANGAEA Data Integration</a></p></li>
<li><p><a class="reference internal" href="#custom-workflow-automation" id="id16">Custom Workflow Automation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#integration-with-external-tools" id="id17">Integration with External Tools</a></p>
<ul>
<li><p><a class="reference internal" href="#jupyter-notebook-integration" id="id18">Jupyter Notebook Integration</a></p></li>
<li><p><a class="reference internal" href="#gis-integration-example" id="id19">GIS Integration Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#best-practices" id="id20">Best Practices</a></p>
<ul>
<li><p><a class="reference internal" href="#error-handling" id="id21">Error Handling</a></p></li>
<li><p><a class="reference internal" href="#memory-management" id="id22">Memory Management</a></p></li>
<li><p><a class="reference internal" href="#performance-optimization" id="id23">Performance Optimization</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>CruisePlan provides both command-line and programmatic interfaces. The Python API allows you to:</p>
<ul class="simple">
<li><p>Load and manipulate cruise configurations programmatically</p></li>
<li><p>Integrate cruise planning into larger scientific workflows</p></li>
<li><p>Build custom analysis tools and visualizations</p></li>
<li><p>Automate batch processing of multiple cruises</p></li>
<li><p>Extend functionality with custom plugins</p></li>
</ul>
<p><strong>Core API Modules:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan.core.cruise</span></code>: Main Cruise class and configuration loading</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan.calculators</span></code>: Distance, duration, and routing calculations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan.output</span></code>: Multi-format output generation (HTML, NetCDF, maps)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan.data</span></code>: Bathymetry and PANGAEA data access</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cruiseplan.interactive</span></code>: Station picker and visualization tools</p></li>
</ul>
</section>
<section id="basic-usage">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Basic Usage</a><a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<section id="loading-and-accessing-cruise-configurations">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Loading and Accessing Cruise Configurations</a><a class="headerlink" href="#loading-and-accessing-cruise-configurations" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Load a cruise configuration from YAML file</span>
<span class="n">cruise_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;my_cruise.yaml&quot;</span><span class="p">)</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">cruise_file</span><span class="p">)</span>

<span class="c1"># Access cruise metadata</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cruise name: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of stations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Iterate through stations</span>
<span class="k">for</span> <span class="n">station_name</span><span class="p">,</span> <span class="n">station_def</span> <span class="ow">in</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Station </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">station_def</span><span class="o">.</span><span class="n">latitude</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">°N, </span><span class="si">{</span><span class="n">station_def</span><span class="o">.</span><span class="n">longitude</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">°E&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Operation: </span><span class="si">{</span><span class="n">station_def</span><span class="o">.</span><span class="n">operation_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">station_def</span><span class="p">,</span> <span class="s1">&#39;depth&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">station_def</span><span class="o">.</span><span class="n">depth</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Depth: </span><span class="si">{</span><span class="n">station_def</span><span class="o">.</span><span class="n">depth</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="working-with-station-data">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Working with Station Data</a><a class="headerlink" href="#working-with-station-data" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Load cruise and extract station data</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Create DataFrame of station information</span>
<span class="n">station_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">station_data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span>
        <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span>
        <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">station</span><span class="p">,</span> <span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">operation_type</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">station</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="p">})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">station_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Calculate basic statistics</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Latitude range: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">° to </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Longitude range: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">° to </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average depth: </span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-configuration-manipulation">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Advanced Configuration Manipulation</a><a class="headerlink" href="#advanced-configuration-manipulation" title="Link to this heading"></a></h2>
<section id="programmatic-station-creation">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Programmatic Station Creation</a><a class="headerlink" href="#programmatic-station-creation" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">WaypointDefinition</span><span class="p">,</span> <span class="n">CruiseConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.utils.yaml_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">save_yaml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Create stations programmatically</span>
<span class="n">stations</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Generate CTD transect</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">2</span><span class="p">)):</span>  <span class="c1"># 60°N to 70°N every 2°</span>
    <span class="n">station</span> <span class="o">=</span> <span class="n">WaypointDefinition</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;CTD_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">03d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">latitude</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">lat</span><span class="p">),</span>
        <span class="n">longitude</span><span class="o">=-</span><span class="mf">30.0</span><span class="p">,</span>  <span class="c1"># Fixed longitude</span>
        <span class="n">operation_type</span><span class="o">=</span><span class="s2">&quot;CTD&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span>
        <span class="n">comment</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Transect station </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">stations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">station</span><span class="p">)</span>

<span class="c1"># Create cruise configuration</span>
<span class="n">cruise_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="s2">&quot;Programmatic_Transect_2024&quot;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s2">&quot;Generated CTD transect&quot;</span><span class="p">,</span>
    <span class="s1">&#39;first_station&#39;</span><span class="p">:</span> <span class="n">stations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="s1">&#39;last_station&#39;</span><span class="p">:</span> <span class="n">stations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">station</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">],</span>
    <span class="s1">&#39;legs&#39;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;North_Atlantic_Transect&#39;</span><span class="p">,</span>
        <span class="s1">&#39;strategy&#39;</span><span class="p">:</span> <span class="s1">&#39;sequential&#39;</span><span class="p">,</span>
        <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
    <span class="p">}]</span>
<span class="p">}</span>

<span class="c1"># Save to YAML file</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;generated_transect.yaml&quot;</span><span class="p">)</span>
<span class="n">save_yaml</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated cruise configuration: </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="batch-processing-multiple-configurations">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Batch Processing Multiple Configurations</a><a class="headerlink" href="#batch-processing-multiple-configurations" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.scheduler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_cruise_schedule</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">glob</span>

<span class="c1"># Process all YAML files in a directory</span>
<span class="n">cruise_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cruise_configs/&quot;</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">cruise_file</span> <span class="ow">in</span> <span class="n">cruise_directory</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing </span><span class="si">{</span><span class="n">cruise_file</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="c1"># Load cruise</span>
        <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">cruise_file</span><span class="p">)</span>

        <span class="c1"># Generate schedule</span>
        <span class="n">timeline</span> <span class="o">=</span> <span class="n">generate_cruise_schedule</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span>

        <span class="c1"># Extract summary statistics</span>
        <span class="n">total_stations</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span>
        <span class="n">total_time</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration_hours&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">activity</span> <span class="ow">in</span> <span class="n">timeline</span><span class="p">)</span>

        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="p">,</span>
            <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">cruise_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="n">total_stations</span><span class="p">,</span>
            <span class="s1">&#39;duration_hours&#39;</span><span class="p">:</span> <span class="n">total_time</span><span class="p">,</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span>
        <span class="p">})</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="n">cruise_file</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
            <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">cruise_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;failed&#39;</span>
        <span class="p">})</span>

<span class="c1"># Summary report</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Batch Processing Summary:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Success rate: </span><span class="si">{</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="calculations-and-analysis">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Calculations and Analysis</a><a class="headerlink" href="#calculations-and-analysis" title="Link to this heading"></a></h2>
<section id="distance-and-duration-calculations">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Distance and Duration Calculations</a><a class="headerlink" href="#distance-and-duration-calculations" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.distance</span><span class="w"> </span><span class="kn">import</span> <span class="n">haversine_distance</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.duration</span><span class="w"> </span><span class="kn">import</span> <span class="n">calculate_ctd_time</span><span class="p">,</span> <span class="n">calculate_transit_time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>

<span class="c1"># Load cruise data</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Calculate distances between consecutive stations</span>
<span class="n">station_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">total_distance</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">station_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">current</span> <span class="o">=</span> <span class="n">station_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">next_station</span> <span class="o">=</span> <span class="n">station_list</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

    <span class="n">distance</span> <span class="o">=</span> <span class="n">haversine_distance</span><span class="p">(</span>
        <span class="n">current</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span>
        <span class="n">next_station</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">next_station</span><span class="o">.</span><span class="n">longitude</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">current</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> → </span><span class="si">{</span><span class="n">next_station</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">distance</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> km&quot;</span><span class="p">)</span>
    <span class="n">total_distance</span> <span class="o">+=</span> <span class="n">distance</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total cruise track distance: </span><span class="si">{</span><span class="n">total_distance</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> km&quot;</span><span class="p">)</span>

<span class="c1"># Calculate operation durations</span>
<span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">station_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">operation_type</span> <span class="o">==</span> <span class="s2">&quot;CTD&quot;</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">calculate_ctd_time</span><span class="p">(</span>
            <span class="n">depth</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">station</span><span class="p">,</span> <span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">),</span>
            <span class="n">cast_type</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">station</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="s1">&#39;profile&#39;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">station</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> CTD duration: </span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="bathymetric-analysis">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bathymetric Analysis</a><a class="headerlink" href="#bathymetric-analysis" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.bathymetry</span><span class="w"> </span><span class="kn">import</span> <span class="n">BathymetryManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Load bathymetry and cruise data</span>
<span class="n">bathy</span> <span class="o">=</span> <span class="n">BathymetryManager</span><span class="p">()</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Extract depths for all stations</span>
<span class="n">station_depths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">station_names</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">bathy</span><span class="o">.</span><span class="n">get_depth</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>
    <span class="n">station_depths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span>
    <span class="n">station_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># Bathymetric analysis</span>
<span class="n">depths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">station_depths</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Depth statistics:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Mean depth: </span><span class="si">{</span><span class="n">depths</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Depth range: </span><span class="si">{</span><span class="n">depths</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m to </span><span class="si">{</span><span class="n">depths</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Standard deviation: </span><span class="si">{</span><span class="n">depths</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>

<span class="c1"># Plot depth profile</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">depths</span><span class="p">)),</span> <span class="n">depths</span><span class="p">,</span> <span class="s1">&#39;o-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Station Index&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Water Depth (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bathymetric Profile: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>  <span class="c1"># Convention: deeper water at bottom</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;bathymetric_profile.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Saved bathymetric profile to bathymetric_profile.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="custom-output-generation">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Custom Output Generation</a><a class="headerlink" href="#custom-output-generation" title="Link to this heading"></a></h2>
<section id="generating-custom-reports">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Generating Custom Reports</a><a class="headerlink" href="#generating-custom-reports" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.scheduler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_cruise_schedule</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jinja2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Template</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="c1"># Load cruise and generate schedule</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>
<span class="n">timeline</span> <span class="o">=</span> <span class="n">generate_cruise_schedule</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span>

<span class="c1"># Create custom summary report</span>
<span class="n">report_template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1"># Cruise Planning Report: {{ cruise_name }}</span>

<span class="s1">## Summary Statistics</span>
<span class="s1">- **Total Stations**: {{ n_stations }}</span>
<span class="s1">- **Estimated Duration**: {{ total_hours:.1f }} hours ({{ total_days:.1f }} days)</span>
<span class="s1">- **Geographic Bounds**: {{ lat_range }} lat, {{ lon_range }} lon</span>
<span class="s1">- **Operation Types**: {{ operation_types|join(&#39;, &#39;) }}</span>

<span class="s1">## Station List</span>
<span class="s1">{</span><span class="si">% f</span><span class="s1">or station in stations %}</span>
<span class="s1">### {{ station.name }}</span>
<span class="s1">- **Location**: {{ &quot;</span><span class="si">%.4f</span><span class="s1">°N, </span><span class="si">%.4f</span><span class="s1">°E&quot;|format(station.latitude, station.longitude) }}</span>
<span class="s1">- **Operation**: {{ station.operation_type }} ({{ station.action }})</span>
<span class="s1">{</span><span class="si">% i</span><span class="s1">f station.depth -%}</span>
<span class="s1">- **Depth**: {{ &quot;</span><span class="si">%.0f</span><span class="s1">&quot;|format(station.depth) }}m</span>
<span class="s1">{</span><span class="si">% e</span><span class="s1">ndif -%}</span>
<span class="s1">{</span><span class="si">% i</span><span class="s1">f station.comment -%}</span>
<span class="s1">- **Notes**: {{ station.comment }}</span>
<span class="s1">{</span><span class="si">% e</span><span class="s1">ndif %}</span>
<span class="s1">{</span><span class="si">% e</span><span class="s1">ndfor %}</span>

<span class="s1">## Timeline Summary</span>
<span class="s1">{</span><span class="si">% f</span><span class="s1">or activity in timeline[:10] %}  {# Show first 10 activities #}</span>
<span class="s1">- **{{ activity.get(&#39;start_time&#39;, &#39;TBD&#39;) }}**: {{ activity.get(&#39;activity&#39;, &#39;Unknown&#39;) }} ({{ activity.get(&#39;duration_hours&#39;, 0):.1f }}h)</span>
<span class="s1">{</span><span class="si">% e</span><span class="s1">ndfor %}</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Prepare template data</span>
<span class="n">stations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">lats</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
<span class="n">lons</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>

<span class="n">report_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="p">,</span>
    <span class="s1">&#39;n_stations&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">stations</span><span class="p">),</span>
    <span class="s1">&#39;total_hours&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration_hours&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">timeline</span><span class="p">),</span>
    <span class="s1">&#39;total_days&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration_hours&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">timeline</span><span class="p">)</span> <span class="o">/</span> <span class="mi">24</span><span class="p">,</span>
    <span class="s1">&#39;lat_range&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">lats</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">° to </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">lats</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">,</span>
    <span class="s1">&#39;lon_range&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">lons</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">° to </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">lons</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">,</span>
    <span class="s1">&#39;operation_types&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">operation_type</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">)),</span>
    <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="n">stations</span><span class="p">,</span>
    <span class="s1">&#39;timeline&#39;</span><span class="p">:</span> <span class="n">timeline</span>
<span class="p">}</span>

<span class="c1"># Generate and save report</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">report_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">report_data</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;cruise_report.md&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated custom cruise report: cruise_report.md&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="custom-map-generation">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Custom Map Generation</a><a class="headerlink" href="#custom-map-generation" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.map_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_map_from_yaml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.bathymetry</span><span class="w"> </span><span class="kn">import</span> <span class="n">BathymetryManager</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Load cruise configuration</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Generate standard map</span>
<span class="n">map_file</span> <span class="o">=</span> <span class="n">generate_map_from_yaml</span><span class="p">(</span>
    <span class="n">cruise</span><span class="p">,</span>
    <span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;standard_cruise_map.png&quot;</span><span class="p">,</span>
    <span class="n">bathymetry_source</span><span class="o">=</span><span class="s2">&quot;gebco2025&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated standard map: </span><span class="si">{</span><span class="n">map_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Create custom visualization</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># Panel 1: Geographic overview</span>
<span class="n">stations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">lats</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
<span class="n">lons</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude (°E)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude (°N)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Station Locations: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Panel 2: Depth profile</span>
<span class="n">bathy</span> <span class="o">=</span> <span class="n">BathymetryManager</span><span class="p">()</span>
<span class="n">depths</span> <span class="o">=</span> <span class="p">[</span><span class="n">bathy</span><span class="o">.</span><span class="n">get_depth</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">depths</span><span class="p">)),</span> <span class="n">depths</span><span class="p">,</span> <span class="s1">&#39;o-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">depths</span><span class="p">)),</span> <span class="n">depths</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Station Index&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Water Depth (m)&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Bathymetric Profile&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;custom_cruise_analysis.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated custom analysis plot: custom_cruise_analysis.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="data-integration-examples">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Data Integration Examples</a><a class="headerlink" href="#data-integration-examples" title="Link to this heading"></a></h2>
<section id="pangaea-data-integration">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">PANGAEA Data Integration</a><a class="headerlink" href="#pangaea-data-integration" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.pangaea</span><span class="w"> </span><span class="kn">import</span> <span class="n">PangaeaStationProcessor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Process PANGAEA data</span>
<span class="n">pangaea_processor</span> <span class="o">=</span> <span class="n">PangaeaStationProcessor</span><span class="p">()</span>

<span class="c1"># Load historical data from DOI list</span>
<span class="n">doi_file</span> <span class="o">=</span> <span class="s2">&quot;historical_dois.txt&quot;</span>
<span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">doi_file</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">stations_db</span> <span class="o">=</span> <span class="n">pangaea_processor</span><span class="o">.</span><span class="n">process_doi_file</span><span class="p">(</span><span class="n">doi_file</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">stations_db</span><span class="p">)</span><span class="si">}</span><span class="s2"> historical stations&quot;</span><span class="p">)</span>

    <span class="c1"># Convert to DataFrame for analysis</span>
    <span class="n">historical_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">campaign_name</span><span class="p">,</span> <span class="n">campaign_data</span> <span class="ow">in</span> <span class="n">stations_db</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">campaign_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stations&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">historical_data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;campaign&#39;</span><span class="p">:</span> <span class="n">campaign_name</span><span class="p">,</span>
                <span class="s1">&#39;station&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;latitude&#39;</span><span class="p">),</span>
                <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;longitude&#39;</span><span class="p">),</span>
                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">),</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">station</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
            <span class="p">})</span>

    <span class="n">historical_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">historical_data</span><span class="p">)</span>

    <span class="c1"># Compare with current cruise plan</span>
    <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>
    <span class="n">current_lats</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
    <span class="n">current_lons</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="c1"># Find historical stations near current planned locations</span>
    <span class="n">tolerance</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># degrees</span>
    <span class="n">nearby_historical</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">hist_station</span> <span class="ow">in</span> <span class="n">historical_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">curr_lat</span><span class="p">,</span> <span class="n">curr_lon</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">current_lats</span><span class="p">,</span> <span class="n">current_lons</span><span class="p">):</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="p">((</span><span class="n">hist_station</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">curr_lat</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                       <span class="p">(</span><span class="n">hist_station</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">curr_lon</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
            <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="n">nearby_historical</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;historical_campaign&#39;</span><span class="p">:</span> <span class="n">hist_station</span><span class="p">[</span><span class="s1">&#39;campaign&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;historical_station&#39;</span><span class="p">:</span> <span class="n">hist_station</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;distance_degrees&#39;</span><span class="p">:</span> <span class="n">distance</span><span class="p">,</span>
                    <span class="s1">&#39;planned_location&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">curr_lat</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">°N, </span><span class="si">{</span><span class="n">curr_lon</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">°E&quot;</span>
                <span class="p">})</span>

    <span class="k">if</span> <span class="n">nearby_historical</span><span class="p">:</span>
        <span class="n">nearby_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">nearby_historical</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">nearby_df</span><span class="p">)</span><span class="si">}</span><span class="s2"> historical stations near planned locations:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">nearby_df</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="custom-workflow-automation">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Custom Workflow Automation</a><a class="headerlink" href="#custom-workflow-automation" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.scheduler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_cruise_schedule</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.html_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_html_from_timeline</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.netcdf_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_netcdf</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="k">def</span><span class="w"> </span><span class="nf">automated_cruise_processing</span><span class="p">(</span><span class="n">input_file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Complete automated processing workflow for a cruise configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Setup logging</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="c1"># Create output directory</span>
    <span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Load cruise</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading cruise configuration: </span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

        <span class="c1"># Generate timeline</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating cruise timeline...&quot;</span><span class="p">)</span>
        <span class="n">timeline</span> <span class="o">=</span> <span class="n">generate_cruise_schedule</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span>

        <span class="c1"># Generate outputs</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># HTML schedule</span>
        <span class="n">html_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">_schedule.html&quot;</span>
        <span class="n">generate_html_from_timeline</span><span class="p">(</span><span class="n">timeline</span><span class="p">,</span> <span class="n">html_file</span><span class="p">)</span>
        <span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">html_file</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated HTML schedule: </span><span class="si">{</span><span class="n">html_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># NetCDF data</span>
        <span class="n">netcdf_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">_data.nc&quot;</span>
        <span class="n">generate_netcdf</span><span class="p">(</span><span class="n">timeline</span><span class="p">,</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">netcdf_file</span><span class="p">)</span>
        <span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;netcdf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">netcdf_file</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated NetCDF data: </span><span class="si">{</span><span class="n">netcdf_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Copy configuration</span>
        <span class="n">config_copy</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">_config.yaml&quot;</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">config_copy</span><span class="p">)</span>
        <span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;config&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config_copy</span>

        <span class="c1"># Generate summary report</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="p">,</span>
            <span class="s1">&#39;total_stations&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">),</span>
            <span class="s1">&#39;estimated_duration_hours&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration_hours&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">timeline</span><span class="p">),</span>
            <span class="s1">&#39;output_files&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
            <span class="s1">&#39;processing_status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span>
        <span class="p">}</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing completed successfully for </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summary</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing failed for </span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="n">input_file</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
            <span class="s1">&#39;processing_status&#39;</span><span class="p">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>

<span class="c1"># Example usage</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Process multiple cruise configurations</span>
    <span class="n">cruise_files</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;input_cruises/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">cruise_file</span> <span class="ow">in</span> <span class="n">cruise_files</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;processed_cruises&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="n">cruise_file</span><span class="o">.</span><span class="n">stem</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">automated_cruise_processing</span><span class="p">(</span><span class="n">cruise_file</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="c1"># Print summary</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Processed </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2"> cruise configurations:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;processing_status&#39;</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;cruise_name&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;estimated_duration_hours&#39;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> hours&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;Unknown error&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="integration-with-external-tools">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Integration with External Tools</a><a class="headerlink" href="#integration-with-external-tools" title="Link to this heading"></a></h2>
<section id="jupyter-notebook-integration">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Jupyter Notebook Integration</a><a class="headerlink" href="#jupyter-notebook-integration" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example Jupyter notebook cell for interactive cruise analysis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ipywidgets</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">widgets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.interactive.station_picker</span><span class="w"> </span><span class="kn">import</span> <span class="n">StationPicker</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Interactive file selector</span>
<span class="n">cruise_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">))</span>
<span class="n">file_selector</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cruise_files</span><span class="p">],</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Cruise file:&#39;</span>
<span class="p">)</span>

<span class="c1"># Analysis function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">analyze_cruise</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Display basic info</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cruise: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Plot station map</span>
    <span class="n">stations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">lats</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
    <span class="n">lons</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stations: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Interactive widget</span>
<span class="n">interactive_plot</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">analyze_cruise</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">file_selector</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="gis-integration-example">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">GIS Integration Example</a><a class="headerlink" href="#gis-integration-example" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.kml_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_kml</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">LineString</span>

<span class="c1"># Load cruise and generate KML</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="s2">&quot;cruise.yaml&quot;</span><span class="p">)</span>
<span class="n">kml_file</span> <span class="o">=</span> <span class="n">generate_kml</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">,</span> <span class="s2">&quot;cruise_track.kml&quot;</span><span class="p">)</span>

<span class="c1"># Create GeoDataFrame for GIS analysis</span>
<span class="n">stations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<span class="c1"># Station points</span>
<span class="n">station_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
<span class="n">stations_gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">],</span>
    <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">operation_type</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">],</span>
    <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">latitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">],</span>
    <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
<span class="p">},</span> <span class="n">geometry</span><span class="o">=</span><span class="n">station_points</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">)</span>

<span class="c1"># Cruise track</span>
<span class="n">track_coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">s</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">]</span>
<span class="n">track_line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">track_coords</span><span class="p">)</span>
<span class="n">track_gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span>
    <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="p">]</span>
<span class="p">},</span> <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">track_line</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">)</span>

<span class="c1"># Save as shapefiles for GIS use</span>
<span class="n">stations_gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;cruise_stations.shp&quot;</span><span class="p">)</span>
<span class="n">track_gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;cruise_track.shp&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated GIS files:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;- cruise_stations.shp (station points)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;- cruise_track.shp (cruise track)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">kml_file</span><span class="si">}</span><span class="s2"> (Google Earth KML)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="best-practices">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Best Practices</a><a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="error-handling">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Error Handling</a><a class="headerlink" href="#error-handling" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">CruiseConfigurationError</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="c1"># Setup logging for debugging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">safe_cruise_loading</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Safely load a cruise configuration with comprehensive error handling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully loaded cruise: </span><span class="si">{</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cruise</span>

    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration file not found: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation error in </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error loading </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="c1"># Usage with error checking</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">safe_cruise_loading</span><span class="p">(</span><span class="s2">&quot;my_cruise.yaml&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">cruise</span><span class="p">:</span>
    <span class="c1"># Proceed with processing</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span><span class="si">}</span><span class="s2"> stations&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to load cruise configuration&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="memory-management">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Memory Management</a><a class="headerlink" href="#memory-management" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gc</span>

<span class="k">def</span><span class="w"> </span><span class="nf">memory_efficient_batch_processing</span><span class="p">(</span><span class="n">cruise_files</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process multiple cruises with careful memory management.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cruise_file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cruise_files</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_files</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cruise_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Load and process cruise</span>
        <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">cruise_file</span><span class="p">)</span>

        <span class="c1"># Extract only needed data</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cruise_name</span><span class="p">,</span>
            <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">),</span>
            <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">cruise_file</span>
        <span class="p">}</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span>

        <span class="c1"># Explicit cleanup for large datasets</span>
        <span class="k">del</span> <span class="n">cruise</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

        <span class="c1"># Progress indicator</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> configurations...&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
</section>
<section id="performance-optimization">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Performance Optimization</a><a class="headerlink" href="#performance-optimization" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.bathymetry</span><span class="w"> </span><span class="kn">import</span> <span class="n">BathymetryManager</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Efficient batch depth lookups</span>
<span class="k">def</span><span class="w"> </span><span class="nf">batch_depth_lookup</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">bathymetry_manager</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Efficiently look up depths for multiple coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bathymetry_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bathymetry_manager</span> <span class="o">=</span> <span class="n">BathymetryManager</span><span class="p">()</span>

    <span class="c1"># Pre-allocate array for results</span>
    <span class="n">depths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">))</span>

    <span class="c1"># Batch processing</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
        <span class="n">depths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bathymetry_manager</span><span class="o">.</span><span class="n">get_depth</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">depths</span>

<span class="c1"># Example usage</span>
<span class="n">station_coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">60.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">30.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">61.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">31.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">62.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">32.0</span><span class="p">)]</span>
<span class="n">depths</span> <span class="o">=</span> <span class="n">batch_depth_lookup</span><span class="p">(</span><span class="n">station_coords</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Depths: </span><span class="si">{</span><span class="n">depths</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This comprehensive API documentation provides the foundation for integrating CruisePlan into scientific workflows, building custom tools, and extending functionality for specific research needs.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>