

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Oceanographic Cruise Planning System: Complete Project Specification v2 &mdash; CruisePlan v0.1 v0.1.0.post1.dev14</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=393fce2e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c35c452a"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CruisePlan v0.1
              <img src="_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CLI Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#workflow-paths">Workflow Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#troubleshooting">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli_reference.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml_reference.html">YAML Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation_types.html">Operation Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculations.html">Calculation Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="units_and_defaults.html">Units and defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_ports.html">Port list</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_formats.html">Output formats</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/CONTRIBUTING.md">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Development Roadmap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CruisePlan v0.1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Oceanographic Cruise Planning System: Complete Project Specification v2</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="oceanographic-cruise-planning-system-complete-project-specification-v2">
<h1>Oceanographic Cruise Planning System: Complete Project Specification v2<a class="headerlink" href="#oceanographic-cruise-planning-system-complete-project-specification-v2" title="Link to this heading">ïƒ</a></h1>
<section id="executive-summary">
<h2>ğŸ“‹ Executive Summary<a class="headerlink" href="#executive-summary" title="Link to this heading">ïƒ</a></h2>
<section id="purpose-vision">
<h3>Purpose &amp; Vision<a class="headerlink" href="#purpose-vision" title="Link to this heading">ïƒ</a></h3>
<p>The Oceanographic Cruise Planning System is a comprehensive software tool for planning research cruises. It serves oceanographic researchers who need to:</p>
<ul class="simple">
<li><p><strong>Plan station distributions</strong> along transects with optimal spacing</p></li>
<li><p><strong>Calculate operational timings</strong> for CTD profiles, mooring operations, and transfers</p></li>
<li><p><strong>Integrate past cruise locations</strong> from PANGAEA database for context</p></li>
<li><p><strong>Generate professional outputs</strong> for cruise proposals and operational planning</p></li>
<li><p><strong>Manage complex multi-area expeditions</strong> with discrete working phases</p></li>
</ul>
</section>
<section id="target-users">
<h3>Target Users<a class="headerlink" href="#target-users" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Oceanographic researchers</strong> planning research expeditions</p></li>
<li><p><strong>Chief scientists</strong> designing station layouts and schedules</p></li>
</ul>
</section>
<section id="core-value-proposition">
<h3>Core Value Proposition<a class="headerlink" href="#core-value-proposition" title="Link to this heading">ïƒ</a></h3>
<p>Transform cruise planning from manual processes to an integrated, interactive, and automated workflow that produces publication-ready outputs while ensuring operational efficiency and scientific rigor.</p>
</section>
</section>
<hr class="docutils" />
<section id="user-experience-requirements">
<h2>ğŸ¯ User Experience Requirements<a class="headerlink" href="#user-experience-requirements" title="Link to this heading">ïƒ</a></h2>
<section id="primary-user-workflows">
<h3>Primary User Workflows<a class="headerlink" href="#primary-user-workflows" title="Link to this heading">ïƒ</a></h3>
<section id="interactive-station-selection-workflow">
<h4>1. Interactive Station Selection Workflow<a class="headerlink" href="#interactive-station-selection-workflow" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Intent: &quot;I need to place oceanographic stations along specific transects with bathymetry context&quot;

Required Experience:
â”œâ”€â”€ Load bathymetry data for region of interest
â”œâ”€â”€ Display interactive map with oceanographic depth contours
â”œâ”€â”€ Enable click-to-place station functionality
â”œâ”€â”€ Show past PANGAEA campaign metadata (locations) as context
â”œâ”€â”€ Provide real-time coordinate and depth feedback
â”œâ”€â”€ Export station list to validated YAML format
â””â”€â”€ Integrate with cruise scheduling system
</pre></div>
</div>
<p><strong>User Interface Requirements:</strong></p>
<ul class="simple">
<li><p><strong>Three-panel layout</strong>: Campaign selection (left), map with station picking (center), controls (right)</p></li>
<li><p><strong>Interactive bathymetry</strong>: Mercator-corrected aspect ratio, oceanographic contour intervals</p></li>
<li><p><strong>Keyboard shortcuts</strong>: Professional navigation modes (keys to change mode, right and left click options)</p></li>
<li><p><strong>Real-time feedback</strong>: Coordinate display, depth lookup, station naming</p></li>
<li><p><strong>Visual indicators</strong>: Current mode, selected campaigns, placed stations</p></li>
</ul>
</section>
<section id="cruise-schedule-generation-workflow">
<h4>2. Cruise Schedule Generation Workflow<a class="headerlink" href="#cruise-schedule-generation-workflow" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Intent: &quot;I have station positions and need a complete cruise schedule with timings&quot;

Required Experience:
â”œâ”€â”€ Parse YAML cruise configuration with validation
â”œâ”€â”€ Calculate CTD profile durations based on depth
â”œâ”€â”€ Compute transfer times between operations
â”œâ”€â”€ Optimize operational sequences within legs
â”œâ”€â”€ Generate multiple output formats simultaneously
â””â”€â”€ Provide comprehensive timing and logistics summary
</pre></div>
</div>
<p><strong>Output Requirements:</strong></p>
<ul class="simple">
<li><p><strong>HTML</strong>: Table view for the whole cruise, each leg, and each operation type</p></li>
<li><p><strong>LaTeX tables</strong>: Professional formatting for cruise proposals with tables of â€œWorking area, stations and profilesâ€, â€œwork days at seaâ€ and â€œstation listâ€</p></li>
<li><p><strong>CSV spreadsheets</strong>: Editable formats for operational planning</p></li>
<li><p><strong>KML files</strong>: Google Earth visualization with cruise tracks</p></li>
<li><p><strong>NetCDF datasets</strong>: Scientific data formats for onward use and analysis</p></li>
</ul>
</section>
<section id="data-integration-workflow">
<h4>3. Data Integration Workflow<a class="headerlink" href="#data-integration-workflow" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Intent: &quot;I want to enhance my cruise plan with bathymetry and historical context&quot;

Required Experience:
â”œâ”€â”€ Import PANGAEA DOI lists for historical metadata (station locations)
â”œâ”€â”€ Process and cache oceanographic campaign datasets
â”œâ”€â”€ Validate station depths against ETOPO bathymetry
â”œâ”€â”€ Add navigational coordinates in multiple formats
â””â”€â”€ Enrich YAML configurations with computed data
</pre></div>
</div>
</section>
<section id="robust-coordinate-and-unit-conversion">
<h4>4. Robust coordinate and unit conversion<a class="headerlink" href="#robust-coordinate-and-unit-conversion" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Intent: &quot;I need to plan research with decimal degrees and kilometers, but ship operations are in degrees decimal minutes and nautical miles&quot;

Required Experience:
â”œâ”€â”€ Robust conversions between kilometers and nautical miles
â”œâ”€â”€ Use of ship speed to determine duration given distance
â”œâ”€â”€ Round trip conversion between decimal degrees and degrees-decimal minutes in multiple formats (unicode, Latex, HTML, etc)
â””â”€â”€ Meticulous accounting for units throughout
</pre></div>
</div>
</section>
<section id="enhanced-cli-warning-display">
<h4>5. Enhanced CLI Warning Display<a class="headerlink" href="#enhanced-cli-warning-display" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>User Intent: &quot;I need clear, actionable warnings without technical noise when validating cruise configurations&quot;

Required Experience:
â”œâ”€â”€ Clean, formatted warning messages across all CLI commands
â”œâ”€â”€ Contextual error information without raw Pydantic tracebacks
â”œâ”€â”€ Consistent warning formatting standards for better readability
â”œâ”€â”€ Actionable guidance for resolving common validation issues
â””â”€â”€ Professional error display suitable for operational use
</pre></div>
</div>
<p><strong>CLI Warning Display Requirements:</strong></p>
<ul class="simple">
<li><p><strong>Clean Format</strong>: Human-readable warning messages without technical stack traces</p></li>
<li><p><strong>Consistent Standards</strong>: Uniform formatting across <code class="docutils literal notranslate"><span class="pre">validate</span></code>, <code class="docutils literal notranslate"><span class="pre">enrich</span></code>, <code class="docutils literal notranslate"><span class="pre">schedule</span></code>, and <code class="docutils literal notranslate"><span class="pre">stations</span></code> commands</p></li>
<li><p><strong>Contextual Information</strong>: Include relevant details (line numbers, field names, suggested fixes)</p></li>
<li><p><strong>Actionable Guidance</strong>: Clear instructions for resolving validation issues</p></li>
<li><p><strong>Professional Presentation</strong>: Suitable for operational cruise planning environments</p></li>
</ul>
<p><strong>Implementation Standards:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Enhanced Warning Format (Target)
WARNING: Station &#39;CTD_001&#39; validation issues:
  - Missing operation_type field (line 45)
    â†’ Add: operation_type: &quot;CTD&quot;
  - Invalid depth value: -9999.0 (line 47)  
    â†’ Use: depth: &lt;positive value&gt; or remove for auto-calculation

# Instead of Raw Pydantic Format (Current)
ValidationError: 1 validation error for StationDefinition
stations -&gt; 0 -&gt; operation_type
  field required (type=value_error.missing)
</pre></div>
</div>
<p><strong>Benefits:</strong></p>
<ul class="simple">
<li><p><strong>Reduced Learning Curve</strong>: Non-technical users can understand and fix validation issues</p></li>
<li><p><strong>Faster Troubleshooting</strong>: Clear guidance eliminates guesswork</p></li>
<li><p><strong>Professional Output</strong>: Suitable for operational cruise planning environments</p></li>
<li><p><strong>Consistent Experience</strong>: Uniform warning format across all commands</p></li>
</ul>
</section>
</section>
</section>
<hr class="docutils" />
<section id="core-architecture-specifications">
<h2>ğŸ—ï¸ Core Architecture Specifications<a class="headerlink" href="#core-architecture-specifications" title="Link to this heading">ïƒ</a></h2>
<section id="decision-hierarchy-system-logic-flow">
<h3>Decision Hierarchy (System Logic Flow)<a class="headerlink" href="#decision-hierarchy-system-logic-flow" title="Link to this heading">ïƒ</a></h3>
<p>When calculating the Cruise Timeline and Path, the system follows this strict hierarchy of constraints:</p>
<ol class="arabic simple">
<li><p><strong>Global Anchors (The â€œBookendsâ€):</strong></p>
<ul class="simple">
<li><p>The cruise <strong>MUST</strong> start at <code class="docutils literal notranslate"><span class="pre">departure_port</span></code> and end at <code class="docutils literal notranslate"><span class="pre">arrival_port</span></code></p></li>
<li><p>The first science action <strong>MUST</strong> be <code class="docutils literal notranslate"><span class="pre">first_waypoint</span></code> (formerly <code class="docutils literal notranslate"><span class="pre">first_station</span></code>) - uses entry point from operation abstraction</p></li>
<li><p>The last science action <strong>MUST</strong> be <code class="docutils literal notranslate"><span class="pre">last_waypoint</span></code> (formerly <code class="docutils literal notranslate"><span class="pre">last_station</span></code>) - uses exit point from operation abstraction</p></li>
<li><p>For time-based strategies, assume departure time of 08:00 local time, â€œdaytimeâ€ is 08:00 - 20:00</p></li>
</ul>
</li>
<li><p><strong>Leg Sequence (The â€œChaptersâ€):</strong></p>
<ul class="simple">
<li><p>Legs are executed strictly in the order listed in the YAML</p></li>
<li><p>The system moves from the exit point of Leg N to the entry point of Leg N+1 using the operation abstraction interface</p></li>
</ul>
</li>
<li><p><strong>Cluster Constraints (The â€œParagraphsâ€):</strong></p>
<ul class="simple">
<li><p><strong>Contiguity:</strong> The ship enters a Cluster and completes ALL tasks inside before leaving (unless <code class="docutils literal notranslate"><span class="pre">--flatten-groups</span></code> is used)</p></li>
<li><p><strong>Internal Order:</strong></p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">sequence</span></code> is defined â†’ Follow it exactly</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">strategy:</span> <span class="pre">sequential</span></code> â†’ Finish List A, then List B</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">strategy:</span> <span class="pre">day_night_split</span></code> â†’ Interleave based on time constraints</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">strategy:</span> <span class="pre">spatial_interleaved</span></code> â†’ Solve TSP for shortest path</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Atomic Operations (The â€œWordsâ€):</strong></p>
<ul class="simple">
<li><p><strong>PointOps:</strong> Zero spatial displacement, only temporal (duration)</p></li>
<li><p><strong>LineOps:</strong> Has internal geometry. The optimizer creates a â€œTunnelâ€ constraint - you must travel Start to End without performing other tasks inside</p></li>
</ul>
</li>
</ol>
</section>
<section id="spatial-operations-hierarchy">
<h3>Spatial Operations Hierarchy<a class="headerlink" href="#spatial-operations-hierarchy" title="Link to this heading">ïƒ</a></h3>
<p>The system organizes all cruise activities using a Composite Pattern that distinguishes between atomic physical actions and logical grouping containers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Cruise (Top-level container)
â””â”€â”€ Legs (Discrete working areas/time periods)
    â””â”€â”€ Operations (Spatial activities)
        â”œâ”€â”€ Point Operations (Atomic: Zero-displacement activities)
        â”‚   â”œâ”€â”€ CTD Profiles (Ship status: Dynamic Positioning)
        â”‚   â”œâ”€â”€ Mooring Ops (Ship status: Station Keeping)
        â”‚   â””â”€â”€ Waypoints (Ship status: Navigation only)
        â”‚
        â”œâ”€â”€ Line Operations (Atomic: Continuous displacement activities)
        â”‚   â”œâ”€â”€ Transfers (Transit from A to B at cruise speed)
        â”‚   â”œâ”€â”€ Towyo/Trawls (Transit from A to B at working speed)
        â”‚   â””â”€â”€ Underway Geophysics (Continuous sampling along path)
        â”‚
        â”œâ”€â”€ Composite Operations (Logical Containers)
        â”‚   â”œâ”€â”€ Sections (Ordered list of Points along a geometric line)
        â”‚   â””â”€â”€ Observatories/Clusters (Spatially related mix of CTDs &amp; Moorings)
        â”‚
        â””â”€â”€ Area Operations (Regional activities - defined by a polygon)
            â”œâ”€â”€ Grid Surveys (systematic area coverage)
            â””â”€â”€ Area Activities (diffuse regional work)
</pre></div>
</div>
</section>
<section id="spatial-base-classes">
<h3>Spatial Base Classes<a class="headerlink" href="#spatial-base-classes" title="Link to this heading">ïƒ</a></h3>
<p><strong>PointOperation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activities occurring at fixed geographic coordinates</span>
<span class="c1"># Examples: CTD profiles, mooring deployments, calibrations</span>
<span class="c1"># Attributes: latitude, longitude, depth, duration, time_of_day (e.g. daytime for moorings)</span>
<span class="c1"># Duration calculation: depth-based (profiles) or user-defined (moorings)</span>
</pre></div>
</div>
<p><strong>LineOperation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activities involving continuous vessel movement from Start to End</span>
<span class="c1"># Crucial distinction: The operation IS the movement</span>
<span class="c1"># Examples: Ship transfers, towyo operations, trawling</span>
<span class="c1"># Attributes: start_pos, end_pos, route, distance, speed_mode (transit vs working)</span>
<span class="c1"># Duration calculation: distance / speed</span>
</pre></div>
</div>
<p><strong>Cluster</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Logical containers for grouping related PointOperations</span>
<span class="c1"># Examples: &quot;53N Section&quot; (20 CTDs), &quot;OSNAP Array&quot; (Mixed CTDs + Moorings)</span>
<span class="c1"># Attributes:</span>
<span class="c1">#   - stations: List[str] (references to station names)</span>
<span class="c1">#   - strategy: Enum (SEQUENTIAL, INTERLEAVED, DAY_NIGHT_SPLIT)</span>
<span class="c1">#</span>
<span class="c1"># Function:</span>
<span class="c1">#   Calculates total duration not just by summing children, but by</span>
<span class="c1">#   solving the internal routing logic (e.g., optimizing Day-Ops vs Night-Ops)</span>
</pre></div>
</div>
<p><strong>AreaOperation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activities within defined polygonal regions</span>
<span class="c1"># Examples: grid surveys, area monitoring, search patterns</span>
<span class="c1"># Attributes: boundary_polygon, area, sampling_density</span>
<span class="c1"># Duration calculation: area coverage models or user-defined</span>
</pre></div>
</div>
</section>
<section id="entry-exit-point-abstraction-architecture">
<h3>Entry/Exit Point Abstraction Architecture<a class="headerlink" href="#entry-exit-point-abstraction-architecture" title="Link to this heading">ïƒ</a></h3>
<p><strong>Purpose</strong>: Provide a unified, type-agnostic interface for routing calculations across all operation types.</p>
<p><strong>Problem Solved</strong>: Previously, routing logic needed operation-specific code to determine entry and exit points for different operation types. This created maintenance burden and coupling between routing algorithms and operation implementations.</p>
<p><strong>Abstraction Methods</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unified interface implemented by all operation types</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Operation</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the geographic coordinate where this operation begins&quot;&quot;&quot;</span>
        <span class="k">pass</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the geographic coordinate where this operation ends&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Operation Type Abstractions</strong>:</p>
<p><strong>Point Operations</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># Station coordinates</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># Same point for entry and exit</span>
</pre></div>
</div>
<p><strong>Line Operations</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># First waypoint in route</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Last waypoint in route</span>
</pre></div>
</div>
<p><strong>Area Operations</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_center_point</span><span class="p">()</span>  <span class="c1"># Calculated center of polygon</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_center_point</span><span class="p">()</span>  <span class="c1"># Same center point for entry/exit</span>
</pre></div>
</div>
<p><strong>Cluster Operations</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_entry_point</span><span class="p">()</span>  <span class="c1"># First operation entry</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">get_exit_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Coordinate</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_exit_point</span><span class="p">()</span>  <span class="c1"># Last operation exit</span>
</pre></div>
</div>
<p><strong>Routing Calculation Improvements</strong>:</p>
<ul class="simple">
<li><p><strong>Type-Agnostic Distance Calculations</strong>: Routing algorithms use <code class="docutils literal notranslate"><span class="pre">get_entry_point()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_exit_point()</span></code> without knowing operation type</p></li>
<li><p><strong>Future-Proof Architecture</strong>: New operation types only need to implement the abstraction interface</p></li>
<li><p><strong>Cleaner Code</strong>: Eliminates operation-specific conditional logic in routing calculations</p></li>
<li><p><strong>Consistent Behavior</strong>: All operations provide predictable entry/exit coordinates for scheduling</p></li>
</ul>
<p><strong>Benefits</strong>:</p>
<ul class="simple">
<li><p><strong>Future-Proof</strong>: Adding new operation types requires only implementing the abstraction interface</p></li>
<li><p><strong>Type-Agnostic</strong>: Routing algorithms work with any operation type without modification</p></li>
<li><p><strong>Cleaner Code</strong>: Eliminates complex conditional logic based on operation type</p></li>
<li><p><strong>Maintainable</strong>: Centralized interface reduces coupling between routing and operation implementations</p></li>
<li><p><strong>Testable</strong>: Abstraction interface can be easily mocked for unit testing</p></li>
</ul>
<p><strong>Developer Note: The â€œHybridâ€ Pattern</strong></p>
<p>The parsing engine must support a â€œHybridâ€ list structure. A list of moorings in a cluster may contain <strong>Strings</strong> (references) AND <strong>Dictionaries</strong> (inline definitions).</p>
<ul class="simple">
<li><p><strong>If type is String:</strong> Look up in Catalog</p></li>
<li><p><strong>If type is Dict:</strong> Validate schema and use as-is</p></li>
</ul>
<p>This allows the user to catalog their major assets while quickly adding â€œone-offâ€ tasks inline without cluttering the global catalog.</p>
</section>
<section id="leg-based-organization">
<h3>Leg-Based Organization<a class="headerlink" href="#leg-based-organization" title="Link to this heading">ïƒ</a></h3>
<p><strong>Purpose</strong>: Enable complex multi-area expeditions while maintaining simple single-leg default</p>
<p><strong>Structure:</strong> The legs list contains discrete working phases. Within a leg, users can define composite groups to manage complex localized activities alongside standard sections.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Single-leg cruise (default - transparent to user)</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Simple_Cruise_2028</span>

<span class="c1"># Point Operations (featureType: point)</span>
<span class="nt">stations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">        </span><span class="c1"># CTD profiles, water sampling, calibrations, mooring deployments and recoveries (as stations with operation_type: &quot;mooring&quot; and action: &quot;deployment&quot;/&quot;recovery&quot;)</span>

<span class="c1"># Line Operations (featureType: trajectory) </span>
<span class="nt">surveys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">         </span><span class="c1"># Scientific operations along paths (ADCP, towing, bathymetry)</span>

<span class="c1"># Area Operations (featureType: trajectory or specialized)</span>
<span class="nt">area_surveys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">    </span><span class="c1"># Systematic coverage patterns, grid surveys</span>

<span class="c1"># Pure navigation (schedule file only)</span>
<span class="nt">transits</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w">        </span><span class="c1"># Non-scientific vessel movement between operations</span>

<span class="c1"># Multi-leg cruise with enhanced operation types</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Complex_Expedition_2028</span>
<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Irminger_Sea_Operations&quot;</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">water</span><span class="nv"> </span><span class="s">mooring</span><span class="nv"> </span><span class="s">recoveries&quot;</span>

<span class="w">    </span><span class="c1"># Point Operations: Fixed location scientific activities</span>
<span class="w">    </span><span class="nt">stations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span>
<span class="w">        </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.5</span><span class="w">                  </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">        </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.2</span><span class="w">                </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">        </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2800</span><span class="w">                     </span><span class="c1"># Optional. Will use bathymetry if not provided</span>
<span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span><span class="w">                   </span><span class="c1"># Optional. Minutes override for manual timing</span>
<span class="w">        </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">water</span><span class="nv"> </span><span class="s">sampling&quot;</span><span class="w">  </span><span class="c1"># Optional</span>
<span class="w">        </span>
<span class="w">    </span><span class="c1"># Moorings are now included in the stations list with operation_type: &quot;mooring&quot;</span>
<span class="w">    </span><span class="c1"># Example mooring entry in stations:</span>
<span class="w">    </span><span class="c1"># - name: &quot;MOOR_K7&quot;</span>
<span class="w">    </span><span class="c1">#   operation_type: &quot;mooring&quot;</span>
<span class="w">    </span><span class="c1">#   action: &quot;recovery&quot; </span>
<span class="w">    </span><span class="c1">#   latitude: 59.8</span>
<span class="w">    </span><span class="c1">#   longitude: -39.5</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recovery&quot;</span><span class="w">              </span><span class="c1"># Required: &quot;deployment&quot; or &quot;recovery&quot;</span>
<span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">180</span><span class="w">                   </span><span class="c1"># Required. Minutes for mooring operations</span>
<span class="w">        </span><span class="nt">equipment</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADCP</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">T/S</span><span class="nv"> </span><span class="s">chain&quot;</span><span class="w">   </span><span class="c1"># Optional</span>

<span class="w">    </span><span class="c1"># Line Operations: Scientific operations along defined paths</span>
<span class="w">    </span><span class="nt">surveys</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADCP_Transect_A&quot;</span>
<span class="w">        </span><span class="nt">operation_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;underway&quot;</span><span class="w">      </span><span class="c1"># Required: &quot;underway&quot; or &quot;towing&quot;</span>
<span class="w">        </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADCP&quot;</span><span class="w">                  </span><span class="c1"># Required: ADCP, bathymetry, thermosalinograph, etc.</span>
<span class="w">        </span><span class="nt">route</span><span class="p">:</span><span class="w">                          </span><span class="c1"># Required: Start and end points</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.5</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">        </span><span class="nt">vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.0</span><span class="w">               </span><span class="c1"># Optional. Knots, overrides default</span>
<span class="w">        </span>
<span class="w">    </span><span class="c1"># Area Operations: Systematic coverage patterns</span>
<span class="w">    </span><span class="nt">area_surveys</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Grid_Survey_Alpha&quot;</span>
<span class="w">        </span><span class="nt">pattern_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;grid_survey&quot;</span><span class="w">     </span><span class="c1"># Required: grid_survey, systematic_mapping, etc.</span>
<span class="w">        </span><span class="nt">boundary</span><span class="p">:</span><span class="w">                       </span><span class="c1"># Required: Polygon vertices (closed)</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.5</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-39.0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.5</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>

<span class="w">    </span><span class="c1"># Pure Navigation: Non-scientific vessel movements</span>
<span class="w">    </span><span class="nt">transits</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Transit_to_Area&quot;</span>
<span class="w">        </span><span class="nt">route</span><span class="p">:</span><span class="w">                          </span><span class="c1"># Required: Navigation path</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">59.0</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-42.0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-40.0</span>
<span class="w">        </span><span class="nt">vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12.0</span><span class="w">              </span><span class="c1"># Optional. Knots</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;53N_Observatory_Work&quot;</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mixed</span><span class="nv"> </span><span class="s">operations</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">Day/Night</span><span class="nv"> </span><span class="s">constraints&quot;</span>

<span class="w">    </span><span class="c1"># Composite: A cluster of mixed activities</span>
<span class="w">    </span><span class="nt">clusters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;53N_Array&quot;</span>
<span class="w">        </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">day_night_split</span><span class="w">    </span><span class="c1"># Tells the scheduler: Day? Pop from moorings, Night? Pop from stations</span>

<span class="w">        </span><span class="c1"># OPTION A: Explicit Mixed Sequence (Manual Control)</span>
<span class="w">        </span><span class="nt">sequence</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;MOOR_K7&quot;</span><span class="w">          </span><span class="c1"># Reference to a Mooring</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="w">          </span><span class="c1"># Reference to a Station  </span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;ADCP_Transect_A&quot;</span><span class="w">  </span><span class="c1"># Reference to a Survey</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Grid_Survey_Alpha&quot;</span><span class="w"> </span><span class="c1"># Reference to an Area Survey</span>

<span class="w">        </span><span class="c1"># OPTION B: Unordered Buckets (Optimization Target)</span>
<span class="w">        </span><span class="c1"># Note: moorings are now included in stations list, not as separate field</span>
<span class="w">        </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">        </span><span class="nt">stations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">CTD_01</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">CTD_02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">CTD_20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">M_53_A</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">M_53_B</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">M_53_C</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">surveys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">ADCP_Line_1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Bathymetry_Survey_2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">area_surveys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Grid_Alpha</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Systematic_Mapping_Beta</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="controlled-vocabulary">
<h3>Controlled Vocabulary<a class="headerlink" href="#controlled-vocabulary" title="Link to this heading">ïƒ</a></h3>
<p><strong>Mooring Actions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;deployment&quot;</span></code> - Deploy mooring at location</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;recovery&quot;</span></code> - Recover existing mooring</p></li>
</ul>
<p><strong>Survey Operation Types:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;underway&quot;</span></code> - Instruments operating while ship underway (nothing over the side)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;towing&quot;</span></code> - Towed instruments or devices deployed behind vessel</p></li>
</ul>
<p><strong>Survey Actions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ADCP&quot;</span></code> - Acoustic Doppler Current Profiler survey</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;bathymetry&quot;</span></code> - Multibeam or singlebeam seafloor mapping</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;thermosalinograph&quot;</span></code> - Underway temperature and salinity measurement</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;tow_yo&quot;</span></code> - Tow-yo CTD profiling operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;seismic&quot;</span></code> - Seismic reflection/refraction surveys</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;microstructure&quot;</span></code> - Microstructure turbulence profiling</p></li>
</ul>
<p><strong>Area Survey Pattern Types:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;grid_survey&quot;</span></code> - Systematic grid-based coverage</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;systematic_mapping&quot;</span></code> - Structured mapping pattern</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;search_pattern&quot;</span></code> - Search and rescue or target location patterns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;random_sampling&quot;</span></code> - Statistical sampling within defined area</p></li>
</ul>
<p><strong>Benefits:</strong></p>
<ul class="simple">
<li><p><strong>Operational Logic</strong>: Allows grouping of spatially related activities that are operationally distinct</p></li>
<li><p><strong>Temporal Organization</strong>: Sequential phases with different objectives</p></li>
<li><p><strong>Resource Management</strong>: Equipment and personnel allocation by leg or by Cluster</p></li>
<li><p><strong>Risk Assessment</strong>: Isolated evaluation of different cruise components</p></li>
</ul>
<p>If both sequence and lists of moorings, stations are given, and ordered=True, then the sequence will first be execuded followed by the buckets of activites in the order specified.</p>
<p>If both sequence and lists of moorings/stations are given, and ordered=False, then the optimizer will expand all activites to atomic activities and perform a TSP on them.</p>
</section>
</section>
<hr class="docutils" />
<section id="technical-architecture">
<h2>ğŸ”§ Technical Architecture<a class="headerlink" href="#technical-architecture" title="Link to this heading">ïƒ</a></h2>
<section id="module-structure">
<h3>Module Structure<a class="headerlink" href="#module-structure" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cruiseplan/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ operations.py          # Spatial operations hierarchy
â”‚   â”œâ”€â”€ cruise.py             # Top-level cruise container
â”‚   â”œâ”€â”€ leg.py               # Working area organization
â”‚   â””â”€â”€ validation.py        # YAML schema validation
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ bathymetry.py        # ETOPO/GEBCO data handling
â”‚   â”œâ”€â”€ pangaea.py           # Handle positions from past cruises
â”‚   â””â”€â”€ cache.py             # Efficient data caching
â”œâ”€â”€ interactive/
â”‚   â”œâ”€â”€ station_picker.py    # Interactive station placement
â”‚   â”œâ”€â”€ campaign_selector.py # PANGAEA campaign management
â”‚   â””â”€â”€ widgets.py           # Custom matplotlib widgets
â”œâ”€â”€ calculators/
â”‚   â”œâ”€â”€ duration.py          # CTD timing calculations
â”‚   â”œâ”€â”€ distance.py          # Haversine distance calculations
â”‚   â””â”€â”€ routing.py           # Optimal transfer routing
â”œâ”€â”€ output/
â”‚   â”œâ”€â”€ html_generator.py    # Summary table views
â”‚   â”œâ”€â”€ latex_generator.py   # Generate tables for DFG proposals
â”‚   â”œâ”€â”€ map_generator.py     # Cruise track visualization
â”‚   â””â”€â”€ scientific_formats.py # NetCDF/CSV export
â”œâ”€â”€ cli/
â”‚   â”œâ”€â”€ main.py              # Unified command interface
â”‚   â”œâ”€â”€ stations.py          # Interactive station picking
â”‚   â”œâ”€â”€ schedule.py          # Cruise schedule generation
â”‚   â””â”€â”€ enhance.py           # Data enrichment commands
â””â”€â”€ utils/
    â”œâ”€â”€ coordinates.py       # Geographic coordinate handling
    â”œâ”€â”€ units.py            # Unit conversion utilities
    â””â”€â”€ config.py           # Configuration management
</pre></div>
</div>
</section>
<section id="data-flow-architecture">
<h3>Data Flow Architecture<a class="headerlink" href="#data-flow-architecture" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TD
    %% Main Processing Flow
    A[YAML Configuration] --&gt; B[Validation &amp; Parsing]
    B --&gt; C{Split Definitions}

    C --&gt;|Part 1: Definitions| D[Catalog Registry]
    C --&gt;|Part 2: Schedule| E[Raw Schedule Tree]

    D --&gt; F[Reference Resolver]
    E --&gt; F

    F --&gt;|Inject &amp; Validate| G[Resolved Cruise Object]
    G --&gt; H[Leg Organization]
    H --&gt; I[Duration Calculations]
    I --&gt; J[Route Optimization]
    J --&gt; K[Output Generation]

    %% Bathymetry Integration
    L[Bathymetry Data] --&gt; M[Regional Subsetting]
    M --&gt; N[Depth Calculations]
    N --&gt; I

    %% Interactive Flow
    O[PANGAEA Data] --&gt; P[Campaign Processing]
    P --&gt; Q[Interactive Display]
    Q --&gt; R[Station Selection]
    R --&gt; A
</pre></div>
</div>
</section>
<section id="optimization-logic-strategy-matrix">
<h3>Optimization Logic &amp; Strategy Matrix<a class="headerlink" href="#optimization-logic-strategy-matrix" title="Link to this heading">ïƒ</a></h3>
<p>The Route Optimizer uses a hierarchical approach. It respects the â€œContainerâ€ structure of Legs and Clusters unless explicitly overridden. Within a container, behavior is determined by the strategy and ordered attributes.</p>
<p><strong>Strategy Definitions:</strong></p>
<ol class="arabic simple">
<li><p><strong>sequential</strong> (Default)</p>
<ul class="simple">
<li><p>Behavior: Respects the exact order defined in the YAML</p></li>
<li><p>Split Lists: If moorings and stations are defined separately, executes all Moorings (in list order) followed by all Stations (in list order)</p></li>
<li><p>Use Case: Standard transects where geometry dictates the sequence</p></li>
</ul>
</li>
<li><p><strong>day_night_split</strong> (The â€œZipperâ€)</p>
<ul class="simple">
<li><p>Behavior: Preserves the internal order of each individual list but interleaves them based on temporal constraints</p></li>
<li><p>Logic: The system maintains two parallel queues. It checks the clock and pops the next item from the queue that matches the current light conditions (Day=Moorings, Night=Stations)</p></li>
<li><p>Constraint: It never looks ahead. It must finish Mooring[0] before considering Mooring[1]</p></li>
</ul>
</li>
<li><p><strong>spatial_interleaved</strong> (The â€œConstrained TSPâ€)</p>
<ul class="simple">
<li><p>Behavior: Ignores list order. Merges all defined operations into a â€œCloud of Tasksâ€ and solves the Traveling Salesman Problem (TSP) to minimize total distance</p></li>
<li><p>Constraint - Point Operations: Treated as standard nodes (Lat/Lon)</p></li>
<li><p>Constraint - Line Operations: Treated as â€œMacro-Nodesâ€ with strict entry/exit ports</p>
<ul>
<li><p>Atomic: The optimizer cannot insert a station inside a transect</p></li>
<li><p>Directionality: If reversible: true, the solver tests both directions (Startâ†’End vs Endâ†’Start). If false, strictly Startâ†’End</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>The â€œUnified Sequenceâ€ Precedence:</strong></p>
<p>When parsing a Cluster, the system looks for operations in this priority order:</p>
<ol class="arabic simple">
<li><p><strong>sequence</strong> List: If present, this is the <strong>Absolute Truth</strong>. It defines a specific mixed order (e.g., M1 â†’ S1 â†’ S2 â†’ M2). The optimizer treats this as ordered: true</p></li>
<li><p><strong>Split Lists</strong> (moorings, stations): If sequence is missing, the system gathers these lists. Their interaction is controlled by the strategy (e.g., zipped or merged)</p></li>
</ol>
<p><strong>Distance Calculation:</strong></p>
<ol class="arabic simple">
<li><p><strong>Transit Segments:</strong></p>
<ul class="simple">
<li><p><strong>Mobilization:</strong> <code class="docutils literal notranslate"><span class="pre">Distance(departure_port,</span> <span class="pre">first_waypoint.get_entry_point())</span></code></p></li>
<li><p><strong>Demobilization:</strong> <code class="docutils literal notranslate"><span class="pre">Distance(last_waypoint.get_exit_point(),</span> <span class="pre">arrival_port)</span></code></p></li>
<li><p><strong>Inter-Operation:</strong> Haversine distance between sequential operation exit/entry points using abstraction interface</p></li>
</ul>
</li>
<li><p><strong>Composite Cluster Distance:</strong></p>
<ul class="simple">
<li><p>If a Cluster contains multiple lists (e.g., <code class="docutils literal notranslate"><span class="pre">moorings</span></code> and <code class="docutils literal notranslate"><span class="pre">stations</span></code>), the calculator treats them as <strong>Sequential Blocks</strong> by default</p></li>
<li><p>Formula: <code class="docutils literal notranslate"><span class="pre">Path(List_A)</span> <span class="pre">+</span> <span class="pre">Transfer(List_A_End</span> <span class="pre">-&gt;</span> <span class="pre">List_B_Start)</span> <span class="pre">+</span> <span class="pre">Path(List_B)</span></code></p></li>
<li><p>Note: This provides the â€œBase Geometric Distanceâ€. Any extra distance incurred by day/night zig-zagging is captured in the <code class="docutils literal notranslate"><span class="pre">maneuver_factor</span></code> (optional global setting) rather than the raw track distance</p></li>
</ul>
</li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="data-model-specifications">
<h2>ğŸ“Š Data Model Specifications<a class="headerlink" href="#data-model-specifications" title="Link to this heading">ïƒ</a></h2>
<section id="yaml-configuration-schema">
<h3>YAML Configuration Schema<a class="headerlink" href="#yaml-configuration-schema" title="Link to this heading">ïƒ</a></h3>
<p>The configuration is divided into two logical parts: the Catalog (definitions of assets/operations) and the Schedule (the organization of work into legs and clusters).</p>
</section>
<section id="part-1-the-catalog-global-definitions">
<h3>Part 1: The Catalog (Global Definitions)<a class="headerlink" href="#part-1-the-catalog-global-definitions" title="Link to this heading">ïƒ</a></h3>
<p>These lists define â€œWhatâ€ exists. Order here does not imply execution order.</p>
<p><strong>Core Cruise Definition</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Global Cruise Parameters</span>
<span class="nt">cruise_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                      </span><span class="c1"># Required: Unique cruise identifier</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                      </span><span class="c1"># Optional: Cruise description</span>
<span class="nt">default_vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">              </span><span class="c1"># Required: Speed in knots</span>
<span class="nt">default_distance_between_stations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w"> </span><span class="c1"># Required: Spacing in km</span>
<span class="nt">calculate_transfer_between_sections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w"> </span><span class="c1"># Required: Auto-transfer calculation</span>
<span class="nt">calculate_depth_via_bathymetry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">  </span><span class="c1"># Required: Bathymetry depth lookup</span>

<span class="c1"># Global timing parameters</span>
<span class="nt">turnaround_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                </span><span class="c1"># Optional: Default profile turnaround (minutes)</span>
<span class="nt">ctd_descent_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">               </span><span class="c1"># Optional: CTD descent speed (m/s)</span>
<span class="nt">ctd_ascent_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                </span><span class="c1"># Optional: CTD ascent speed (m/s)</span>

<span class="c1"># Output Labeling Rules</span>
<span class="c1"># Defines how stations are numbered in final outputs (HTML/LaTeX)</span>
<span class="c1"># Logic: Assigned sequentially based on the final optimized schedule order</span>
<span class="nt">station_label_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">          </span><span class="c1"># Default: &quot;C{:03d}&quot; (Result: C001, C002...)</span>
<span class="nt">mooring_label_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">          </span><span class="c1"># Default: &quot;M{:02d}&quot; (Result: M01, M02 ...)</span>

<span class="c1"># Start information</span>
<span class="nt">start_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">08:00</span><span class="w">                     </span><span class="c1"># Nominal start time, default 09:00 LOCAL</span>
<span class="nt">start_date</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                    </span><span class="c1"># ISO8601 string</span>

<span class="c1"># ---------------------------------------------------------</span>
<span class="c1"># GEOGRAPHIC ANCHORS (The &quot;Bookends&quot; of the Cruise)</span>
<span class="c1"># ---------------------------------------------------------</span>

<span class="c1"># 1. The Ports (Physical Start/End of the ship&#39;s journey)</span>
<span class="nt">departure_port</span><span class="p">:</span>
<span class="w">  </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">         </span><span class="c1"># Required. Decimal degrees (-90 to 90)</span>
<span class="w">  </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">        </span><span class="c1"># Required. Decimal degrees (-180 to 360)</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># e.g. &quot;St. Johns&quot;</span>
<span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">        </span><span class="c1"># e.g. &quot;GMT-3.5&quot;</span>

<span class="nt">arrival_port</span><span class="p">:</span>
<span class="w">  </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">       </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">  </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">      </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># e.g. &quot;Reykjavik&quot;</span>
<span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">        </span><span class="c1"># e.g. &quot;GMT+0&quot;</span>

<span class="c1"># 2. The Scientific Boundaries (The first/last science acts)</span>
<span class="c1"># These define the &quot;Transit to/from Working Area&quot; segments</span>
<span class="c1"># The Optimizer will effectively &quot;Lock&quot; these stations in place</span>
<span class="nt">first_waypoint</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;STN_01_Deep&quot;</span><span class="w">  </span><span class="c1"># Must match a name in the Catalog - routing uses entry point</span>
<span class="nt">last_waypoint</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mooring_K7&quot;</span><span class="w">    </span><span class="c1"># Must match a name in the Catalog - routing uses exit point</span>

<span class="c1"># ---------------------------------------------------------</span>
<span class="c1"># RESOURCE CATALOG</span>
<span class="c1"># Definitions of all potential operations</span>
<span class="c1"># These do not appear in the schedule unless referenced</span>
<span class="c1"># ---------------------------------------------------------</span>

<span class="c1"># Station Definitions</span>
<span class="nt">stations</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                      </span><span class="c1"># Required: ID: e.g., STN01</span>
<span class="w">    </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                 </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">    </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">    </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                      </span><span class="c1"># Optional: Water depth (validated against bathymetry)</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                   </span><span class="c1"># Optional: Override calculated duration</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                   </span><span class="c1"># Optional: Station description</span>
<span class="w">    </span><span class="nt">position_string</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">           </span><span class="c1"># Auto-generated: Degrees + decimal minutes format coordinates &quot;lat string, lon string&quot;</span>

<span class="c1"># Mooring definitions (DEPRECATED - now included in stations list)</span>
<span class="c1"># Moorings are now defined in the stations list with operation_type: &quot;mooring&quot;</span>
<span class="c1"># See stations section above for current schema</span>
<span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deploy|recover&quot;</span><span class="w">          </span><span class="c1"># Required: Operation type (service = deploy+recover)</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                   </span><span class="c1"># Required: Operation duration (minutes)</span>
<span class="w">    </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">                      </span><span class="c1"># Optional: Water depth</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                   </span><span class="c1"># Optional: Mooring description</span>
<span class="w">    </span><span class="nt">equipment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                 </span><span class="c1"># Optional: Equipment description</span>
<span class="w">    </span><span class="nt">lat_str</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                   </span><span class="c1"># Auto-generated: Degrees + decimal minutes format</span>
<span class="w">    </span><span class="nt">lon_str</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>

<span class="c1"># Transit definitions</span>
<span class="nt">transits</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                      </span><span class="c1"># Required: Transit identifier</span>
<span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                   </span><span class="c1"># Optional: Transit description</span>
<span class="w">    </span><span class="nt">route</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span>
<span class="w">          </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-5.0</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">          </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-6.0</span><span class="w">              </span><span class="c1"># Required: List of waypoint coordinates (&quot;lat, lon&quot; in decimal degrees)</span>
<span class="w">    </span><span class="nt">vessel_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">               </span><span class="c1"># Optional: Override default speed</span>
</pre></div>
</div>
<p><strong>Developer Note:</strong> Flexible Coordinate Parsing While the explicit latitude and longitude keys are preferred for readability and safety, the system must support a Flexible Location Model for all spatial objects (Ports, Stations, Moorings).</p>
<p>The parser must accept either:
1. Explicit Keys: latitude: 47.5, longitude: -52.7
2. Legacy String: position: â€œ47.5, -52.7â€
If both are present, the explicit keys take precedence. Values must be parsed as Signed Decimal Degrees (Positive North / Positive East).</p>
</section>
<section id="part-2-the-schedule-legs-clusters">
<h3>Part 2: The Schedule (Legs &amp; Clusters)<a class="headerlink" href="#part-2-the-schedule-legs-clusters" title="Link to this heading">ïƒ</a></h3>
<p>These structures define â€œWhen/Whereâ€ operations happen by referencing the Catalog.</p>
<p><strong>Multi-Leg Structure</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------------------------------------</span>
<span class="c1"># EXECUTION SCHEDULE</span>
<span class="c1"># ---------------------------------------------------------</span>

<span class="nt">legs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                      </span><span class="c1"># e.g., &quot;Irminger Sea&quot;</span>
<span class="w">    </span><span class="c1"># Logic controls</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sequential|spatial_interleaved|day_night_split&quot;</span>
<span class="w">    </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">                 </span><span class="c1"># Default: True. If False, allows optimizer to shuffle</span>

<span class="w">    </span><span class="c1"># 1. EXPLICIT MIXED SEQUENCE (Highest priority)</span>
<span class="w">    </span><span class="c1"># Use this for precise manual control of mixed operation types</span>
<span class="w">    </span><span class="nt">sequence</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Mooring_K7&quot;</span><span class="w">                  </span><span class="c1"># String reference from global catalog</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;STN_001&quot;</span><span class="w">                     </span><span class="c1"># String reference from global catalog</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Transit_Line_A&quot;</span>

<span class="w">    </span><span class="c1"># 2. Category buckets</span>
<span class="w">    </span><span class="c1"># Used if &quot;sequence&quot; is undefined. System applies `strategy` to these</span>
<span class="w">    </span><span class="c1"># Note: moorings are now included in stations list</span>
<span class="w">    </span><span class="nt">stations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;STN_Deep_01&quot;</span><span class="w">             </span><span class="c1"># Reference by ID (includes both stations and moorings)</span>

<span class="w">    </span><span class="c1"># Hybrid Support: You can still define inline if needed</span>
<span class="w">    </span><span class="c1"># (Useful for one-off operations not worth cataloging)</span>
<span class="w">    </span><span class="nt">activities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Unexpected_Calibration&quot;</span>
<span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>

<span class="w">    </span><span class="c1"># Generators (create new stations dynamically)</span>
<span class="w">    </span><span class="nt">generate_transect</span><span class="p">:</span>
<span class="w">      </span><span class="nt">start</span><span class="p">:</span>
<span class="w">            </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">             </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">            </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">      </span><span class="nt">end</span><span class="p">:</span>
<span class="w">            </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">             </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">            </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">      </span><span class="nt">spacing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">      </span><span class="nt">reversible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">         </span><span class="c1"># true</span>

<span class="w">      </span><span class="c1"># Naming logic for Internal IDs</span>
<span class="w">      </span><span class="c1"># Used to generate unique IDs for the system to reference</span>
<span class="w">      </span><span class="c1"># The pattern must contain a placeholder for the index</span>
<span class="w">      </span><span class="c1"># Example: &quot;S1_Stn{:02d}&quot; -&gt; S1_Stn01, S1_Stn02...</span>
<span class="w">      </span><span class="nt">id_pattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">      </span><span class="c1"># Required</span>
<span class="w">      </span><span class="nt">start_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w">        </span><span class="c1"># Optional (default 1)</span>

<span class="w">    </span><span class="c1"># Standard Sections (Simple Lines)</span>
<span class="w">    </span><span class="nt">sections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Standard_Line_A&quot;</span>
<span class="w">        </span><span class="nt">start</span><span class="p">:</span>
<span class="w">            </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">             </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">            </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">        </span><span class="nt">end</span><span class="p">:</span>
<span class="w">            </span><span class="nt">latitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">             </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">            </span><span class="nt">longitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float</span><span class="w">            </span><span class="c1"># Required. Decimal degrees</span>
<span class="w">        </span><span class="nt">distance_between_stations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">        </span><span class="nt">reversible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">     </span><span class="c1"># true</span>
</pre></div>
</div>
<p><strong>Inheritance Logic:</strong></p>
<ol class="arabic simple">
<li><p>Check Leg: Does the specific leg object have the attribute (e.g., vessel_speed) defined?</p></li>
<li><p>Use Leg Value: If yes, use the leg-specific value for all calculations within that leg</p></li>
<li><p>Fallback: If no, traverse up to the Cruise parent object and use the global default</p></li>
<li><p>Error: If neither exists, raise ConfigurationError</p></li>
</ol>
</section>
<section id="validation-rules">
<h3>Validation Rules<a class="headerlink" href="#validation-rules" title="Link to this heading">ïƒ</a></h3>
<p><strong>Required Validations:</strong></p>
<ul class="simple">
<li><p>YAML syntax and structure validation</p></li>
<li><p>Coordinate range validation (-90 â‰¤ lat â‰¤ 90, -180 â‰¤ lon â‰¤ 180 OR 0 â‰¤ lon â‰¤ 360)</p></li>
<li><p>Positive value validation (speeds, durations, distances)</p></li>
<li><p>Unique name enforcement within categories</p></li>
<li><p>Bathymetry depth comparison (optional warning system)</p></li>
<li><p>Route continuity validation for multi-waypoint transfers</p></li>
</ul>
<p><strong>Schema Evolution:</strong></p>
<ul class="simple">
<li><p>Backward compatibility for existing YAML files</p></li>
<li><p>Graceful handling of missing optional fields</p></li>
<li><p>Clear error messages with line number references</p></li>
<li><p>Warning system for potential issues (depth mismatches, unusual values)</p></li>
</ul>
<p><strong>Reference Integrity Validation:</strong></p>
<ul class="simple">
<li><p><strong>Resolution Pass:</strong> When parsing legs, every string found in a moorings or stations list is treated as a Reference ID</p></li>
<li><p><strong>Lookup Logic:</strong> The system attempts to find a matching name in the global moorings or stations catalog</p></li>
<li><p><strong>Error Handling:</strong></p>
<ul>
<li><p>If ID is found: The full object is copied from the catalog into the Leg structure</p></li>
<li><p>If ID is NOT found: Raise ReferenceError: Mooring â€˜K7_Recâ€™ is scheduled in Leg 1 but not defined in the Catalog</p></li>
</ul>
</li>
<li><p><strong>Type Checking:</strong> Ensure a Mooring ID is not accidentally placed in a Station list, but mixed types are allowed in a Sequence list.</p></li>
</ul>
<p><strong>Calculation Priority Rules:</strong></p>
<ol class="arabic simple">
<li><p><strong>Depth Resolution Hierarchy:</strong></p>
<ul class="simple">
<li><p>Priority 1 (Manual): If a depth attribute is explicitly defined in the Catalog or Inline (even if calculate_depth_via_bathymetry is True), the system MUST use the manual value</p></li>
<li><p>Priority 2 (Bathymetry): If depth is missing/null AND calculate_depth_via_bathymetry is True, use the interpolated grid value from data/bathymetry.py</p></li>
<li><p>Priority 3 (Fallback): If neither exists, emit a Warning and default to 99999.</p></li>
</ul>
</li>
<li><p><strong>Duration Logic:</strong></p>
<ul class="simple">
<li><p>Point Operations (profile): turnaround_time + (depth * 2 / winch_speed)</p></li>
<li><p>Transfers: distance / vessel_speed (Use Haversine distance)</p></li>
<li><p>Day/Night Scheduling: Calculated relative to the global start_date</p></li>
</ul>
</li>
</ol>
<p><strong>Composite Operations Logic:</strong></p>
<p>Interaction of <code class="docutils literal notranslate"><span class="pre">ordered</span></code> and <code class="docutils literal notranslate"><span class="pre">strategy</span></code></p>
<p>When a Cluster contains multiple operation lists (e.g., <code class="docutils literal notranslate"><span class="pre">moorings</span></code> and <code class="docutils literal notranslate"><span class="pre">stations</span></code>) and logic flags:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Config</p></th>
<th class="head text-left"><p>Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>ordered: false (Default)</p></td>
<td class="text-left"><p>Full Optimization. The Optimizer merges all points into a single cloud and solves the TSP (Traveling Salesman) to minimize distance, respecting Day/Night windows if strategy is set.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ordered: true + strategy: sequential</p></td>
<td class="text-left"><p>Strict Append. Executes the moorings list in order, then the stations list in order. (Order is determined by the YAML field definition order).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ordered: true + strategy: day_night_split</p></td>
<td class="text-left"><p>The Zipper Pattern. The internal order of each individual list is preserved (Sequence A must be 1-&gt;2-&gt;3), but the scheduler switches between List A and List B based on the time of day.</p></td>
</tr>
</tbody>
</table>
<p><strong>Developer Note:</strong></p>
<p>In â€œZipperâ€ mode, the scheduler looks at head(moorings) and head(stations). If current_time is Day, it executes head(moorings). If Night, it executes head(stations). It does NOT look ahead to moorings[1] until moorings[0] is complete.</p>
<p>If arrival at the target happens during a prohibited window (e.g., Night for Moorings), add wait_time to the duration until the next valid window opens.</p>
</section>
</section>
<hr class="docutils" />
<section id="interactive-components-specification">
<h2>ğŸ¨ Interactive Components Specification<a class="headerlink" href="#interactive-components-specification" title="Link to this heading">ïƒ</a></h2>
<section id="station-picker-interface">
<h3>Station Picker Interface<a class="headerlink" href="#station-picker-interface" title="Link to this heading">ïƒ</a></h3>
<p><strong>Layout Requirements:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Campaign      â”‚         Bathymetry Map          â”‚    Controls     â”‚
â”‚   Selection     â”‚       (Station Picking)         â”‚   &amp; Status      â”‚
â”‚                 â”‚                                 â”‚                 â”‚
â”‚ â˜‘ Campaign_A    â”‚  â—‹ Interactive (matplotlib)     â”‚ Mode: Add       â”‚
â”‚ â˜ Campaign_B    â”‚  â—‹ Mercator projection          â”‚ Stations: 12    â”‚
â”‚ â˜‘ Campaign_C    â”‚  â—‹ Oceanographic contours       â”‚                 â”‚
â”‚                 â”‚  â—‹ Real-time coordinate display â”‚ [Save YAML]     â”‚
â”‚ [Toggle All]    â”‚  â—‹ Click-to-place stations      â”‚ [Clear All]     â”‚
â”‚ [Save Campaigns]â”‚  â—‹ Keyboard navigation          â”‚ [Load PANGAEA]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
<p><strong>Interaction Model:</strong></p>
<ul class="simple">
<li><p><strong>Mouse Controls</strong>: Click to place stations, scroll to zoom, drag to pan</p></li>
<li><p><strong>Keyboard Controls</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'p'</span></code> or <code class="docutils literal notranslate"><span class="pre">'w'</span></code>: Switch to add WayPoint (single lat/lon) mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'l'</span></code> or <code class="docutils literal notranslate"><span class="pre">'s'</span></code>: Switch to add LineSection (defined by a start and end point) mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span></code>: Switch to add area (defined by a set of points and finished by clicking <code class="docutils literal notranslate"><span class="pre">'a'</span></code> again)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'n'</span></code>: Toggle navigation mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'y'</span></code>: Save current stations to YAML</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'s'</span></code>: Save selected campaigns to pkl</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'c'</span></code>: Clear all placed operations (points, lines and areas)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'r'</span></code>: Remove last placed operation (last point, or last line, or last area)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'esc'</span></code>: Close window without saving</p></li>
</ul>
</li>
<li><p><strong>Visual Feedback</strong>: Mode indicators, coordinate display, depth lookup</p></li>
<li><p><strong>Real-time Updates</strong>: Station counter (points), Transect counter (lines), Area counter (areas), coordinate formatting, validation status</p></li>
</ul>
<p><strong>Bathymetry Integration:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Depth contour specifications (oceanographic standard)</span>
<span class="n">DEPTH_CONTOURS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="o">-</span><span class="mi">2000</span><span class="p">,</span> <span class="o">-</span><span class="mi">3000</span><span class="p">,</span> <span class="o">-</span><span class="mi">4000</span><span class="p">]</span>

<span class="c1"># Interpolation Logic</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_depth_at_point</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">grid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates depth using Bilinear Interpolation.</span>
<span class="sd">    1. Identify the 4 grid points surrounding the coordinate.</span>
<span class="sd">    2. Perform weighted average based on distance to grid points.</span>
<span class="sd">    3. Return interpolated float value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c1"># Land Avoidance Logic</span>
<span class="n">allow_land_stations</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Configurable setting</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_placement</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">):</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">get_depth_at_point</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># Positive value indicates land (dataset dependent)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_land_stations</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InteractionError</span><span class="p">(</span><span class="s2">&quot;Cannot place station on land&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">emit_warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Station placed on land (Elevation: </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s2">m)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the local ETOPO file is not found, get_depth_at_point should return a depth of -9999 to allow development to proceed without the 1GB dataset.</p>
<p><strong>Performance Requirements:</strong></p>
<ul class="simple">
<li><p>Sub-second response for station placement</p></li>
<li><p>Smooth zooming and panning for regions up to 1000kmÃ—1000km</p></li>
<li><p>On zoom, reset the aspect ratio to PROJECTION including all points within the zoom</p></li>
<li><p>Efficient rendering for up to 10,000 PANGAEA data points</p></li>
<li><p>Memory management for long interactive sessions</p></li>
</ul>
</section>
<section id="pangaea-integration-system">
<h3>PANGAEA Integration System<a class="headerlink" href="#pangaea-integration-system" title="Link to this heading">ïƒ</a></h3>
<p><strong>Data Processing Pipeline:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># DOI List Processing</span>
<span class="nb">input</span><span class="p">:</span> <span class="n">list_of_pangaea_dois</span><span class="o">.</span><span class="n">txt</span>
<span class="err">â”‚</span>
<span class="err">â”œâ”€â”€</span> <span class="n">DOI</span> <span class="n">Validation</span> <span class="p">(</span><span class="nb">format</span><span class="p">:</span> <span class="mf">10.</span><span class="n">xxxx</span><span class="o">/</span><span class="n">xxxxx</span><span class="p">)</span>
<span class="err">â”œâ”€â”€</span> <span class="n">PANGAEA</span> <span class="n">API</span> <span class="n">Queries</span> <span class="p">(</span><span class="k">with</span> <span class="n">rate</span> <span class="n">limiting</span><span class="p">)</span>
<span class="err">â”œâ”€â”€</span> <span class="n">Event</span> <span class="n">Extraction</span> <span class="p">(</span><span class="n">lat</span><span class="o">/</span><span class="n">lon</span> <span class="n">coordinates</span><span class="p">)</span>
<span class="err">â”œâ”€â”€</span> <span class="n">Campaign</span> <span class="n">Grouping</span> <span class="p">(</span><span class="n">by</span> <span class="n">cruise</span><span class="o">/</span><span class="n">expedition</span><span class="p">)</span>
<span class="err">â”œâ”€â”€</span> <span class="n">Pickle</span> <span class="n">Serialization</span> <span class="p">(</span><span class="n">efficient</span> <span class="n">storage</span><span class="p">)</span>
<span class="err">â””â”€â”€</span> <span class="n">Interactive</span> <span class="n">Loading</span> <span class="p">(</span><span class="n">checkbox</span> <span class="n">interface</span><span class="p">)</span>

<span class="n">output</span><span class="p">:</span> <span class="n">selected_campaigns</span><span class="o">.</span><span class="n">pkl</span>
</pre></div>
</div>
<p><strong>Performance &amp; Visualization:</strong></p>
<ul class="simple">
<li><p><strong>Checkbox Interface</strong>: Toggle visibility of individual campaigns</p></li>
<li><p><strong>Bulk Operations</strong>: Select all, clear all, save selection</p></li>
<li><p><strong>Visual Distinction</strong>: Different colors/markers per campaign</p></li>
<li><p><strong>Performance Caching</strong>: Pre-processed pickle files for large datasets</p></li>
<li><p><strong>Metadata Display</strong>: Campaign names, data counts, coordinate ranges</p></li>
<li><p><strong>Smart Downsampling:</strong></p>
<ul>
<li><p>Implementation of â€œLevel of Detailâ€ (LOD) rendering</p></li>
<li><p>When Map Zoom &lt; X: Render every Nth point (stride slicing) to maintain &gt;30fps</p></li>
<li><p>When Map Zoom &gt; X: Render full resolution dataset</p></li>
<li><p>Thresholds configurable in config.py</p></li>
</ul>
</li>
</ul>
<p><strong>Visual distinction:</strong> To generate this, pick 4 colors for fill colors which are colorblind distinguishable, then pick 5 edge colors also distinguishable, and 6 shapes. Then for the markers, cycle through each of these separately. So the first marker is (fill color 1, edge color 1, symbol 1), the second marker is (fill color 2, edge color 2, symbol 2). In this way, we are changing everything for each incremented marker.</p>
<p><strong>Data Format:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standardized campaign data structure</span>
<span class="n">campaign_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">lat_array</span><span class="p">,</span> <span class="n">lon_array</span><span class="p">,</span> <span class="s2">&quot;Campaign_Name_1&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">lat_array</span><span class="p">,</span> <span class="n">lon_array</span><span class="p">,</span> <span class="s2">&quot;Campaign_Name_2&quot;</span><span class="p">),</span>
    <span class="c1"># ... additional campaigns</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="output-generation-specifications">
<h2>ğŸ“ˆ Output Generation Specifications<a class="headerlink" href="#output-generation-specifications" title="Link to this heading">ïƒ</a></h2>
<section id="latex-tables-for-cruise-proposals">
<h3>LaTeX Tables for Cruise Proposals<a class="headerlink" href="#latex-tables-for-cruise-proposals" title="Link to this heading">ïƒ</a></h3>
<p><strong>Table Requirements:</strong></p>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span><span class="c">% Working area, stations and profiles table</span>
<span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>[htbp]
<span class="k">\caption</span><span class="nb">{</span>Working area, stations and profiles: [Cruise Name]<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>llrrrc<span class="nb">}</span>
<span class="k">\toprule</span>
Station <span class="nb">&amp;</span> Location <span class="nb">&amp;</span> Geographic coordinates <span class="nb">&amp;</span> Water depth (m) <span class="k">\\</span>
<span class="k">\midrule</span>
<span class="c">% Auto-generated content with proper formatting</span>
CTD profile <span class="nb">&amp;</span> Stn01 <span class="nb">&amp;</span> 52<span class="s">$</span><span class="nb">^</span><span class="nv">\circ</span><span class="s">$</span>30.15&#39;N, 051<span class="s">$</span><span class="nb">^</span><span class="nv">\circ</span><span class="s">$</span>20.23&#39;W <span class="nb">&amp;</span> 2847   <span class="k">\\</span>
Mooring deployment <span class="nb">&amp;</span> M02 <span class="nb">&amp;</span> 53<span class="s">$</span><span class="nb">^</span><span class="nv">\circ</span><span class="s">$</span>07.20&#39;N, 050<span class="s">$</span><span class="nb">^</span><span class="nv">\circ</span><span class="s">$</span>90.10&#39;W <span class="nb">&amp;</span> 2156   <span class="k">\\</span>
<span class="k">\bottomrule</span>
<span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>

<span class="c">% Work days at sea table</span>
<span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>[htbp]
<span class="k">\caption</span><span class="nb">{</span>Work days at sea: [Cruise Name]<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>llrrrc<span class="nb">}</span>
<span class="k">\toprule</span>
Area <span class="nb">&amp;</span> Station <span class="nb">&amp;</span> Duration (h) <span class="nb">&amp;</span> Transit (h) <span class="k">\\</span>
<span class="k">\midrule</span>
<span class="c">% Auto-generated content with proper formatting</span>
Transit to Area 1 <span class="nb">&amp;</span>         <span class="nb">&amp;</span>     <span class="nb">&amp;</span> 35 <span class="k">\\</span>
<span class="k">\midrule</span>
Area 1 <span class="nb">&amp;</span> CTD stations       <span class="nb">&amp;</span> 100 <span class="nb">&amp;</span>  <span class="k">\\</span>
<span class="k">\midrule</span>
Area 1 <span class="nb">&amp;</span> Mooring operations <span class="nb">&amp;</span> 25  <span class="nb">&amp;</span>  <span class="k">\\</span>
<span class="k">\midrule</span>
Transit within area 1       <span class="nb">&amp;</span> 25  <span class="nb">&amp;</span>  <span class="k">\\</span>
<span class="k">\midrule</span>
Area 2 <span class="nb">&amp;</span> CTD stations       <span class="nb">&amp;</span> 25  <span class="nb">&amp;</span>  <span class="k">\\</span>
<span class="k">\midrule</span>
Transit within area 2       <span class="nb">&amp;</span> 25  <span class="nb">&amp;</span> <span class="k">\\</span>
<span class="k">\midrule</span>
Transit from Area <span class="nb">&amp;</span>         <span class="nb">&amp;</span>     <span class="nb">&amp;</span> 25 <span class="k">\\</span>
<span class="k">\midrule</span>
Total duration <span class="nb">&amp;</span> 200 <span class="nb">&amp;</span> 60 <span class="k">\\</span>
<span class="k">\bottomrule</span>
<span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</pre></div>
</div>
<p><strong>Formatting Features:</strong></p>
<ul class="simple">
<li><p>Coordinate formatting in degrees and decimal minutes (for outputs) or decimal degrees (native for calculations)</p></li>
<li><p>Duration summaries by operation type and leg</p></li>
<li><p>Incorporate enhanced typography with booktabs package</p></li>
<li><p>Automatic page breaking for long schedules (i.e. more than NN lines, default to NN=45)</p></li>
<li><p>When applying page breaking, repeat the header row and add to the caption â€œContinuedâ€</p></li>
<li><p>Section breaks and subtotals for multi-leg cruises</p></li>
</ul>
</section>
<section id="html-summary">
<h3>HTML Summary<a class="headerlink" href="#html-summary" title="Link to this heading">ïƒ</a></h3>
<p>The HTML output provides comprehensive cruise overview with detailed breakdowns:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Schedule for {{cruise}}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{cruise}}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Navigation Links --&gt;</span>
    <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Files<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>Cruise Plot<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;cruise.kml&quot;</span><span class="p">&gt;</span>KML file (Google Earth)<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;cruise.csv&quot;</span><span class="p">&gt;</span>CSV file<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>JSON file<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- 1. Cruise Schedule Summary --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>1. Cruise Schedule<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">&quot;5&quot;</span> <span class="na">cellspacing</span><span class="o">=</span><span class="s">&quot;0&quot;</span> <span class="na">border</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Task<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Description<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Hours<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Days<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Detailed rows with calculations for moorings, stations, transfers, etc. --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- 2. Sections Detail --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>2. Sections<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Detailed section information with coordinates, distances, stations --&gt;</span>

    <span class="cm">&lt;!-- 3. Moorings Detail --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>3. Moorings<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Complete mooring operations with coordinates in multiple formats --&gt;</span>

    <span class="cm">&lt;!-- 4. Transfers Detail --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>4. Transfers<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Transfer routes with distances and timing --&gt;</span>

    <span class="cm">&lt;!-- 5. Miscellaneous Activities --&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>5. Misc. Actions<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Other cruise activities --&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>HTML Summary Report</strong></p>
<p><strong>File Structure:</strong> The system generates a self-contained index.html report containing:</p>
<ol class="arabic simple">
<li><p>File Links: Direct download links for generated KML, CSV, JSON, and Plot files.</p></li>
<li><p>Cruise Schedule Summary: A high-level accounting of time budgets.</p></li>
<li><p>Detailed Breakdowns: Per-section, per-mooring, and per-transfer tables.</p></li>
</ol>
<p><strong>Table 1: Cruise Schedule Logic</strong></p>
<p>The primary summary table must aggregate data from both global lists and nested Cluster/Leg lists.</p>
<ul class="simple">
<li><p>Format: HTML Table with borders.</p></li>
<li><p>Columns: Task Category | Detailed Breakdown &amp; Logic | Total Hours | Total Days</p></li>
</ul>
<p>Content Specification:</p>
<p>Task Category	Description / Breakdown Column Logic	Hours / Days</p>
<ol class="arabic simple">
<li><p>Total Moorings</p></li>
</ol>
<p>Must Display:
â€¢ Count of Global Moorings
â€¢ Count of Cluster-nested Moorings
â€¢ Total Count
â€¢ Average duration per mooring</p>
<p>Logic: <code class="docutils literal notranslate"><span class="pre">Sum(Global)</span> <span class="pre">+</span> <span class="pre">Sum(Legs.Clusters.Moorings)</span></code></p>
<p>Hours/Days are Calculated</p>
<ol class="arabic simple" start="2">
<li><p>Total Stations</p></li>
</ol>
<p>Must Display:
â€¢ Total Count
â€¢ Average Depth (m)
â€¢ Average Duration (hrs)</p>
<p>Logic: <code class="docutils literal notranslate"><span class="pre">Sum(Legs.Clusters.Stations)</span> <span class="pre">+</span> <span class="pre">Sum(Legs.Sections.Stations)</span></code></p>
<p>Hours/Days are Calculated</p>
<ol class="arabic simple" start="3">
<li><p>Miscellaneous</p></li>
</ol>
<p>Must Display (Bullet List):
â€¢ Item Name: Duration
â€¢ Item Name: Duration</p>
<p>Example:</p>
  <ul> <li>Glider Deploy: 2h</li> <li>Calibration: 4h</li> </ul>"
<p>Hours/Days are Calculated</p>
<ol class="arabic simple" start="4">
<li><p>Station Transits</p></li>
</ol>
<p>Must Display:
â€¢ Total Distance (nm)
â€¢ Pair Count (N-1)
â€¢ Average Speed used (kts)</p>
<p>Note: This represents small movements between stations, distinct from major transfers.</p>
<p>Hours/Days are Calculated</p>
<ol class="arabic simple" start="5">
<li><p>Named Transfers</p></li>
</ol>
<p>Must Display (List):
â€¢ Name of Transfer 1 (Distance nm)
â€¢ Name of Transfer 2 (Distance nm)</p>
<p>Logic: List all explicit Transfer objects defined in Catalog or Legs.â€</p>
<p>Hours/Days are Calculated</p>
<ol class="arabic simple" start="6">
<li><p>TOTAL CRUISE</p></li>
</ol>
<p>Must Display:
â€¢ Grand Total Operations Count
â€¢ Checksum of all activitiesâ€</p>
<p>Hours/Days are Sum(All)</p>
<p><strong>Table 2: Section/Cluster Details</strong></p>
<p>A detailed breakdown of every Transect, Section, or Cluster defined in the YAML.</p>
<ul class="simple">
<li><p>Columns:</p>
<ul>
<li><p>Name: Section identifier.</p></li>
<li><p>Route: Start/End Coordinates (DD MM.mmm format).</p></li>
<li><p>Distance: Nautical Miles and Kilometers.</p></li>
<li><p>Stations: Count of stations within this section.</p></li>
<li><p>Spacing: Planned (YAML) vs Actual (Geodesic average).</p></li>
<li><p>Moorings: List of mooring names contained within this section (if any).</p></li>
</ul>
</li>
</ul>
<p><strong>Table 3: Asset Manifests</strong></p>
<p>Three separate tables providing the raw data for:</p>
<ol class="arabic simple">
<li><p>Moorings: Name, Position, Depth, Duration, Action (Deploy/Recover).</p></li>
<li><p>Transfers: Name, Start/End, Distance, Speed, Duration.</p></li>
<li><p>Misc Actions: Name, Duration.</p></li>
</ol>
<p><strong>Data Aggregation Rules (Developer Note):</strong> The HTML generator must perform a Deep Flattening operation before rendering.</p>
<ol class="arabic simple">
<li><p>Moorings: Global_Moorings + Flatten(Legs -&gt; Clusters -&gt; Moorings) + Flatten(Legs -&gt; Sections -&gt; Moorings)</p></li>
<li><p>Stations: Global_Stations + Flatten(Legs -&gt; Clusters -&gt; Stations) + Flatten(Legs -&gt; Sections -&gt; Stations)</p></li>
<li><p>Transits: Identify â€œGapsâ€ between spatial operations that are not covered by explicit â€œNamed Transfersâ€ and calculate them as â€œStation Transits.â€</p></li>
</ol>
</section>
<section id="scientific-data-formats">
<h3>Scientific Data Formats<a class="headerlink" href="#scientific-data-formats" title="Link to this heading">ïƒ</a></h3>
<p><strong>NetCDF Structure:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Primary cruise dataset</span>
<span class="n">cruise</span><span class="o">.</span><span class="n">nc</span><span class="p">:</span>
  <span class="n">dimensions</span><span class="p">:</span> <span class="n">station</span>
  <span class="n">variables</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">longitude</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">station</span> <span class="n">longitudes</span>
    <span class="o">-</span> <span class="n">latitude</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">station</span> <span class="n">latitudes</span>
    <span class="o">-</span> <span class="n">depth</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">water</span> <span class="n">depths</span>
    <span class="o">-</span> <span class="n">duration</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">operation</span> <span class="n">durations</span> <span class="p">(</span><span class="n">minutes</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">distance_from_start</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">cumulative</span> <span class="n">distance</span> <span class="p">(</span><span class="n">nautical</span> <span class="n">miles</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">operation_type</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">categorical</span> <span class="n">operation</span> <span class="n">types</span>
    <span class="o">-</span> <span class="n">leg_id</span><span class="p">(</span><span class="n">station</span><span class="p">):</span> <span class="n">leg</span> <span class="n">assignment</span>
  <span class="n">global_attributes</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">cruise_name</span><span class="p">,</span> <span class="n">vessel_speed</span><span class="p">,</span> <span class="n">total_duration_days</span>
    <span class="o">-</span> <span class="n">creation_date</span><span class="p">,</span> <span class="n">software_version</span>
    <span class="o">-</span> <span class="n">coordinate_system</span><span class="p">,</span> <span class="n">depth_datum</span>

<span class="c1"># Specialized datasets for different operation types</span>
<span class="n">cruise_stations</span><span class="o">.</span><span class="n">nc</span>    <span class="c1"># CTD profile data</span>
<span class="n">cruise_moorings</span><span class="o">.</span><span class="n">nc</span>    <span class="c1"># Mooring operation data</span>
<span class="n">cruise_transfers</span><span class="o">.</span><span class="n">nc</span>   <span class="c1"># Ship movement data</span>
<span class="n">cruise_sections</span><span class="o">.</span><span class="n">nc</span>    <span class="c1"># Section-level aggregations</span>
</pre></div>
</div>
<p><strong>CSV Export Format:</strong></p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span># Comprehensive spreadsheet with all operations
Activity,Label (name), Location, Delay start [h], Activity duration [h], Depth [m], Lat [deg], Lon [deg], Lat [integer degrees], Lat [decimal minutes], Lon [integer degrees], Lon [decimal minutes], Transit distance [nm], Transit time [h], Vessel speed [kt], Start (date), Start (time HH:MM:SS), End (date), End (time HH:MM:SS), Leg, Notes
CTD cast,STN01,,,3.0,2847,52.8332,-51.5468,52,49.992,-51,-32.808,0,0,10,,,,, Leg1,&quot;Deep water profile&quot;
mooring,MOOR_A,,,4.0,2156,53.1234,-50.5678,53,7.404, -50, -34.068, 0,0,10,,,,,Leg1,&quot;Deployment operation&quot;
transfer,PORT_TO_STN01,,,0,,47.5705,-52.6979,47,,-52,-,240,24,10,,,,,Leg1,&quot;Departure transfer&quot;
</pre></div>
</div>
</section>
<section id="map-visualization">
<h3>Map Visualization<a class="headerlink" href="#map-visualization" title="Link to this heading">ïƒ</a></h3>
<p><strong>KML for Google Earth:</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Comprehensive cruise visualization --&gt;</span>
<span class="nt">&lt;kml&gt;</span>
<span class="w">  </span><span class="nt">&lt;Document&gt;</span>
<span class="w">    </span><span class="nt">&lt;name&gt;</span>[Cruise<span class="w"> </span>Name]<span class="w"> </span>-<span class="w"> </span>Track<span class="w"> </span>and<span class="w"> </span>Stations<span class="nt">&lt;/name&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Station placemarks with depth-based styling --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Placemark&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>STN01<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;description&gt;</span>Deep<span class="w"> </span>Station<span class="w"> </span>-<span class="w"> </span>2847m<span class="w"> </span>depth<span class="nt">&lt;/description&gt;</span>
<span class="w">      </span><span class="nt">&lt;styleUrl&gt;</span>#station-deep<span class="nt">&lt;/styleUrl&gt;</span>
<span class="w">      </span><span class="nt">&lt;Point&gt;&lt;coordinates&gt;</span>-51.5468,52.8332,0<span class="nt">&lt;/coordinates&gt;&lt;/Point&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Placemark&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Cruise track with transfer routes --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Placemark&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>Cruise<span class="w"> </span>Track<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;LineString&gt;</span>
<span class="w">        </span><span class="nt">&lt;coordinates&gt;</span>
<span class="w">          </span>-52.6979,47.5705,0<span class="w"> </span>-51.5468,52.8332,0
<span class="w">        </span><span class="nt">&lt;/coordinates&gt;</span>
<span class="w">      </span><span class="nt">&lt;/LineString&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Placemark&gt;</span>
<span class="w">  </span><span class="nt">&lt;/Document&gt;</span>
<span class="nt">&lt;/kml&gt;</span>
</pre></div>
</div>
<p><strong>Interactive Web Maps:</strong></p>
<ul class="simple">
<li><p>Leaflet-based interactive maps with OpenStreetMap base layers</p></li>
<li><p>Bathymetry overlay integration</p></li>
<li><p>Station clustering for dense operations</p></li>
<li><p>Route animation capabilities</p></li>
<li><p>Export functionality for static images</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="cli-interface-specifications">
<h2>ğŸ”§ CLI Interface Specifications<a class="headerlink" href="#cli-interface-specifications" title="Link to this heading">ïƒ</a></h2>
<section id="modern-subcommand-architecture">
<h3>Modern Subcommand Architecture<a class="headerlink" href="#modern-subcommand-architecture" title="Link to this heading">ïƒ</a></h3>
<p><strong>Primary Command Interface:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cruiseplan<span class="w"> </span>--help
<span class="c1"># Unified command with subcommands following git-style patterns</span>

cruiseplan<span class="w"> </span>pangaea<span class="w">    </span><span class="c1"># Process PANGAEA DOI lists</span>
cruiseplan<span class="w"> </span>stations<span class="w">   </span><span class="c1"># Interactive station placement</span>
cruiseplan<span class="w"> </span>depths<span class="w">     </span><span class="c1"># Add bathymetry depth validation</span>
cruiseplan<span class="w"> </span>coords<span class="w">     </span><span class="c1"># Add navigational coordinate formatting</span>
cruiseplan<span class="w"> </span>optimize<span class="w">   </span><span class="c1"># Optimize cruise routing</span>
cruiseplan<span class="w"> </span>schedule<span class="w">   </span><span class="c1"># Generate complete cruise schedules</span>
cruiseplan<span class="w"> </span>validate<span class="w">   </span><span class="c1"># Validate YAML configuration files</span>
</pre></div>
</div>
</section>
<section id="subcommand-specifications">
<h3>Subcommand Specifications<a class="headerlink" href="#subcommand-specifications" title="Link to this heading">ïƒ</a></h3>
<p><strong>cruiseplan schedule</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate comprehensive cruise schedule from YAML configuration</span>
cruiseplan<span class="w"> </span>schedule<span class="w"> </span>-c<span class="w"> </span>INPUT_CONFIG<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT_DIR<span class="o">]</span>

Arguments:
<span class="w">  </span>INPUT_CONFIG<span class="w">         </span>YAML<span class="w"> </span>cruise<span class="w"> </span>configuration<span class="w"> </span>file
<span class="w">  </span>OUTPUT_DIR<span class="w">           </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>schedules

Options:
<span class="w">  </span>-c,<span class="w"> </span>--config-file<span class="w">    </span>Path<span class="w"> </span>to<span class="w"> </span>cruise<span class="w"> </span>configuration<span class="w"> </span><span class="o">(</span>required<span class="o">)</span>
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">     </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>current<span class="o">)</span>
<span class="w">  </span>--format<span class="w">             </span>Output<span class="w"> </span>formats:<span class="w"> </span>html,latex,csv,kml,netcdf,all
<span class="w">  </span>--validate-depths<span class="w">    </span>Compare<span class="w"> </span>stated<span class="w"> </span>depths<span class="w"> </span>with<span class="w"> </span>bathymetry
<span class="w">  </span>--leg<span class="w"> </span>LEGNAME<span class="w">        </span>Process<span class="w"> </span>specific<span class="w"> </span>leg<span class="w"> </span>only

Examples:
<span class="w">  </span>cruiseplan<span class="w"> </span>schedule<span class="w"> </span>-c<span class="w"> </span>cruise2028.yaml<span class="w"> </span>-o<span class="w"> </span>results/
<span class="w">  </span>cruiseplan<span class="w"> </span>schedule<span class="w"> </span>-c<span class="w"> </span>cruise.yaml<span class="w"> </span>--format<span class="w"> </span>latex,html
<span class="w">  </span>cruiseplan<span class="w"> </span>schedule<span class="w"> </span>-c<span class="w"> </span>cruise.yaml<span class="w"> </span>--validate-depths<span class="w"> </span>--leg<span class="w"> </span><span class="s2">&quot;Leg1&quot;</span>
</pre></div>
</div>
<p><strong>cruiseplan optimize</strong></p>
<p><strong>Optimization Behavior:</strong> The command parses the YAML logic settings (strategy, ordered) and applies them. CLI flags act as <strong>Global Overrides</strong>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimize cruise routing from existing YAML configuration</span>
cruiseplan<span class="w"> </span>optimize<span class="w"> </span>-c<span class="w"> </span>INPUT_CONFIG<span class="w"> </span>-o<span class="w"> </span>OUTPUT_DIR<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>

Arguments:
<span class="w">  </span>INPUT_CONFIG<span class="w">          </span>Existing<span class="w"> </span>YAML<span class="w"> </span>cruise<span class="w"> </span>configuration
<span class="w">  </span>OUTPUT_DIR<span class="w">            </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>optimized<span class="w"> </span>YAML<span class="w"> </span>file

Options:
<span class="w">  </span>-c,<span class="w"> </span>--config-file<span class="w">     </span>Filename<span class="w"> </span>including<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cruise<span class="w"> </span>configuration<span class="w"> </span><span class="o">(</span>required<span class="o">)</span>
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">      </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>current<span class="o">)</span>
<span class="w">  </span>--output-file<span class="w">         </span>Specific<span class="w"> </span>output<span class="w"> </span>file<span class="w"> </span>path<span class="w"> </span><span class="o">(</span>overrides<span class="w"> </span>filename<span class="w"> </span>and<span class="w"> </span>output_dir<span class="o">)</span>
<span class="w">  </span>--algorithm<span class="w">           </span><span class="s1">&#39;nearest_neighbor&#39;</span><span class="w"> </span><span class="o">(</span>fast<span class="o">)</span><span class="w"> </span>or<span class="w"> </span><span class="s1">&#39;genetic&#39;</span><span class="w"> </span><span class="o">(</span>thorough<span class="o">)</span>.<span class="w"> </span>Default:<span class="w"> </span>nearest_neighbor
<span class="w">  </span>--flatten-legs<span class="w">        </span>Dissolve<span class="w"> </span>boundaries<span class="w"> </span>ignoring<span class="w"> </span>both<span class="w"> </span>Leg<span class="w"> </span>AND<span class="w"> </span>Cluster<span class="w"> </span>grouping.
<span class="w">                        </span>Solves<span class="w"> </span>a<span class="w"> </span>global<span class="w"> </span>TSP<span class="w"> </span><span class="k">for</span><span class="w"> </span>all<span class="w"> </span>operations.
<span class="w">                        </span><span class="o">(</span>Default:<span class="w"> </span>False<span class="w"> </span>-<span class="w"> </span>Legs/Clusters<span class="w"> </span>remain<span class="w"> </span>contiguous<span class="o">)</span>
<span class="w">  </span>--flatten-clusters<span class="w">    </span>Dissolve<span class="w"> </span>boundaries.<span class="w"> </span>Ignores<span class="w"> </span>Cluster<span class="w"> </span>grouping.
<span class="w">                        </span>Solves<span class="w"> </span>a<span class="w"> </span>global<span class="w"> </span>TSP<span class="w"> </span><span class="k">for</span><span class="w"> </span>every<span class="w"> </span>leg.
<span class="w">                        </span>Allows<span class="w"> </span>stations<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>mixed<span class="w"> </span>globally.
<span class="w">                        </span><span class="o">(</span>Default:<span class="w"> </span>False<span class="w"> </span>-<span class="w"> </span>Clusters<span class="w"> </span>remain<span class="w"> </span>contiguous<span class="o">)</span>
<span class="w">  </span>--reorder-internal<span class="w">    </span>Force<span class="w"> </span>shuffle.<span class="w"> </span>Ignores<span class="w"> </span>ordered:<span class="w"> </span>True<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>YAML.<span class="w"> </span>Forces<span class="w"> </span>a
<span class="w">                        </span>spatial_interleaved<span class="w"> </span>strategy<span class="w"> </span>on<span class="w"> </span>all<span class="w"> </span>clusters.<span class="w"> </span>Useful<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;What if&quot;</span><span class="w"> </span>analysis.
<span class="w">                        </span><span class="o">(</span>Default:<span class="w"> </span>False<span class="w"> </span>-<span class="w"> </span>Internal<span class="w"> </span>YAML<span class="w"> </span>list<span class="w"> </span>order<span class="w"> </span>is<span class="w"> </span>preserved<span class="o">)</span>
<span class="w">  </span>--allow_reversal<span class="w">      </span>Flip<span class="w"> </span>Lines.<span class="w"> </span>Allows<span class="w"> </span>the<span class="w"> </span>optimizer<span class="w"> </span>to<span class="w"> </span>reverse<span class="w"> </span>the<span class="w"> </span>direction
<span class="w">                        </span>of<span class="w"> </span>line<span class="w"> </span>operations<span class="w"> </span>even<span class="w"> </span><span class="k">if</span><span class="w"> </span>reversible:<span class="w"> </span><span class="nb">true</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>catalog
<span class="w">                        </span><span class="o">(</span>Default:<span class="w"> </span>True<span class="w"> </span>-<span class="w"> </span>allows<span class="w"> </span>reversal<span class="w"> </span>of<span class="w"> </span>direction<span class="w"> </span>of<span class="w"> </span>line<span class="w"> </span>operations,<span class="w"> </span>but
<span class="w">                        </span><span class="k">if</span><span class="w"> </span>reversible:<span class="w"> </span><span class="nb">false</span><span class="w"> </span>on<span class="w"> </span>an<span class="w"> </span>operation<span class="w"> </span><span class="k">then</span><span class="w"> </span>that<span class="w"> </span>holds<span class="o">)</span>

Behavior<span class="w"> </span>Matrix:

<span class="p">|</span><span class="w"> </span>Flag<span class="w"> </span>Config<span class="w"> </span><span class="p">|</span><span class="w"> </span>Resulting<span class="w"> </span>Behavior<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>:---<span class="w"> </span><span class="p">|</span><span class="w"> </span>:---<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>**Default**<span class="w"> </span><span class="p">|</span><span class="w"> </span>**Container<span class="w"> </span>Sort<span class="w"> </span>Only:**<span class="w"> </span>Reorders<span class="w"> </span>the<span class="w"> </span>sequence<span class="w"> </span>of<span class="w"> </span>whole<span class="w"> </span>Sections/Clusters<span class="w"> </span>to<span class="w"> </span>minimize<span class="w"> </span>transit,<span class="w"> </span>but<span class="w"> </span>the<span class="w"> </span>internal<span class="w"> </span>station<span class="w"> </span>order<span class="w"> </span>of<span class="w"> </span>each<span class="w"> </span>remains<span class="w"> </span>exactly<span class="w"> </span>as<span class="w"> </span>listed<span class="w"> </span><span class="k">in</span><span class="w"> </span>YAML.<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span><span class="sb">`</span>--reorder-internal<span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>**Hierarchical<span class="w"> </span>Sort:**<span class="w"> </span>Reorders<span class="w"> </span>the<span class="w"> </span>Sections/Clusters,<span class="w"> </span>AND<span class="w"> </span>reorders<span class="w"> </span>the<span class="w"> </span>stations<span class="w"> </span>inside<span class="w"> </span>them<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span>turns<span class="w"> </span>a<span class="w"> </span>zig-zag<span class="w"> </span>mooring<span class="w"> </span>list<span class="w"> </span>into<span class="w"> </span>a<span class="w"> </span>circle<span class="o">)</span>,<span class="w"> </span>but<span class="w"> </span>never<span class="w"> </span>mixes<span class="w"> </span>stations<span class="w"> </span>from<span class="w"> </span>Section<span class="w"> </span>A<span class="w"> </span>with<span class="w"> </span>Section<span class="w"> </span>B.<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span><span class="sb">`</span>--flatten-legs<span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>**Global<span class="w"> </span>TSP:**<span class="w"> </span>Ignores<span class="w"> </span>all<span class="w"> </span>structure.<span class="w"> </span>Solves<span class="w"> </span>the<span class="w"> </span>Traveling<span class="w"> </span>Salesman<span class="w"> </span>Problem<span class="w"> </span><span class="k">for</span><span class="w"> </span>every<span class="w"> </span>single<span class="w"> </span>station<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>list<span class="w"> </span>simultaneously.<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span><span class="sb">`</span>--flatten-clusters<span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>**Global<span class="w"> </span>TSP<span class="w"> </span>within<span class="w"> </span>legs**<span class="w"> </span>Ignores<span class="w"> </span>all<span class="w"> </span>structure.<span class="w"> </span>Solves<span class="w"> </span>the<span class="w"> </span>Traveling<span class="w"> </span>Salesman<span class="w"> </span>Problem<span class="w"> </span><span class="k">for</span><span class="w"> </span>every<span class="w"> </span>single<span class="w"> </span>station<span class="w"> </span><span class="k">in</span><span class="w"> </span>each<span class="w"> </span>leg<span class="w">  </span>simultaneously.<span class="w"> </span><span class="p">|</span>

Behavior:
<span class="w">  </span><span class="m">1</span>.<span class="w"> </span>Graph<span class="w"> </span>Building:<span class="w"> </span>Parses<span class="w"> </span>the<span class="w"> </span>input<span class="w"> </span>YAML<span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>a<span class="w"> </span>graph<span class="w"> </span>of<span class="w"> </span>nodes<span class="w"> </span><span class="o">(</span>stations<span class="o">)</span><span class="w"> </span>and<span class="w"> </span>edges<span class="w"> </span><span class="o">(</span>transfers<span class="o">)</span>.
<span class="w">  </span><span class="m">2</span>.<span class="w"> </span>Algorithm:<span class="w"> </span>Applies<span class="w"> </span>the<span class="w"> </span>selected<span class="w"> </span>algorithm<span class="w"> </span><span class="o">(</span>TSP<span class="w"> </span>or<span class="w"> </span>Nearest<span class="w"> </span>Neighbor<span class="o">)</span><span class="w"> </span>to<span class="w"> </span>minimize<span class="w"> </span>total<span class="w"> </span>transit<span class="w"> </span>distance.
<span class="w">  </span><span class="m">3</span>.<span class="w"> </span>Reference<span class="w"> </span>Preservation:<span class="w"> </span>The<span class="w"> </span>optimizer<span class="w"> </span>generates<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>YAML<span class="w"> </span>file<span class="w"> </span>that<span class="w"> </span>only<span class="w"> </span>reorders<span class="w"> </span>the<span class="w"> </span>reference<span class="w"> </span>lists<span class="w"> </span>within<span class="w"> </span>the<span class="w"> </span>legs<span class="w"> </span><span class="o">(</span>Schedule<span class="o">)</span>.<span class="w"> </span>It<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>inline<span class="w"> </span>or<span class="w"> </span>modify<span class="w"> </span>the<span class="w"> </span>Global<span class="w"> </span>Catalog<span class="w"> </span>definitions.
<span class="w">    </span>-<span class="w"> </span>Input:<span class="w"> </span>stations:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;Stn_B&quot;</span>,<span class="w"> </span><span class="s2">&quot;Stn_A&quot;</span><span class="o">]</span>
<span class="w">    </span>-<span class="w"> </span>Output:<span class="w"> </span>stations:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;Stn_A&quot;</span>,<span class="w"> </span><span class="s2">&quot;Stn_B&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p><strong>cruiseplan stations</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Interactive station placement with PANGAEA background data</span>
cruiseplan<span class="w"> </span>stations<span class="w"> </span><span class="o">[</span>-p<span class="w"> </span>PANGAEA_FILE<span class="o">]</span><span class="w"> </span><span class="o">[</span>--lat<span class="w"> </span>MIN<span class="w"> </span>MAX<span class="o">]</span><span class="w"> </span><span class="o">[</span>--lon<span class="w"> </span>MIN<span class="w"> </span>MAX<span class="o">]</span>
<span class="w">                   </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT_DIR<span class="o">]</span><span class="w"> </span><span class="o">[</span>--output-file<span class="w"> </span>OUTPUT_FILE<span class="o">]</span>

Arguments:
<span class="w">  </span>PANGAEA_FILE<span class="w">          </span>PANGAEA<span class="w"> </span>campaigns<span class="w"> </span>pickle<span class="w"> </span>file<span class="w"> </span>with<span class="w"> </span>locations<span class="w"> </span>and<span class="w"> </span>labels
<span class="w">  </span>OUTPUT_DIR<span class="w">            </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>YAML<span class="w"> </span>file
<span class="w">  </span>OUTPUT_FILE<span class="w">           </span>Path<span class="w"> </span>including<span class="w"> </span>filename<span class="w"> </span><span class="o">(</span>overrides<span class="w"> </span>OUTPUT_DIR<span class="o">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>yaml<span class="w"> </span>file

Options:
<span class="w">  </span>-p,<span class="w"> </span>--pangaea-file<span class="w">   </span>PANGAEA<span class="w"> </span>campaigns<span class="w"> </span>pickle<span class="w"> </span>file
<span class="w">  </span>--lat<span class="w"> </span>MIN<span class="w"> </span>MAX<span class="w">        </span>Latitude<span class="w"> </span>bounds<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>Use<span class="w"> </span>bounds<span class="w"> </span>from<span class="w"> </span>PANGAEA<span class="w"> </span>pickle<span class="w"> </span>provided,<span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">70</span><span class="o">)</span>
<span class="w">  </span>--lon<span class="w"> </span>MIN<span class="w"> </span>MAX<span class="w">        </span>Longitude<span class="w"> </span>bounds<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>Use<span class="w"> </span>bounds<span class="w"> </span>from<span class="w"> </span>PANGAEA<span class="w"> </span>pickle<span class="w"> </span><span class="k">if</span><span class="w"> </span>provided,<span class="w"> </span><span class="k">else</span><span class="w"> </span>-65<span class="w"> </span>-5<span class="o">)</span>
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">     </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>current<span class="o">)</span>
<span class="w">  </span>--output-file<span class="w">        </span>Specific<span class="w"> </span>output<span class="w"> </span>file<span class="w"> </span>path
<span class="w">  </span>--bathymetry-source<span class="w">  </span>etopo2022<span class="p">|</span>gebco2025<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>etopo2022<span class="o">)</span>
<span class="w">  </span>--contour-levels<span class="w">     </span>Custom<span class="w"> </span>depth<span class="w"> </span>contours<span class="w"> </span><span class="o">(</span>comma-separated,<span class="w"> </span>Default:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>-50,<span class="w"> </span>-100,<span class="w"> </span>-200,<span class="w"> </span>-500,<span class="w"> </span>-1000,<span class="w"> </span>-2000,<span class="w"> </span>-3000,<span class="w"> </span>-4000,<span class="w"> </span>-5000<span class="o">)</span>

Examples:
<span class="w">  </span>cruiseplan<span class="w"> </span>stations<span class="w"> </span>--lat<span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>--lon<span class="w"> </span>-60<span class="w"> </span>-30
<span class="w">  </span>cruiseplan<span class="w"> </span>stations<span class="w"> </span>-p<span class="w"> </span>campaigns.pkl<span class="w"> </span>-o<span class="w"> </span>station_data/
<span class="w">  </span>cruiseplan<span class="w"> </span>stations<span class="w"> </span>--bathymetry-source<span class="w"> </span>gebco2025
</pre></div>
</div>
<p><strong>cruiseplan depths</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Validate and add bathymetry depths to station configurations</span>
cruiseplan<span class="w"> </span>depths<span class="w"> </span>-c<span class="w"> </span>INPUT_CONFIG<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT_DIR<span class="o">]</span><span class="w"> </span><span class="o">[</span>--output-file<span class="w"> </span>OUTPUT_FILE<span class="o">]</span>
<span class="w">                  </span><span class="o">[</span>--tolerance<span class="w"> </span>PERCENT<span class="o">]</span><span class="w"> </span><span class="o">[</span>--source<span class="w"> </span>DATASET<span class="o">]</span>

Arguments:
<span class="w">  </span>INPUT_CONFIG<span class="w">          </span>Input<span class="w"> </span>YAML<span class="w"> </span>file<span class="w"> </span>with<span class="w"> </span>station<span class="w"> </span>positions
<span class="w">  </span>OUTPUT_DIR<span class="w">            </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>enriched<span class="w"> </span>YAML<span class="w"> </span>file
<span class="w">  </span>OUTPUT_FILE<span class="w">           </span>Path<span class="w"> </span>including<span class="w"> </span>filename<span class="w"> </span><span class="o">(</span>overrides<span class="w"> </span>OUTPUT_DIR<span class="o">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>yaml<span class="w"> </span>file

Options:
<span class="w">  </span>-c,<span class="w"> </span>--config-file<span class="w">     </span>Path<span class="w"> </span>to<span class="w"> </span>cruise<span class="w"> </span>configuration<span class="w"> </span><span class="o">(</span>required<span class="o">)</span>
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">      </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>data/<span class="o">)</span>
<span class="w">  </span>--output-file<span class="w">         </span>Specific<span class="w"> </span>output<span class="w"> </span>file<span class="w"> </span>path
<span class="w">  </span>--tolerance<span class="w">           </span>Depth<span class="w"> </span>difference<span class="w"> </span>warning<span class="w"> </span>threshold<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span><span class="m">10</span>%<span class="o">)</span>
<span class="w">  </span>--source<span class="w">              </span>Bathymetry<span class="w"> </span>dataset:<span class="w"> </span>etopo2022<span class="p">|</span>gebco2025
<span class="w">  </span>--add-missing<span class="w">         </span>Add<span class="w"> </span>depth<span class="w"> </span><span class="k">for</span><span class="w"> </span>stations<span class="w"> </span>without<span class="w"> </span>depth<span class="w"> </span>values
<span class="w">  </span>--warnings-only<span class="w">       </span>Only<span class="w"> </span>show<span class="w"> </span>warnings,<span class="w"> </span>don<span class="err">&#39;</span>t<span class="w"> </span>modify<span class="w"> </span>file

Examples:
<span class="w">  </span>cruiseplan<span class="w"> </span>depths<span class="w"> </span>stations.yaml<span class="w"> </span>--tolerance<span class="w"> </span><span class="m">15</span>
<span class="w">  </span>cruiseplan<span class="w"> </span>depths<span class="w"> </span>cruise.yaml<span class="w"> </span>--source<span class="w"> </span>gebco2025<span class="w"> </span>-o<span class="w"> </span>validated/
<span class="w">  </span>cruiseplan<span class="w"> </span>depths<span class="w"> </span>stations.yaml<span class="w"> </span>--warnings-only

Creates:
<span class="w">  </span>If<span class="w"> </span>--output-file<span class="w"> </span>not<span class="w"> </span>set,<span class="w"> </span>generates<span class="w"> </span>a<span class="w"> </span>filename<span class="w"> </span>by<span class="w"> </span>appending<span class="w"> </span><span class="s2">&quot;_with_depths&quot;</span>
<span class="w">  </span>Example:<span class="w"> </span><span class="k">for</span><span class="w"> </span>YAML_FILE<span class="w"> </span>of<span class="w"> </span>stations.yaml<span class="w"> </span>results<span class="w"> </span><span class="k">in</span><span class="w"> </span>stations_with_depths.yaml
</pre></div>
</div>
<p><strong>cruiseplan coords</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add navigational coordinate formatting to YAML configurations</span>
cruiseplan<span class="w"> </span>coords<span class="w"> </span>-c<span class="w"> </span>INPUT_CONFIG<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT_DIR<span class="o">]</span><span class="w"> </span><span class="o">[</span>--output-file<span class="w"> </span>OUTPUT_FILE<span class="o">]</span>
<span class="w">                  </span><span class="o">[</span>--format<span class="w"> </span>FORMAT<span class="o">]</span>

Arguments:
<span class="w">  </span>INPUT_CONFIG<span class="w">          </span>Input<span class="w"> </span>YAML<span class="w"> </span>with<span class="w"> </span>coordinate<span class="w"> </span>data
<span class="w">  </span>OUTPUT_DIR<span class="w">            </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>enriched<span class="w"> </span>YAML<span class="w"> </span>file
<span class="w">  </span>OUTPUT_FILE<span class="w">           </span>Path<span class="w"> </span>including<span class="w"> </span>filename<span class="w"> </span><span class="o">(</span>overrides<span class="w"> </span>OUTPUT_DIR<span class="o">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>yaml<span class="w"> </span>file

Options:
<span class="w">  </span>-c,<span class="w"> </span>--config-file<span class="w">     </span>Path<span class="w"> </span>to<span class="w"> </span>cruise<span class="w"> </span>configuration<span class="w"> </span><span class="o">(</span>required<span class="o">)</span>
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">      </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>data/<span class="o">)</span>
<span class="w">  </span>--output-file<span class="w">         </span>Specific<span class="w"> </span>output<span class="w"> </span>file<span class="w"> </span>path
<span class="w">  </span>--format<span class="w">              </span>Coordinate<span class="w"> </span>format:<span class="w"> </span>dm<span class="p">|</span>dd<span class="w"> </span><span class="o">(</span>degrees/decimal-minutes,
<span class="w">                        </span>decimal-degrees<span class="o">)</span><span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>degrees/decimal-minutes<span class="o">)</span>
<span class="w">  </span>--field-name<span class="w">          </span>Output<span class="w"> </span>field<span class="w"> </span>name<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span><span class="s2">&quot;position_string&quot;</span><span class="o">)</span>
<span class="w">  </span>--overwrite<span class="w">           </span>Overwrite<span class="w"> </span>existing<span class="w"> </span>coordinate<span class="w"> </span>strings

Examples:
<span class="w">  </span>cruiseplan<span class="w"> </span>coords<span class="w"> </span>stations.yaml<span class="w"> </span>--format<span class="w"> </span>dms
<span class="w">  </span>cruiseplan<span class="w"> </span>coords<span class="w"> </span>cruise.yaml<span class="w"> </span>--format<span class="w"> </span>dm<span class="w"> </span>--field-name<span class="w"> </span>nav_coords

Creates:
<span class="w">  </span>If<span class="w"> </span>--output-file<span class="w"> </span>not<span class="w"> </span>set,<span class="w"> </span>generates<span class="w"> </span>a<span class="w"> </span>filename<span class="w"> </span>by<span class="w"> </span>appending<span class="w"> </span><span class="s2">&quot;_with_coords&quot;</span><span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>YAML_FILE
<span class="w">  </span>Example:<span class="w"> </span><span class="k">for</span><span class="w"> </span>YAML_FILE<span class="w"> </span>of<span class="w"> </span>stations.yaml,<span class="w"> </span>creates<span class="w"> </span>stations_with_coords.yaml
</pre></div>
</div>
<p><strong>cruiseplan pangaea</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process PANGAEA DOI lists into campaign datasets</span>
cruiseplan<span class="w"> </span>pangaea<span class="w"> </span>DOI_LIST_FILE<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT_DIR<span class="o">]</span><span class="w"> </span><span class="o">[</span>--output-file<span class="w"> </span>OUTPUT_FILE<span class="o">]</span>
<span class="w">                   </span><span class="o">[</span>--rate-limit<span class="w"> </span>REQUESTS_PER_SECOND<span class="o">]</span>

Arguments:
<span class="w">  </span>OUTPUT_DIR<span class="w">           </span>Path<span class="w"> </span>to<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>PANGAEA<span class="w"> </span>pickle
<span class="w">  </span>DOI_LIST_FILE<span class="w">        </span>Text<span class="w"> </span>file<span class="w"> </span>with<span class="w"> </span>PANGAEA<span class="w"> </span>DOIs<span class="w"> </span><span class="o">(</span>one<span class="w"> </span>per<span class="w"> </span>line<span class="o">)</span>
<span class="w">  </span>OUTPUT_FILE<span class="w">          </span>Path<span class="w"> </span>including<span class="w"> </span>filename<span class="w"> </span><span class="o">(</span>overrides<span class="w"> </span>OUTPUT_DIR<span class="o">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>pickle<span class="w"> </span>file

Options:
<span class="w">  </span>-o,<span class="w"> </span>--output-dir<span class="w">     </span>Output<span class="w"> </span>directory<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>data/<span class="o">)</span>
<span class="w">  </span>--output-file<span class="w">        </span>Specific<span class="w"> </span>pickle<span class="w"> </span>output<span class="w"> </span>file<span class="w"> </span>path
<span class="w">  </span>--rate-limit<span class="w">         </span>API<span class="w"> </span>request<span class="w"> </span>rate<span class="w"> </span>limit<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span><span class="m">1</span>.0<span class="o">)</span>
<span class="w">  </span>--validate-dois<span class="w">      </span>Validate<span class="w"> </span>DOI<span class="w"> </span>format<span class="w"> </span>before<span class="w"> </span>processing<span class="w"> </span><span class="o">(</span>Default:<span class="w"> </span><span class="nb">true</span><span class="o">)</span>
<span class="w">  </span>--merge-campaigns<span class="w">    </span>Merge<span class="w"> </span>campaigns<span class="w"> </span>with<span class="w"> </span>same<span class="w"> </span>name<span class="w"> </span><span class="o">(</span>Default:<span class="w"> </span><span class="nb">true</span><span class="o">)</span>
<span class="w">  </span>--region<span class="w"> </span>LAT1<span class="w"> </span>LAT2<span class="w"> </span>LON1<span class="w"> </span>LON2<span class="w">  </span>Filter<span class="w"> </span>by<span class="w"> </span>geographic<span class="w"> </span>region

Examples:
<span class="w">  </span>cruiseplan<span class="w"> </span>pangaea<span class="w"> </span>doi_list.txt<span class="w"> </span>-o<span class="w"> </span>pangaea_data/
<span class="w">  </span>cruiseplan<span class="w"> </span>pangaea<span class="w"> </span>dois.txt<span class="w"> </span>--merge-campaigns<span class="w"> </span>--rate-limit<span class="w"> </span><span class="m">0</span>.5
<span class="w">  </span>cruiseplan<span class="w"> </span>pangaea<span class="w"> </span>dois.txt<span class="w"> </span>--region<span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">70</span><span class="w"> </span>-60<span class="w"> </span>-30
</pre></div>
</div>
</section>
<section id="consistent-ux-patterns">
<h3>Consistent UX Patterns<a class="headerlink" href="#consistent-ux-patterns" title="Link to this heading">ïƒ</a></h3>
<p><strong>Parameter Conventions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-o,</span> <span class="pre">--output-dir</span></code>: Consistent output directory specification</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output-file</span></code>: Specific file path override (takes precedence over -o)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--help</span></code>: Comprehensive help documentation for all commands</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--verbose</span></code>: Detailed progress and diagnostic output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--quiet</span></code>: Suppress non-essential output</p></li>
</ul>
<p><strong>Error Handling:</strong></p>
<ul class="simple">
<li><p>Clear, actionable error messages with suggested fixes</p></li>
<li><p>Validation errors with line numbers and context</p></li>
<li><p>Warning systems for potential issues (non-fatal)</p></li>
<li><p>Graceful degradation for missing optional dependencies</p></li>
</ul>
<p><strong>Progress Feedback:</strong></p>
<ul class="simple">
<li><p>Progress bars for long-running operations (bathymetry loading, PANGAEA queries)</p></li>
<li><p>Informative status messages during processing</p></li>
<li><p>Summary statistics upon completion</p></li>
<li><p>Timing information for performance optimization</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="testing-quality-assurance">
<h2>ğŸ§ª Testing &amp; Quality Assurance<a class="headerlink" href="#testing-quality-assurance" title="Link to this heading">ïƒ</a></h2>
<section id="testing-philosophy">
<h3>Testing Philosophy<a class="headerlink" href="#testing-philosophy" title="Link to this heading">ïƒ</a></h3>
<p><strong>Comprehensive Coverage Strategy:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>â”œâ”€â”€ Unit Tests (70% of test suite)
â”‚   â”œâ”€â”€ Individual function testing with mocked dependencies
â”‚   â”œâ”€â”€ Edge case validation (boundary conditions, error cases)
â”‚   â””â”€â”€ Type safety and API contract verification
â”œâ”€â”€ Integration Tests (20% of test suite)
â”‚   â”œâ”€â”€ Component interaction testing
â”‚   â”œâ”€â”€ File I/O and data processing workflows
â”‚   â””â”€â”€ CLI interface end-to-end validation
â””â”€â”€ Regression Tests (10% of test suite)
    â”œâ”€â”€ Known bug prevention with specific test cases
    â”œâ”€â”€ Output format stability verification
    â””â”€â”€ Performance benchmark maintenance
</pre></div>
</div>
</section>
<section id="test-categories">
<h3>Test Categories<a class="headerlink" href="#test-categories" title="Link to this heading">ïƒ</a></h3>
<p><strong>Core Functionality Tests:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Duration calculation accuracy</span>
<span class="n">test_ctd_duration_calculation</span><span class="p">()</span>          <span class="c1"># Verify depth-based timing</span>
<span class="n">test_mooring_duration_override</span><span class="p">()</span>         <span class="c1"># User-defined duration handling</span>
<span class="n">test_transfer_time_calculation</span><span class="p">()</span>         <span class="c1"># Distance/speed computations</span>

<span class="c1"># Coordinate system handling</span>
<span class="n">test_coordinate_validation</span><span class="p">()</span>             <span class="c1"># Lat/lon range validation</span>
<span class="n">test_coordinate_format_conversion</span><span class="p">()</span>      <span class="c1"># decimal degrees/degrees-decimal minutes conversion</span>
<span class="n">test_bathymetry_depth_lookup</span><span class="p">()</span>           <span class="c1"># Accurate depth interpolation</span>

<span class="c1"># YAML processing</span>
<span class="n">test_yaml_schema_validation</span><span class="p">()</span>           <span class="c1"># Configuration file validation</span>
<span class="n">test_yaml_error_reporting</span><span class="p">()</span>             <span class="c1"># Clear error messages</span>
</pre></div>
</div>
<p><strong>Interactive Component Tests:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Station picker functionality</span>
<span class="n">test_station_placement_accuracy</span><span class="p">()</span>       <span class="c1"># Coordinate precision</span>
<span class="n">test_keyboard_navigation</span><span class="p">()</span>              <span class="c1"># Mode switching and shortcuts</span>
<span class="n">test_pangaea_campaign_loading</span><span class="p">()</span>         <span class="c1"># Past cruise positions - data integration</span>
<span class="n">test_real_time_depth_display</span><span class="p">()</span>          <span class="c1"># Bathymetry lookup performance</span>

<span class="c1"># Widget behavior testing</span>
<span class="n">test_checkbox_campaign_selection</span><span class="p">()</span>      <span class="c1"># Campaign toggle functionality</span>
<span class="n">test_matplotlib_event_handling</span><span class="p">()</span>        <span class="c1"># Mouse/keyboard event processing</span>
<span class="n">test_zoom_pan_performance</span><span class="p">()</span>             <span class="c1"># Interactive map responsiveness</span>
</pre></div>
</div>
<p><strong>Output Generation Tests:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Format-specific validation</span>
<span class="n">test_latex_table_formatting</span><span class="p">()</span>           <span class="c1"># Professional table generation</span>
<span class="n">test_html_summary_generation</span><span class="p">()</span>          <span class="c1"># Interactive summary accuracy</span>
<span class="n">test_netcdf_data_structure</span><span class="p">()</span>            <span class="c1"># Scientific data format compliance</span>
<span class="n">test_kml_google_earth_compatibility</span><span class="p">()</span>   <span class="c1"># Geographic visualization</span>

<span class="c1"># Cross-format consistency</span>
<span class="n">test_data_consistency_across_formats</span><span class="p">()</span>  <span class="c1"># Identical data in all outputs</span>
<span class="n">test_coordinate_precision_preservation</span><span class="p">()</span> <span class="c1"># No precision loss in conversions</span>
<span class="n">test_unicode_handling_in_outputs</span><span class="p">()</span>      <span class="c1"># International character support</span>
</pre></div>
</div>
<p><strong>CLI Interface Tests:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Subcommand functionality</span>
<span class="n">test_schedule_generation_cli</span><span class="p">()</span>          <span class="c1"># End-to-end schedule creation</span>
<span class="n">test_station_picker_cli_arguments</span><span class="p">()</span>     <span class="c1"># Parameter passing and validation</span>
<span class="n">test_depth_validation_cli</span><span class="p">()</span>             <span class="c1"># Bathymetry integration via CLI</span>
<span class="n">test_error_handling_and_messages</span><span class="p">()</span>      <span class="c1"># User-friendly error reporting</span>

<span class="c1"># Parameter validation</span>
<span class="n">test_consistent_output_directory_handling</span><span class="p">()</span> <span class="c1"># -o flag behavior</span>
<span class="n">test_help_documentation_completeness</span><span class="p">()</span>     <span class="c1"># --help output quality</span>
<span class="n">test_invalid_argument_handling</span><span class="p">()</span>           <span class="c1"># Graceful error handling</span>
</pre></div>
</div>
</section>
<section id="quality-metrics">
<h3>Quality Metrics<a class="headerlink" href="#quality-metrics" title="Link to this heading">ïƒ</a></h3>
<p><strong>Code Coverage Targets:</strong></p>
<ul class="simple">
<li><p>Overall: 80% statement coverage minimum</p></li>
<li><p>Core modules: 90% coverage (operations, calculators, validators)</p></li>
<li><p>Interactive modules: 70% coverage (picker, widgets - GUI testing complexity)</p></li>
<li><p>CLI modules: 85% coverage (main, subcommands)</p></li>
</ul>
<p><strong>Performance Benchmarks:</strong></p>
<ul class="simple">
<li><p>Bathymetry loading: &lt;5 seconds for 1000kmÃ—1000km regions</p></li>
<li><p>Station placement response: &lt;100ms per click</p></li>
<li><p>YAML parsing: &lt;1 second for 1000-station configurations</p></li>
<li><p>Schedule generation: &lt;30 seconds for complex multi-leg cruises</p></li>
</ul>
<p><strong>Documentation Coverage:</strong></p>
<ul class="simple">
<li><p>API documentation: 100% of public functions with NumPy-style docstrings</p></li>
<li><p>Usage examples: All CLI commands with realistic examples</p></li>
<li><p>Error scenarios: Documented common issues and resolutions</p></li>
</ul>
</section>
<section id="continuous-integration">
<h3>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">ïƒ</a></h3>
<p><strong>Automated Testing Pipeline:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># GitHub Actions workflow</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Comprehensive Test Suite</span>
<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">pull_request</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">test-matrix</span><span class="p">:</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.10</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.11</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.12</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">ubuntu-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">windows-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">macos-latest</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Unit Tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest tests/unit/ --cov=cruiseplan</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Integration Tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest tests/integration/ --cov-append</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CLI Tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest tests/cli/ --cov-append</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Documentation Tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest --doctest-modules cruiseplan/</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Coverage Reporting</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">coverage report --fail-under=80</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="development-standards-guidelines">
<h2>ğŸ› ï¸ Development Standards &amp; Guidelines<a class="headerlink" href="#development-standards-guidelines" title="Link to this heading">ïƒ</a></h2>
<section id="code-quality-standards">
<h3>Code Quality Standards<a class="headerlink" href="#code-quality-standards" title="Link to this heading">ïƒ</a></h3>
<p><strong>Documentation Requirements:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># NumPy-style docstrings for all public functions</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_ctd_duration</span><span class="p">(</span><span class="n">depth</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">descent_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
                          <span class="n">ascent_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate CTD profile duration based on water depth and instrument rates.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    depth : float</span>
<span class="sd">        Water depth in meters (positive value)</span>
<span class="sd">    descent_rate : float, optional</span>
<span class="sd">        CTD descent rate in m/s (default: 1.0)</span>
<span class="sd">    ascent_rate : float, optional</span>
<span class="sd">        CTD ascent rate in m/s (default: 1.0)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    float</span>
<span class="sd">        Total profile duration in minutes, including descent and ascent</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If depth is negative or rates are non-positive</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; calculate_ctd_duration(2000.0)</span>
<span class="sd">    66.7  # 2000m depth with default 1 m/s rates</span>

<span class="sd">    &gt;&gt;&gt; calculate_ctd_duration(500.0, descent_rate=0.8, ascent_rate=1.2)</span>
<span class="sd">    20.8  # Custom instrument rates</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Calculation assumes constant descent/ascent rates. Real-world operations</span>
<span class="sd">    may require additional time for instrument stabilization and data quality</span>
<span class="sd">    checks at depth.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Type Annotations:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Full type annotations for all public APIs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="k">class</span><span class="w"> </span><span class="nc">StationPicker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">work_lon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">work_lat</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pangaea_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize station picker with optional parameters.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">place_station</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">latitude</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">longitude</span><span class="p">:</span> <span class="nb">float</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Place station at coordinates and return station data.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Linting Configuration:</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml - Ruff configuration</span>
<span class="k">[tool.ruff]</span>
<span class="n">target-version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;py39&quot;</span>
<span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span>

<span class="k">[tool.ruff.lint]</span>
<span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;E&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pycodestyle errors</span>
<span class="w">    </span><span class="s2">&quot;W&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pycodestyle warnings</span>
<span class="w">    </span><span class="s2">&quot;F&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pyflakes</span>
<span class="w">    </span><span class="s2">&quot;I&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># isort</span>
<span class="w">    </span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># flake8-bugbear</span>
<span class="w">    </span><span class="s2">&quot;C4&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># flake8-comprehensions</span>
<span class="w">    </span><span class="s2">&quot;UP&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1"># pyupgrade</span>
<span class="w">    </span><span class="s2">&quot;ANN&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1"># type annotations</span>
<span class="w">    </span><span class="s2">&quot;D&quot;</span><span class="p">,</span><span class="w">     </span><span class="c1"># pydocstyle</span>
<span class="p">]</span>

<span class="n">ignore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;D107&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># Missing docstring in __init__</span>
<span class="w">    </span><span class="s2">&quot;D203&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># 1 blank line required before class docstring</span>
<span class="w">    </span><span class="s2">&quot;D213&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># Multi-line docstring summary on second line</span>
<span class="p">]</span>

<span class="k">[tool.ruff.lint.pydocstyle]</span>
<span class="n">convention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;numpy&quot;</span><span class="w">  </span><span class="c1"># Enforce NumPy-style docstrings</span>
</pre></div>
</div>
</section>
<section id="architecture-guidelines">
<h3>Architecture Guidelines<a class="headerlink" href="#architecture-guidelines" title="Link to this heading">ïƒ</a></h3>
<p><strong>Separation of Concerns:</strong></p>
<ul class="simple">
<li><p><strong>Data Layer</strong>: Pure data processing without UI dependencies</p></li>
<li><p><strong>Business Logic</strong>: Core calculations and validations</p></li>
<li><p><strong>Presentation Layer</strong>: Output generation and user interfaces</p></li>
<li><p><strong>CLI Layer</strong>: Command-line interface and argument handling</p></li>
</ul>
<p><strong>Dependency Management:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core dependencies (required)</span>
<span class="n">numpy</span> <span class="o">&gt;=</span> <span class="mf">1.21.0</span>          <span class="c1"># Numerical computations</span>
<span class="n">pandas</span> <span class="o">&gt;=</span> <span class="mf">1.3.0</span>          <span class="c1"># Data manipulation</span>
<span class="n">xarray</span> <span class="o">&gt;=</span> <span class="mf">0.19.0</span>         <span class="c1"># N-dimensional data handling</span>
<span class="n">netCDF4</span> <span class="o">&gt;=</span> <span class="mf">1.5.8</span>         <span class="c1"># Scientific data I/O</span>
<span class="n">pyyaml</span> <span class="o">&gt;=</span> <span class="mf">6.0</span>            <span class="c1"># Configuration file parsing</span>

<span class="c1"># Scientific dependencies</span>
<span class="n">gsw</span> <span class="o">&gt;=</span> <span class="mf">3.4.0</span>             <span class="c1"># Seawater calculations</span>
<span class="n">scipy</span> <span class="o">&gt;=</span> <span class="mf">1.7.0</span>           <span class="c1"># Scientific algorithms</span>

<span class="c1"># Visualization dependencies</span>
<span class="n">matplotlib</span> <span class="o">&gt;=</span> <span class="mf">3.4.0</span>      <span class="c1"># Interactive plotting</span>
<span class="n">cartopy</span> <span class="o">&gt;=</span> <span class="mf">0.20.0</span>        <span class="c1"># Geographic projections</span>

<span class="c1"># Data source dependencies</span>
<span class="n">pangaeapy</span> <span class="o">&gt;=</span> <span class="mf">1.4.0</span>       <span class="c1"># PANGAEA database access</span>
<span class="n">requests</span> <span class="o">&gt;=</span> <span class="mf">2.25.0</span>       <span class="c1"># HTTP client for data APIs</span>

<span class="c1"># Output generation</span>
<span class="n">jinja2</span> <span class="o">&gt;=</span> <span class="mf">3.0.0</span>          <span class="c1"># Template rendering</span>
<span class="n">simplekml</span> <span class="o">&gt;=</span> <span class="mf">1.3.0</span>       <span class="c1"># KML file generation</span>
</pre></div>
</div>
<p><strong>Error Handling Philosophy:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Explicit error handling with user-friendly messages</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CruiseConfigurationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when cruise configuration is invalid.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BathymetryDataError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when bathymetry data cannot be loaded or processed.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_cruise_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate cruise configuration with detailed error reporting.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Validation logic</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CruiseConfigurationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid YAML syntax in </span><span class="si">{</span><span class="n">config_path</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Common fixes:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;- Check indentation (use spaces, not tabs)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;- Verify quotation mark matching</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;- Ensure list items start with &#39;-&#39;&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</pre></div>
</div>
</section>
<section id="performance-guidelines">
<h3>Performance Guidelines<a class="headerlink" href="#performance-guidelines" title="Link to this heading">ïƒ</a></h3>
<p><strong>Memory Management:</strong></p>
<ul class="simple">
<li><p>Lazy loading of large datasets (bathymetry data)</p></li>
<li><p>Efficient caching strategies for repeated operations</p></li>
<li><p>Memory profiling for interactive components</p></li>
<li><p>Graceful handling of system memory limitations</p></li>
</ul>
<p><strong>Optimization Priorities:</strong></p>
<ol class="arabic simple">
<li><p><strong>User experience responsiveness</strong> (interactive components)</p></li>
<li><p><strong>Data processing efficiency</strong> (large bathymetry datasets)</p></li>
<li><p><strong>File I/O optimization</strong> (YAML parsing, output generation)</p></li>
<li><p><strong>Network efficiency</strong> (PANGAEA API requests)</p></li>
</ol>
<p><strong>Caching Strategy:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Intelligent caching for expensive operations</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_bathymetry_region</span><span class="p">(</span><span class="n">lat_min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat_max</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                          <span class="n">lon_min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lon_max</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load and cache bathymetry data for specified region.&quot;&quot;&quot;</span>

<span class="c1"># Persistent caching for user data</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cache_pangaea_campaigns</span><span class="p">(</span><span class="n">campaigns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">],</span>
                           <span class="n">cache_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cache processed PANGAEA campaigns to disk.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">campaigns</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="documentation-requirements">
<h2>ğŸ“š Documentation Requirements<a class="headerlink" href="#documentation-requirements" title="Link to this heading">ïƒ</a></h2>
<section id="user-documentation">
<h3>User Documentation<a class="headerlink" href="#user-documentation" title="Link to this heading">ïƒ</a></h3>
<p><strong>Getting Started Guide:</strong></p>
<ul class="simple">
<li><p>Installation instructions for multiple platforms</p></li>
<li><p>Quick start tutorial with example cruise configuration</p></li>
<li><p>Step-by-step workflow from station selection to schedule generation</p></li>
<li><p>Common use cases with realistic oceanographic scenarios</p></li>
</ul>
<p><strong>API Reference:</strong></p>
<ul class="simple">
<li><p>Comprehensive Sphinx-generated documentation</p></li>
<li><p>Interactive examples with output samples</p></li>
<li><p>Cross-references between related functions</p></li>
<li><p>Search functionality and clear navigation</p></li>
</ul>
<p><strong>Tutorial Documentation:</strong></p>
<ul class="simple">
<li><p>Interactive station picking workflow</p></li>
<li><p>PANGAEA data integration process</p></li>
<li><p>Multi-leg cruise planning tutorial</p></li>
<li><p>Output customization examples</p></li>
</ul>
</section>
<section id="developer-documentation">
<h3>Developer Documentation<a class="headerlink" href="#developer-documentation" title="Link to this heading">ïƒ</a></h3>
<p><strong>Architecture Overview:</strong></p>
<ul class="simple">
<li><p>System design rationale and trade-offs</p></li>
<li><p>Module interaction diagrams</p></li>
<li><p>Data flow documentation</p></li>
<li><p>Extension points for future development</p></li>
</ul>
<p><strong>Contribution Guidelines:</strong></p>
<ul class="simple">
<li><p>Development environment setup</p></li>
<li><p>Testing requirements and procedures</p></li>
<li><p>Code review process and standards</p></li>
<li><p>Issue reporting templates</p></li>
</ul>
<p><strong>API Stability:</strong></p>
<ul class="simple">
<li><p>Public API versioning scheme</p></li>
<li><p>Deprecation policy and timeline</p></li>
<li><p>Backward compatibility guarantees</p></li>
<li><p>Migration guides for breaking changes</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="implementation-roadmap">
<h2>ğŸš€ Implementation Roadmap<a class="headerlink" href="#implementation-roadmap" title="Link to this heading">ïƒ</a></h2>
<section id="phase-1-core-infrastructure-weeks-1-4">
<h3>Phase 1: Core Infrastructure (Weeks 1-4)<a class="headerlink" href="#phase-1-core-infrastructure-weeks-1-4" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Spatial operations architecture</strong> (Point, Line, Area base classes)</p></li>
<li><p><strong>Leg-based cruise organization</strong> (single-leg default, multi-leg support)</p></li>
<li><p><strong>YAML configuration system</strong> (parsing, validation, error reporting)</p></li>
<li><p><strong>Bathymetry data integration</strong> (ETOPO 2022, GEBCO 2025)</p></li>
<li><p><strong>Basic calculation engines</strong> (durations, distances, routes)</p></li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul class="simple">
<li><p>Core operations module with full type annotations</p></li>
<li><p>YAML schema validation with comprehensive error messages</p></li>
<li><p>Bathymetry data loading with efficient regional subsetting</p></li>
<li><p>Unit test suite with 80%+ coverage for core functionality</p></li>
</ul>
</section>
<section id="phase-2-interactive-components-weeks-5-8">
<h3>Phase 2: Interactive Components (Weeks 5-8)<a class="headerlink" href="#phase-2-interactive-components-weeks-5-8" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Station picker interface</strong> (three-panel layout, keyboard controls)</p></li>
<li><p><strong>PANGAEA integration</strong> (DOI processing, campaign management)</p></li>
<li><p><strong>Real-time bathymetry visualization</strong> (interactive contour maps)</p></li>
<li><p><strong>Station placement and management</strong> (click-to-place, validation)</p></li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul class="simple">
<li><p>Functional interactive station picker with professional UI</p></li>
<li><p>PANGAEA data processing pipeline with caching</p></li>
<li><p>Interactive matplotlib interface with responsive performance</p></li>
<li><p>Integration tests for UI components</p></li>
</ul>
</section>
<section id="phase-3-output-generation-weeks-9-12">
<h3>Phase 3: Output Generation (Weeks 9-12)<a class="headerlink" href="#phase-3-output-generation-weeks-9-12" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>LaTeX table generation</strong> (professional proposal formatting)</p></li>
<li><p><strong>HTML summary interface</strong> (summary schedule)</p></li>
<li><p><strong>Scientific data formats</strong> (NetCDF with CF conventions)</p></li>
<li><p><strong>Map visualization</strong> (KML for Google Earth, interactive web maps)</p></li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul class="simple">
<li><p>Multi-format output system with consistent data</p></li>
<li><p>Professional LaTeX formatting for cruise proposals</p></li>
<li><p>HTML summary tables with map integration</p></li>
<li><p>Scientific NetCDF output with metadata compliance</p></li>
</ul>
</section>
<section id="phase-4-cli-integration-weeks-13-16">
<h3>Phase 4: CLI Integration (Weeks 13-16)<a class="headerlink" href="#phase-4-cli-integration-weeks-13-16" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Modern subcommand architecture</strong> (git-style interface)</p></li>
<li><p><strong>Comprehensive help system</strong> (detailed usage documentation)</p></li>
<li><p><strong>Parameter validation</strong> (consistent error handling)</p></li>
<li><p><strong>End-to-end workflows</strong> (station picking â†’ scheduling â†’ outputs)</p></li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul class="simple">
<li><p>Complete CLI interface with all subcommands</p></li>
<li><p>Comprehensive help documentation and examples</p></li>
<li><p>Integration with existing YAML workflow</p></li>
<li><p>End-to-end testing of complete user workflows</p></li>
</ul>
</section>
<section id="phase-5-polish-documentation-weeks-17-20">
<h3>Phase 5: Polish &amp; Documentation (Weeks 17-20)<a class="headerlink" href="#phase-5-polish-documentation-weeks-17-20" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Performance optimization</strong> (memory usage, response times)</p></li>
<li><p><strong>Comprehensive documentation</strong> (user guides, API reference)</p></li>
<li><p><strong>Error handling refinement</strong> (user-friendly messages)</p></li>
<li><p><strong>Testing completion</strong> (regression tests, edge cases)</p></li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul class="simple">
<li><p>Production-ready software with optimized performance</p></li>
<li><p>Complete documentation suite with interactive examples</p></li>
<li><p>Comprehensive test suite with high coverage</p></li>
<li><p>Ready for oceanographic research community deployment</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="success-criteria">
<h2>ğŸ¯ Success Criteria<a class="headerlink" href="#success-criteria" title="Link to this heading">ïƒ</a></h2>
<section id="functional-requirements-met">
<h3>Functional Requirements Met<a class="headerlink" href="#functional-requirements-met" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>âœ… Interactive station placement with bathymetry context</p></li>
<li><p>âœ… PANGAEA past cruise locations added to visualization</p></li>
<li><p>âœ… Spatial operations organization (Point, Line, Area)</p></li>
<li><p>âœ… Leg-based cruise planning for complex expeditions</p></li>
<li><p>âœ… Professional output generation (LaTeX, HTML summary, complete NetCDF, KML for Google Earth visualization, CSV lists)</p></li>
<li><p>âœ… Modern CLI interface with consistent UX patterns</p></li>
</ul>
</section>
<section id="quality-standards-achieved">
<h3>Quality Standards Achieved<a class="headerlink" href="#quality-standards-achieved" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>âœ… 80%+ test coverage with comprehensive regression testing</p></li>
<li><p>âœ… NumPy-style documentation for all public APIs</p></li>
<li><p>âœ… Type safety with full annotation coverage</p></li>
<li><p>âœ… Performance benchmarks met for interactive responsiveness</p></li>
<li><p>âœ… Error handling with actionable messages</p></li>
</ul>
</section>
<section id="user-experience-validation">
<h3>User Experience Validation<a class="headerlink" href="#user-experience-validation" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>âœ… Oceanographic researchers can efficiently plan cruises</p></li>
<li><p>âœ… Station placement is intuitive and scientifically accurate</p></li>
<li><p>âœ… Output formats meet standards required for onward analysis or cruise proposal writing</p></li>
<li><p>âœ… CLI interface follows modern software conventions</p></li>
<li><p>âœ… Learning curve is manageable for target user base</p></li>
</ul>
</section>
<section id="technical-excellence">
<h3>Technical Excellence<a class="headerlink" href="#technical-excellence" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>âœ… Modular architecture supports future enhancement</p></li>
<li><p>âœ… Data processing is efficient and scalable</p></li>
<li><p>âœ… Code quality meets professional software standards</p></li>
<li><p>âœ… Documentation enables both users and developers</p></li>
<li><p>âœ… Testing ensures reliability and prevents regressions</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="future-extension-points">
<h2>ğŸ”® Future Extension Points<a class="headerlink" href="#future-extension-points" title="Link to this heading">ïƒ</a></h2>
<section id="advanced-features-post-initial-release">
<h3>Advanced Features (Post-Initial Release)<a class="headerlink" href="#advanced-features-post-initial-release" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>For student cruises on small vessels, a 10 hour per day operation period with home port nightly.</p></li>
</ul>
</section>
<section id="scientific-enhancements">
<h3>Scientific Enhancements<a class="headerlink" href="#scientific-enhancements" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Automatic equipment planning</strong> based on station requirements</p></li>
</ul>
</section>
<section id="community-features">
<h3>Community Features<a class="headerlink" href="#community-features" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Shared cruise database</strong> for collaborative planning</p></li>
<li><p><strong>Template library</strong> for common cruise types</p></li>
<li><p><strong>Plugin architecture</strong> for specialized scientific requirements</p></li>
</ul>
<hr class="docutils" />
<p>This specification provides the comprehensive blueprint needed for another AI agent to rebuild the entire oceanographic cruise planning system while maintaining the current functionality and achieving professional software development standards. The detailed requirements cover all aspects from user experience to technical implementation, ensuring successful reconstruction of this specialized scientific software tool.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>