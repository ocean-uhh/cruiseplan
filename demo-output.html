

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CruisePlan Demo: Complete Cruise Planning Workflow &mdash; CruisePlan v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=20758594" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8b92e751"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="YAML Configuration Reference" href="yaml_reference.html" />
    <link rel="prev" title="Units and Defaults" href="units_and_defaults.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CruisePlan
              <img src="_static/cruise_plan_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html">Complete User Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#path-1-basic-planning-workflow">Path 1: Basic Planning Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#path-2-pangaea-enhanced-workflow">Path 2: PANGAEA-Enhanced Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#path-3-configuration-only-workflow">Path 3: Configuration-Only Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_workflows.html#best-practices">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_reference.html">CLI Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="units_and_defaults.html">Units and defaults</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Demo notebook</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">CruisePlan Demo: Complete Cruise Planning Workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Workflow-Overview">Workflow Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Setup-and-Imports">Setup and Imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-1:-Download-Bathymetry-Data">Step 1: Download Bathymetry Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-2:-Search-PANGAEA-Database">Step 2: Search PANGAEA Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-3:-Process-PANGAEA-Campaigns">Step 3: Process PANGAEA Campaigns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-4:-Create-Station-Configuration">Step 4: Create Station Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-5:-Validate-Configuration">Step 5: Validate Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-6:-Enrich-Configuration">Step 6: Enrich Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-7:-Generate-Schedule">Step 7: Generate Schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Step-8:-Generate-Maps">Step 8: Generate Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Workflow-Summary">Workflow Summary</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/PROJECT_SPECS.md">Development Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml_reference.html">YAML Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="netcdf_outputs.html">NetCDF Data Standards</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocean-uhh/cruiseplan/blob/main/CONTRIBUTING.md">Contributing Guidelines</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CruisePlan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CruisePlan Demo: Complete Cruise Planning Workflow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/demo-output.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="CruisePlan-Demo:-Complete-Cruise-Planning-Workflow">
<h1>CruisePlan Demo: Complete Cruise Planning Workflow<a class="headerlink" href="#CruisePlan-Demo:-Complete-Cruise-Planning-Workflow" title="Link to this heading">ÔÉÅ</a></h1>
<p>This notebook demonstrates the complete CruisePlan workflow using Python functions rather than CLI commands. Each section corresponds to a CLI subcommand and shows how to accomplish the same tasks programmatically.</p>
<section id="Workflow-Overview">
<h2>Workflow Overview<a class="headerlink" href="#Workflow-Overview" title="Link to this heading">ÔÉÅ</a></h2>
<ol class="arabic simple">
<li><p><strong>Download</strong>: Get bathymetry data for depth calculations</p></li>
<li><p><strong>Pandoi</strong>: Search PANGAEA database for relevant oceanographic datasets</p></li>
<li><p><strong>Pangaea</strong>: Process DOI list into campaign dataset</p></li>
<li><p><strong>Stations</strong>: Interactive station planning (or programmatic configuration)</p></li>
<li><p><strong>Validate</strong>: Check configuration for errors and warnings</p></li>
<li><p><strong>Enrich</strong>: Add computed data (depths, coordinates, expand sections)</p></li>
<li><p><strong>Schedule</strong>: Generate cruise timeline and outputs</p></li>
<li><p><strong>Map</strong>: Create visualization maps</p></li>
</ol>
<p>All outputs will be saved to <code class="docutils literal notranslate"><span class="pre">tests_output/demo/</span></code> for easy exploration.</p>
</section>
<section id="Setup-and-Imports">
<h2>Setup and Imports<a class="headerlink" href="#Setup-and-Imports" title="Link to this heading">ÔÉÅ</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.calculators.scheduler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_cruise_schedule</span>

<span class="c1"># Import required modules</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.cruise</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cruise</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.core.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">enrich_configuration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.bathymetry</span><span class="w"> </span><span class="kn">import</span> <span class="n">BathymetryManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.data.pangaea</span><span class="w"> </span><span class="kn">import</span> <span class="n">PangaeaManager</span><span class="p">,</span> <span class="n">save_campaign_data</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.output.map_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_map_from_yaml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cruiseplan.utils.yaml_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">save_yaml</span>

<span class="c1"># Set up output directory</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../tests_output/demo&#39;</span><span class="p">)</span>
<span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Demo outputs will be saved to: </span><span class="si">{</span><span class="n">output_dir</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Configure logging to see what&#39;s happening</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">: </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Demo outputs will be saved to: /home/runner/work/cruiseplan/cruiseplan/notebooks/../tests_output/demo
</pre></div></div>
</div>
</section>
<section id="Step-1:-Download-Bathymetry-Data">
<h2>Step 1: Download Bathymetry Data<a class="headerlink" href="#Step-1:-Download-Bathymetry-Data" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">download</span> <span class="pre">--bathymetry-source</span> <span class="pre">etopo2022</span></code></p>
<p>First, we need bathymetry data for depth calculations and visualization.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize bathymetry manager with ETOPO2022 data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üì• Downloading bathymetry data...&quot;</span><span class="p">)</span>
<span class="n">bathymetry</span> <span class="o">=</span> <span class="n">BathymetryManager</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;etopo2022&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/ETOPO_2022_v1_60s_N90W180_bed.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üì• Downloading bathymetry data...
</pre></div></div>
</div>
</section>
<section id="Step-2:-Search-PANGAEA-Database">
<h2>Step 2: Search PANGAEA Database<a class="headerlink" href="#Step-2:-Search-PANGAEA-Database" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">pandoi</span> <span class="pre">&quot;CTD</span> <span class="pre">temperature&quot;</span> <span class="pre">--lat</span> <span class="pre">50</span> <span class="pre">70</span> <span class="pre">--lon</span> <span class="pre">-60</span> <span class="pre">-30</span> <span class="pre">--limit</span> <span class="pre">15</span></code></p>
<p>Search for relevant oceanographic datasets to inform our cruise planning.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üîç Searching PANGAEA database...&quot;</span><span class="p">)</span>

<span class="c1"># Initialize PANGAEA manager</span>
<span class="n">pangaea_mgr</span> <span class="o">=</span> <span class="n">PangaeaManager</span><span class="p">()</span>

<span class="c1"># Define search parameters</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;CTD&quot;</span> <span class="c1"># or &quot;CTD temperature North Atlantic&quot;</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">70</span><span class="p">)</span>  <span class="c1"># (min_lon, min_lat, max_lon, max_lat)</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Query: &#39;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Geographic bounds: 50¬∞N-70¬∞N, 60¬∞W-30¬∞W&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Limit: </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> datasets&quot;</span><span class="p">)</span>

<span class="c1"># Perform search</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">datasets</span> <span class="o">=</span> <span class="n">pangaea_mgr</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="si">}</span><span class="s2"> datasets&quot;</span><span class="p">)</span>

    <span class="c1"># Extract DOIs and save to file</span>
    <span class="n">dois</span> <span class="o">=</span> <span class="p">[</span><span class="n">ds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;doi&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">datasets</span> <span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;doi&#39;</span><span class="p">)]</span>

    <span class="c1"># Save DOI list</span>
    <span class="n">doi_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">doi_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">doi</span> <span class="ow">in</span> <span class="n">dois</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">doi</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   DOI list saved to: </span><span class="si">{</span><span class="n">doi_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   First few DOIs: </span><span class="si">{</span><span class="n">dois</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå Search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Create a minimal DOI list for demo purposes</span>
    <span class="n">doi_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">doi_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;10.1594/PANGAEA.123456</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Created minimal DOI file for demo: </span><span class="si">{</span><span class="n">doi_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Searching Pangaea: &#39;CTD&#39; (Limit: 5)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üîç Searching PANGAEA database...
   Query: &#39;CTD&#39;
   Geographic bounds: 50¬∞N-70¬∞N, 60¬∞W-30¬∞W
   Limit: 5 datasets
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Search found 1823 total matches. Retrieving first 5...
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.755512
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604878
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604842
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604887
INFO: Fetching PANGAEA dataset: 10.1594/PANGAEA.604857
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Found 5 datasets
   DOI list saved to: ../tests_output/demo/demo_dois.txt
   First few DOIs: [&#39;10.1594/PANGAEA.755512&#39;, &#39;10.1594/PANGAEA.604878&#39;, &#39;10.1594/PANGAEA.604842&#39;]
</pre></div></div>
</div>
</section>
<section id="Step-3:-Process-PANGAEA-Campaigns">
<h2>Step 3: Process PANGAEA Campaigns<a class="headerlink" href="#Step-3:-Process-PANGAEA-Campaigns" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">pangaea</span> <span class="pre">demo_dois.txt</span> <span class="pre">-o</span> <span class="pre">tests_output/demo/</span></code></p>
<p>Process the DOI list to extract campaign coordinates and metadata.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the DOI list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_dois.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">dois</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dois</span><span class="p">)</span><span class="si">}</span><span class="s2"> PANGAEA DOIs...&quot;</span><span class="p">)</span>

<span class="c1"># Create manager and fetch datasets</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">PangaeaManager</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_datasets</span><span class="p">(</span>
    <span class="n">doi_list</span><span class="o">=</span><span class="n">dois</span><span class="p">,</span>
    <span class="n">rate_limit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">merge_campaigns</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>


<span class="k">if</span> <span class="n">datasets</span><span class="p">:</span>
    <span class="c1"># Save using the CLI&#39;s save function</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;ctd_pangaea_data.pkl&quot;</span><span class="p">)</span>
    <span class="n">save_campaign_data</span><span class="p">(</span><span class="n">datasets</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Saved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="si">}</span><span class="s2"> campaign tracks to </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚ö†Ô∏è No datasets retrieved&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìä Processing 5 PANGAEA DOIs...
‚úÖ Saved 2 campaign tracks to ../tests_output/demo/ctd_pangaea_data.pkl
</pre></div></div>
</div>
</section>
<section id="Step-4:-Create-Station-Configuration">
<h2>Step 4: Create Station Configuration<a class="headerlink" href="#Step-4:-Create-Station-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">stations</span> <span class="pre">--pangaea-file</span> <span class="pre">campaigns.pkl</span> <span class="pre">--lat</span> <span class="pre">50</span> <span class="pre">70</span> <span class="pre">--lon</span> <span class="pre">-60</span> <span class="pre">-30</span></code></p>
<p>For this demo, we‚Äôll create a programmatic station configuration rather than using the interactive interface.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üó∫Ô∏è  Creating station configuration...&quot;</span><span class="p">)</span>

<span class="c1"># Create a sample cruise configuration</span>
<span class="n">cruise_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cruise_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Demo North Atlantic Survey 2025&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Demonstration cruise for CruisePlan workflow&#39;</span><span class="p">,</span>
    <span class="s1">&#39;default_vessel_speed&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="s1">&#39;turnaround_time&#39;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">,</span>
    <span class="s1">&#39;ctd_descent_rate&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;ctd_ascent_rate&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;calculate_transfer_between_sections&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;calculate_depth_via_bathymetry&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;start_date&#39;</span><span class="p">:</span> <span class="s1">&#39;2025-06-01T00:00:00Z&#39;</span><span class="p">,</span>
    <span class="s1">&#39;departure_port&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;St. Johns&#39;</span><span class="p">,</span>
        <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">47.5615</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">52.7126</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">&#39;arrival_port&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;St. Johns&#39;</span><span class="p">,</span>
        <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">47.5615</span><span class="p">,</span>
            <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">52.7126</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">&#39;first_station&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;last_station&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_006&#39;</span><span class="p">,</span>

    <span class="c1"># Define stations along a transect</span>
    <span class="s1">&#39;stations&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_001&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">55.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">50.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Continental shelf station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_002&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">57.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">45.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Slope station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_003&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">59.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">40.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Deep water station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_004&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">61.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">35.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;water_sampling&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;sampling&#39;</span><span class="p">,</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">180.0</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Water sampling station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MOOR_001&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">60.5</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">38.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;mooring&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;deployment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">240.0</span><span class="p">,</span>
            <span class="s1">&#39;delay_start&#39;</span><span class="p">:</span> <span class="mf">60.0</span><span class="p">,</span>  <span class="c1"># Wait for daylight</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Mooring deployment&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_005&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">63.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">30.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Northern end station&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;STN_006&#39;</span><span class="p">,</span>
            <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">58.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">42.0</span><span class="p">},</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Return transect station&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>

    <span class="c1"># Add a CTD section that can be expanded</span>
    <span class="s1">&#39;transits&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Demo_CTD_Section&#39;</span><span class="p">,</span>
            <span class="s1">&#39;operation_type&#39;</span><span class="p">:</span> <span class="s1">&#39;CTD&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;section&#39;</span><span class="p">,</span>
            <span class="s1">&#39;route&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">56.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">48.0</span><span class="p">},</span>
                <span class="p">{</span><span class="s1">&#39;latitude&#39;</span><span class="p">:</span> <span class="mf">56.0</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">38.0</span><span class="p">}</span>
            <span class="p">],</span>
            <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;Zonal CTD section for expansion&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>

    <span class="c1"># Define execution order</span>
    <span class="s1">&#39;legs&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Outbound_Survey&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Outbound transect with mooring deployment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;buffer_time&#39;</span><span class="p">:</span> <span class="mf">120.0</span><span class="p">,</span>  <span class="c1"># 2h weather contingency</span>
            <span class="s1">&#39;strategy&#39;</span><span class="p">:</span> <span class="s1">&#39;sequential&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sequence&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;STN_001&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_002&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_003&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_004&#39;</span><span class="p">,</span> <span class="s1">&#39;MOOR_001&#39;</span><span class="p">,</span> <span class="s1">&#39;STN_005&#39;</span><span class="p">],</span>
            <span class="s1">&#39;transits&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Demo_CTD_Section&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Return_Survey&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Return transect&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sequence&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;STN_006&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Save configuration</span>
<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">save_yaml</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">,</span> <span class="n">config_file</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Station configuration created&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Configuration saved to: </span><span class="si">{</span><span class="n">config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Stations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;stations&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Transits: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;transits&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Legs: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise_config</span><span class="p">[</span><span class="s1">&#39;legs&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Saved configuration to: ../tests_output/demo/demo_cruise.yaml
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üó∫Ô∏è  Creating station configuration...
‚úÖ Station configuration created
   Configuration saved to: ../tests_output/demo/demo_cruise.yaml
   Stations: 7
   Transits: 1
   Legs: 2
</pre></div></div>
</div>
</section>
<section id="Step-5:-Validate-Configuration">
<h2>Step 5: Validate Configuration<a class="headerlink" href="#Step-5:-Validate-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">validate</span> <span class="pre">-c</span> <span class="pre">demo_cruise.yaml</span> <span class="pre">--check-depths</span></code></p>
<p>Check the configuration for errors and potential issues.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Validating configuration...&quot;</span><span class="p">)</span>

<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

<span class="c1"># The Cruise.__init__() automatically performs validation during loading</span>
<span class="c1"># including Pydantic model validation and cruise-specific validation</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Configuration loaded and validated successfully!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">station_registry</span><span class="p">)</span><span class="si">}</span><span class="s2"> station definitions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">[])</span><span class="si">}</span><span class="s2"> leg definitions&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;transits&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transits</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transits</span><span class="p">)</span><span class="si">}</span><span class="s2"> transit definitions&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;schedule&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cruise</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">schedule</span><span class="p">)</span><span class="si">}</span><span class="s2"> scheduled items&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Validating configuration...
‚úÖ Configuration loaded and validated successfully!
   - Found 7 station definitions
   - Found 2 leg definitions
   - Found 1 transit definitions
</pre></div></div>
</div>
</section>
<section id="Step-6:-Enrich-Configuration">
<h2>Step 6: Enrich Configuration<a class="headerlink" href="#Step-6:-Enrich-Configuration" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">enrich</span> <span class="pre">-c</span> <span class="pre">demo_cruise.yaml</span> <span class="pre">--add-depths</span> <span class="pre">--add-coords</span> <span class="pre">--expand-sections</span></code></p>
<p>Add computed data like depths, formatted coordinates, and expand CTD sections.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üîß Enriching configuration...&quot;</span><span class="p">)</span>

<span class="n">config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise.yaml&quot;</span>
<span class="n">enriched_config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise_enriched.yaml&quot;</span>

<span class="c1"># Use the actual enrichment function</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">enrich_configuration</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">config_file</span><span class="p">,</span>
    <span class="n">add_depths</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">add_coords</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">expand_sections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bathymetry_source</span><span class="o">=</span><span class="s2">&quot;etopo2022&quot;</span><span class="p">,</span>
    <span class="n">coord_format</span><span class="o">=</span><span class="s2">&quot;dmm&quot;</span><span class="p">,</span>
    <span class="n">output_path</span><span class="o">=</span><span class="n">enriched_config_file</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Configuration enriched and saved to </span><span class="si">{</span><span class="n">enriched_config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">summary</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sections_expanded&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Expanded </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;sections_expanded&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> CTD sections&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Created </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_from_expansion&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> new stations&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stations_with_depths_added&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Added depths to </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_with_depths_added&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> stations&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">summary</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stations_with_coords_added&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - Added coordinates to </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stations_with_coords_added&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> stations&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Expanded &#39;Demo_CTD_Section&#39; into 32 stations
INFO: Saved configuration to: /tmp/tmpp85xt48q.yaml
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/ETOPO_2022_v1_60s_N90W180_bed.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üîß Enriching configuration...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Saved configuration to: ../tests_output/demo/demo_cruise_enriched.yaml
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Configuration enriched and saved to ../tests_output/demo/demo_cruise_enriched.yaml
   - Expanded 1 CTD sections
   - Created 32 new stations
   - Added depths to 39 stations
   - Added coordinates to 41 stations
</pre></div></div>
</div>
</section>
<section id="Step-7:-Generate-Schedule">
<h2>Step 7: Generate Schedule<a class="headerlink" href="#Step-7:-Generate-Schedule" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">schedule</span> <span class="pre">-c</span> <span class="pre">demo_cruise_enriched.yaml</span> <span class="pre">-o</span> <span class="pre">tests_output/demo/</span> <span class="pre">--format</span> <span class="pre">all</span></code></p>
<p>Generate the complete cruise timeline and output files.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üìÖ Generating cruise schedule...&quot;</span><span class="p">)</span>

<span class="c1"># Generate the schedule with multiple output formats</span>
<span class="n">schedule_results</span> <span class="o">=</span> <span class="n">generate_cruise_schedule</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">enriched_config_file</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
    <span class="n">formats</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;html&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">],</span>  <span class="c1"># Available formats: html, csv, latex, netcdf</span>
    <span class="n">validate_depths</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">selected_leg</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Schedule generated successfully!&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">schedule_results</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">format_type</span><span class="p">,</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">schedule_results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">format_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìÖ Generating cruise schedule...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Loaded cruise: Demo North Atlantic Survey 2025
INFO: Description: Demonstration cruise for CruisePlan workflow
INFO: Generating activity timeline...
INFO: Adding 120.0 min buffer time at end of leg &#39;Outbound_Survey&#39;
INFO: - Generated 15 activities
INFO:     Total schedule duration: 280.4 hours
INFO:     Total distance: 4046.3 nm
INFO: - Generating HTML output...
INFO:     HTML schedule: Demo_North_Atlantic_Survey_2025_summary.html
INFO: - Generating CSV output...
INFO:     CSV schedule: Demo_North_Atlantic_Survey_2025_schedule.csv
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Schedule generated successfully!
   - SUCCESS: True
   - TOTAL_ACTIVITIES: 15
   - TOTAL_DURATION_HOURS: 280.41513892583305
   - TOTAL_DISTANCE_NM: 4046.2680323496397
   - FORMATS_GENERATED: [&#39;html&#39;, &#39;csv&#39;]
   - OUTPUT_FILES: [PosixPath(&#39;../tests_output/demo/Demo_North_Atlantic_Survey_2025_schedule.html&#39;), PosixPath(&#39;../tests_output/demo/Demo_North_Atlantic_Survey_2025_schedule.csv&#39;)]
   - WARNINGS: []
   - CRUISE_NAME: Demo North Atlantic Survey 2025
   - SELECTED_LEG: None
</pre></div></div>
</div>
</section>
<section id="Step-8:-Generate-Maps">
<h2>Step 8: Generate Maps<a class="headerlink" href="#Step-8:-Generate-Maps" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>CLI Equivalent</strong>: <code class="docutils literal notranslate"><span class="pre">cruiseplan</span> <span class="pre">map</span> <span class="pre">-c</span> <span class="pre">demo_cruise_enriched.yaml</span> <span class="pre">--output-file</span> <span class="pre">demo_map.png</span></code></p>
<p>Create visualization maps of the cruise plan.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üó∫Ô∏è Generating cruise track map with bathymetry...&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Load the enriched cruise configuration</span>
    <span class="n">enriched_config_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;demo_cruise_enriched.yaml&quot;</span>
    <span class="n">cruise</span> <span class="o">=</span> <span class="n">Cruise</span><span class="p">(</span><span class="n">enriched_config_file</span><span class="p">)</span>

    <span class="c1"># Generate the map using the new function</span>
    <span class="n">map_file</span> <span class="o">=</span> <span class="n">generate_map_from_yaml</span><span class="p">(</span>
        <span class="n">cruise</span><span class="p">,</span>
        <span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;demo_cruise_map.png&quot;</span><span class="p">,</span>
        <span class="n">bathymetry_source</span><span class="o">=</span><span class="s2">&quot;gebco2025&quot;</span><span class="p">,</span>
        <span class="n">bathymetry_stride</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">show_plot</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Display inline in notebook</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">map_file</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ Map generated and displayed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚ùå Map generation failed&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå Map generation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO: Loading bathymetry for region: 37.6¬∞-73.0¬∞N, -62.7¬∞--20.0¬∞E
INFO: ‚ö†Ô∏è No bathymetry file found at /home/runner/work/cruiseplan/cruiseplan/data/bathymetry/GEBCO_2025.nc. Using MOCK mode.
INFO:    Run `cruiseplan.data.bathymetry.download_bathymetry()` to fetch it.
INFO: Added bathymetry contours covering full region
INFO: Map displayed with 39 stations
INFO: Departure: St. Johns
INFO: Arrival: St. Johns
WARNING: Ignoring fixed x limits to fulfill fixed data aspect with adjustable data limits.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üó∫Ô∏è Generating cruise track map with bathymetry...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING: Ignoring fixed x limits to fulfill fixed data aspect with adjustable data limits.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/demo-output_18_3.png" src="_images/demo-output_18_3.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
‚úÖ Map generated and displayed
</pre></div></div>
</div>
</section>
<section id="Workflow-Summary">
<h2>Workflow Summary<a class="headerlink" href="#Workflow-Summary" title="Link to this heading">ÔÉÅ</a></h2>
<p>Let‚Äôs review what we‚Äôve accomplished and check our output files.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üìã CruisePlan Demo Workflow Complete!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üóÇÔ∏è  Generated files in tests_output/demo/:&quot;</span><span class="p">)</span>

<span class="c1"># List all files in output directory using pathlib.Path</span>

<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>  <span class="c1"># Ensure output_dir is a Path object</span>
<span class="k">if</span> <span class="n">output_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">output_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">))</span>
    <span class="n">total_size</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
            <span class="n">total_size</span> <span class="o">+=</span> <span class="n">size</span>
            <span class="n">size_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">KB&quot;</span> <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">MB&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   üìÑ </span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s2">&lt;30</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">size_str</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üíæ Total output size: </span><span class="si">{</span><span class="n">total_size</span><span class="o">/</span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">KB&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìÅ Output directory: </span><span class="si">{</span><span class="n">output_dir</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   No output files found&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">‚ú® Workflow Steps Completed:&quot;</span><span class="p">)</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;1. ‚úÖ Downloaded bathymetry data (ETOPO2022)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2. ‚úÖ Searched PANGAEA database for relevant datasets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;3. ‚úÖ Processed DOI list into campaign data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;4. ‚úÖ Created station configuration programmatically&quot;</span><span class="p">,</span>
    <span class="s2">&quot;5. ‚úÖ Validated configuration and checked depths&quot;</span><span class="p">,</span>
    <span class="s2">&quot;6. ‚úÖ Enriched configuration with computed data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;7. ‚úÖ Generated complete cruise schedule and timeline&quot;</span><span class="p">,</span>
    <span class="s2">&quot;8. ‚úÖ Created interactive cruise track map&quot;</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üéØ Next Steps:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Review demo_cruise_schedule.html for the complete cruise timeline&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Examine demo_cruise_enriched.yaml to see the enriched configuration&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ‚Ä¢ Import demo_cruise_schedule.nc into data analysis tools&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üöÄ This demonstrates the complete CruisePlan workflow using Python functions!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Each step corresponds to a CLI command but uses the underlying Python API.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
üìã CruisePlan Demo Workflow Complete!

üóÇÔ∏è  Generated files in tests_output/demo/:
   üìÑ Demo_North_Atlantic_Survey_2025_schedule.csv (2.2KB)
   üìÑ Demo_North_Atlantic_Survey_2025_schedule.html (7.6KB)
   üìÑ ctd_pangaea_data.pkl           (0.5KB)
   üìÑ demo_cruise.yaml               (2.3KB)
   üìÑ demo_cruise_enriched.yaml      (11.0KB)
   üìÑ demo_dois.txt                  (0.1KB)

üíæ Total output size: 23.6KB
üìÅ Output directory: /home/runner/work/cruiseplan/cruiseplan/notebooks/../tests_output/demo

‚ú® Workflow Steps Completed:
   1. ‚úÖ Downloaded bathymetry data (ETOPO2022)
   2. ‚úÖ Searched PANGAEA database for relevant datasets
   3. ‚úÖ Processed DOI list into campaign data
   4. ‚úÖ Created station configuration programmatically
   5. ‚úÖ Validated configuration and checked depths
   6. ‚úÖ Enriched configuration with computed data
   7. ‚úÖ Generated complete cruise schedule and timeline
   8. ‚úÖ Created interactive cruise track map

üéØ Next Steps:
   ‚Ä¢ Review demo_cruise_schedule.html for the complete cruise timeline
   ‚Ä¢ Examine demo_cruise_enriched.yaml to see the enriched configuration
   ‚Ä¢ Import demo_cruise_schedule.nc into data analysis tools

üöÄ This demonstrates the complete CruisePlan workflow using Python functions!
   Each step corresponds to a CLI command but uses the underlying Python API.
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="units_and_defaults.html" class="btn btn-neutral float-left" title="Units and Defaults" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="yaml_reference.html" class="btn btn-neutral float-right" title="YAML Configuration Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, Yves Sorge, Sunke Trace-Kleeberg.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>